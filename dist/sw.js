var c=new BroadcastChannel("sw");c.postMessage("\u2699\uFE0F service-worker loaded");var a="sw-cache",r=["/icons/android-chrome-192x192.png","/icons/android-chrome-512x512.png","/icons/apple-touch-icon.png","/icons/favicon-16x16.png","/icons/favicon-32x32.png","/favicon.ico"],o=["/manifest/metdata.json"];self.addEventListener("install",function(e){e.waitUntil(caches.open(a).then(function(t){return Promise.all(r.map(s=>t.add(s)))}))});function u(e,t){return!!(e.includes("_thumbnail")||e.includes("/t/")||e.includes(".ttf")||e.includes("/manifest/albums")||e.includes("/manifest/images"))}self.addEventListener("fetch",function(e){let t=e.request.url;for(let s of o)if(t.includes(s)){c.postMessage(`\u2699\uFE0F rejecting ${t} from cache`);return}e.respondWith(caches.match(e.request).then(function(s){return s||(c.postMessage(`\u2699\uFE0F service-worker cache miss for ${t}`),fetch(e.request).then(function(n){return c.postMessage(`\u2699\uFE0F cannot cache ${t} ${n?.status}`),u(t,n.status)?caches.open(a).then(function(i){return c.postMessage(`\u2699\uFE0F caching ${t} ${n.status}`),i.put(e.request,n.clone()),n}):(c.postMessage(`\u2699\uFE0F cannot cache ${t}`),n)}).catch(n=>{c.postMessage(`\u2699\uFE0F service-worker fetch failed for ${t}: ${n}`)}))}))});
//# sourceMappingURL=sw.js.map
