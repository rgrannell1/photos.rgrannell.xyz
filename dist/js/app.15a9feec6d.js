var Io=Object.create;var Yr=Object.defineProperty;var Eo=Object.getOwnPropertyDescriptor;var So=Object.getOwnPropertyNames;var Po=Object.getPrototypeOf,Do=Object.prototype.hasOwnProperty;var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var _o=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of So(e))!Do.call(t,i)&&i!==r&&Yr(t,i,{get:()=>e[i],enumerable:!(n=Eo(e,i))||n.enumerable});return t};var L=(t,e,r)=>(r=t!=null?Io(Po(t)):{},_o(e||!t||!t.__esModule?Yr(r,"default",{value:t,enumerable:!0}):r,t));var Ee=F((_a,Zr)=>{"use strict";function $e(t,e,r,n,i,s){return{tag:t,key:e,attrs:r,children:n,text:i,dom:s,is:void 0,domSize:void 0,state:void 0,events:void 0,instance:void 0}}$e.normalize=function(t){return Array.isArray(t)?$e("[",void 0,void 0,$e.normalizeChildren(t),void 0,void 0):t==null||typeof t=="boolean"?null:typeof t=="object"?t:$e("#",void 0,void 0,String(t),void 0,void 0)};$e.normalizeChildren=function(t){for(var e=new Array(t.length),r=0,n=0;n<t.length;n++)e[n]=$e.normalize(t[n]),e[n]!==null&&e[n].key!=null&&r++;if(r!==0&&r!==t.length)throw new TypeError(e.includes(null)?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");return e};Zr.exports=$e});var Zt=F((La,en)=>{"use strict";var Lo=Ee();en.exports=function(t,e){return t==null||typeof t=="object"&&t.tag==null&&!Array.isArray(t)?e.length===1&&Array.isArray(e[0])&&(e=e[0]):(e=e.length===0&&Array.isArray(t)?t:[t,...e],t=void 0),Lo("",t&&t.key,t,e)}});var ct=F((Oa,tn)=>{"use strict";tn.exports={}.hasOwnProperty});var er=F((Ra,rn)=>{"use strict";rn.exports={}});var tr=F((Ma,nn)=>{"use strict";var Oo=er();nn.exports=new Map([[Oo,!0]])});var nr=F((Ca,un)=>{"use strict";var Ro=Ee(),Mo=Zt(),rr=ct(),sn=er(),Co=tr(),Uo=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,on=Object.create(null);function jo(t){for(var e in t)if(rr.call(t,e))return!1;return!0}function No(t){return t==="value"||t==="checked"||t==="selectedIndex"||t==="selected"}function $o(t){for(var e,r="div",n=[],i={},s=!0;e=Uo.exec(t);){var o=e[1],p=e[2];if(o===""&&p!=="")r=p;else if(o==="#")i.id=p;else if(o===".")n.push(p);else if(e[3][0]==="["){var f=e[6];f&&(f=f.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),e[4]==="class"?n.push(f):(i[e[4]]=f===""?f:f||!0,No(e[4])&&(s=!1))}}return n.length>0&&(i.className=n.join(" ")),jo(i)?i=sn:Co.set(i,s),on[t]={tag:r,attrs:i,is:i.is}}function Vo(t,e){e.tag=t.tag;var r=e.attrs;if(r==null)return e.attrs=t.attrs,e.is=t.is,e;if(rr.call(r,"class")&&(r.class!=null&&(r.className=r.class),r.class=null),t.attrs!==sn){var n=r.className;r=Object.assign({},t.attrs,r),t.attrs.className!=null&&(r.className=n!=null?String(t.attrs.className)+" "+String(n):t.attrs.className)}return t.tag==="input"&&rr.call(r,"type")&&(r=Object.assign({type:r.type},r)),e.is=r.is,e.attrs=r,e}function qo(t,e,...r){if(t==null||typeof t!="string"&&typeof t!="function"&&typeof t.view!="function")throw Error("The selector must be either a string or a component.");var n=Mo(e,r);return typeof t=="string"&&(n.children=Ro.normalizeChildren(n.children),t!=="[")?Vo(on[t]||$o(t),n):(n.attrs==null&&(n.attrs={}),n.tag=t,n)}un.exports=qo});var ln=F((Ua,an)=>{"use strict";var Bo=Ee();an.exports=function(t){return t==null&&(t=""),Bo("<",void 0,void 0,t,void 0,void 0)}});var pn=F((ja,cn)=>{"use strict";var zo=Ee(),Fo=Zt();cn.exports=function(t,...e){var r=Fo(t,e);return r.attrs==null&&(r.attrs={}),r.tag="[",r.children=zo.normalizeChildren(r.children),r}});var mn=F((Na,fn)=>{"use strict";var ir=nr();ir.trust=ln();ir.fragment=pn();fn.exports=ir});var sr=F(($a,hn)=>{"use strict";hn.exports=new WeakMap});var or=F((Va,dn)=>{"use strict";var yn=sr();function*Ho(t){var e=t.dom,r=t.domSize,n=yn.get(e);if(e!=null)do{var i=e.nextSibling;yn.get(e)===n&&(yield e,r--),e=i}while(r)}dn.exports=Ho});var bn=F((qa,vn)=>{"use strict";var ur=Ee(),Go=sr(),ar=or(),gn=tr();vn.exports=function(){var t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},e,r;function n(a){return a.ownerDocument}function i(a){return a.attrs&&a.attrs.xmlns||t[a.tag]}function s(a,u){if(a.state!==u)throw new Error("'vnode.state' must not be modified.")}function o(a){var u=a.state;try{return this.apply(u,arguments)}finally{s(a,u)}}function p(a){try{return n(a).activeElement}catch{return null}}function f(a,u,c,m,h,b,U){for(var $=c;$<m;$++){var w=u[$];w!=null&&y(a,w,h,U,b)}}function y(a,u,c,m,h){var b=u.tag;if(typeof b=="string")switch(u.state={},u.attrs!=null&&Ht(u.attrs,u,c),b){case"#":d(a,u,h);break;case"<":V(a,u,m,h);break;case"[":T(a,u,c,m,h);break;default:H(a,u,c,m,h)}else W(a,u,c,m,h)}function d(a,u,c){u.dom=n(a).createTextNode(u.children),Q(a,u.dom,c)}var v={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function V(a,u,c,m){var h=u.children.match(/^\s*?<(\w+)/im)||[],b=n(a).createElement(v[h[1]]||"div");c==="http://www.w3.org/2000/svg"?(b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+u.children+"</svg>",b=b.firstChild):b.innerHTML=u.children,u.dom=b.firstChild,u.domSize=b.childNodes.length;for(var U=n(a).createDocumentFragment(),$;$=b.firstChild;)U.appendChild($);Q(a,U,m)}function T(a,u,c,m,h){var b=n(a).createDocumentFragment();if(u.children!=null){var U=u.children;f(b,U,0,U.length,c,null,m)}u.dom=b.firstChild,u.domSize=b.childNodes.length,Q(a,b,h)}function H(a,u,c,m,h){var b=u.tag,U=u.attrs,$=u.is;m=i(u)||m;var w=m?$?n(a).createElementNS(m,b,{is:$}):n(a).createElementNS(m,b):$?n(a).createElement(b,{is:$}):n(a).createElement(b);if(u.dom=w,U!=null&&vo(u,U,m),Q(a,w,h),!Ie(u)&&u.children!=null){var q=u.children;f(w,q,0,q.length,c,null,m),u.tag==="select"&&U!=null&&xo(u,U)}}function fe(a,u){var c;if(typeof a.tag.view=="function"){if(a.state=Object.create(a.tag),c=a.state.view,c.$$reentrantLock$$!=null)return;c.$$reentrantLock$$=!0}else{if(a.state=void 0,c=a.tag,c.$$reentrantLock$$!=null)return;c.$$reentrantLock$$=!0,a.state=a.tag.prototype!=null&&typeof a.tag.prototype.view=="function"?new a.tag(a):a.tag(a)}if(Ht(a.state,a,u),a.attrs!=null&&Ht(a.attrs,a,u),a.instance=ur.normalize(o.call(a.state.view,a)),a.instance===a)throw Error("A view cannot return the vnode it received as argument");c.$$reentrantLock$$=null}function W(a,u,c,m,h){fe(u,c),u.instance!=null?(y(a,u.instance,c,m,h),u.dom=u.instance.dom,u.domSize=u.instance.domSize):u.domSize=0}function ie(a,u,c,m,h,b){if(!(u===c||u==null&&c==null))if(u==null||u.length===0)f(a,c,0,c.length,m,h,b);else if(c==null||c.length===0)Ze(a,u,0,u.length);else{var U=u[0]!=null&&u[0].key!=null,$=c[0]!=null&&c[0].key!=null,w=0,q=0;if(!U)for(;q<u.length&&u[q]==null;)q++;if(!$)for(;w<c.length&&c[w]==null;)w++;if(U!==$)Ze(a,u,q,u.length),f(a,c,w,c.length,m,h,b);else if($){for(var ae=u.length-1,ne=c.length-1,lt,le,J,ue,G,Xt;ae>=q&&ne>=w&&(ue=u[ae],G=c[ne],ue.key===G.key);)ue!==G&&C(a,ue,G,m,h,b),G.dom!=null&&(h=G.dom),ae--,ne--;for(;ae>=q&&ne>=w&&(le=u[q],J=c[w],le.key===J.key);)q++,w++,le!==J&&C(a,le,J,m,Z(u,q,h),b);for(;ae>=q&&ne>=w&&!(w===ne||le.key!==G.key||ue.key!==J.key);)Xt=Z(u,q,h),ee(a,ue,Xt),ue!==J&&C(a,ue,J,m,Xt,b),++w<=--ne&&ee(a,le,h),le!==G&&C(a,le,G,m,h,b),G.dom!=null&&(h=G.dom),q++,ae--,ue=u[ae],G=c[ne],le=u[q],J=c[w];for(;ae>=q&&ne>=w&&ue.key===G.key;)ue!==G&&C(a,ue,G,m,h,b),G.dom!=null&&(h=G.dom),ae--,ne--,ue=u[ae],G=c[ne];if(w>ne)Ze(a,u,q,ae+1);else if(q>ae)f(a,c,w,ne+1,m,h,b);else{var ko=h,Kr=ne-w+1,tt=new Array(Kr),Qt=0,X=0,Jt=2147483647,Kt=0,lt,Yt;for(X=0;X<Kr;X++)tt[X]=-1;for(X=ne;X>=w;X--){lt==null&&(lt=O(u,q,ae+1)),G=c[X];var Ge=lt[G.key];Ge!=null&&(Jt=Ge<Jt?Ge:-1,tt[X-w]=Ge,ue=u[Ge],u[Ge]=null,ue!==G&&C(a,ue,G,m,h,b),G.dom!=null&&(h=G.dom),Kt++)}if(h=ko,Kt!==ae-q+1&&Ze(a,u,q,ae+1),Kt===0)f(a,c,w,ne+1,m,h,b);else if(Jt===-1)for(Yt=K(tt),Qt=Yt.length-1,X=ne;X>=w;X--)J=c[X],tt[X-w]===-1?y(a,J,m,b,h):Yt[Qt]===X-w?Qt--:ee(a,J,h),J.dom!=null&&(h=c[X].dom);else for(X=ne;X>=w;X--)J=c[X],tt[X-w]===-1&&y(a,J,m,b,h),J.dom!=null&&(h=c[X].dom)}}else{var Wt=u.length<c.length?u.length:c.length;for(w=w<q?w:q;w<Wt;w++)le=u[w],J=c[w],!(le===J||le==null&&J==null)&&(le==null?y(a,J,m,b,Z(u,w+1,h)):J==null?at(a,le):C(a,le,J,m,Z(u,w+1,h),b));u.length>Wt&&Ze(a,u,w,u.length),c.length>Wt&&f(a,c,w,c.length,m,h,b)}}}function C(a,u,c,m,h,b){var U=u.tag,$=c.tag;if(U===$&&u.is===c.is){if(c.state=u.state,c.events=u.events,To(c,u))return;if(typeof U=="string")switch(c.attrs!=null&&Gt(c.attrs,c,m),U){case"#":E(u,c);break;case"<":k(a,u,c,b,h);break;case"[":R(a,u,c,m,h,b);break;default:P(u,c,m,b)}else j(a,u,c,m,h,b)}else at(a,u),y(a,c,m,b,h)}function E(a,u){a.children.toString()!==u.children.toString()&&(a.dom.nodeValue=u.children),u.dom=a.dom}function k(a,u,c,m,h){u.children!==c.children?(Gr(a,u),V(a,c,m,h)):(c.dom=u.dom,c.domSize=u.domSize)}function R(a,u,c,m,h,b){ie(a,u.children,c.children,m,h,b);var U=0,$=c.children;if(c.dom=null,$!=null)for(var w=0;w<$.length;w++){var q=$[w];q!=null&&q.dom!=null&&(c.dom==null&&(c.dom=q.dom),U+=q.domSize||1)}c.domSize=U}function P(a,u,c,m){var h=u.dom=a.dom;m=i(u)||m,(a.attrs!=u.attrs||u.attrs!=null&&!gn.get(u.attrs))&&Ao(u,a.attrs,u.attrs,m),Ie(u)||ie(h,a.children,u.children,c,null,m)}function j(a,u,c,m,h,b){if(c.instance=ur.normalize(o.call(c.state.view,c)),c.instance===c)throw Error("A view cannot return the vnode it received as argument");Gt(c.state,c,m),c.attrs!=null&&Gt(c.attrs,c,m),c.instance!=null?(u.instance==null?y(a,c.instance,m,b,h):C(a,u.instance,c.instance,m,h,b),c.dom=c.instance.dom,c.domSize=c.instance.domSize):(u.instance!=null&&at(a,u.instance),c.domSize=0)}function O(a,u,c){for(var m=Object.create(null);u<c;u++){var h=a[u];if(h!=null){var b=h.key;b!=null&&(m[b]=u)}}return m}var z=[];function K(a){for(var u=[0],c=0,m=0,h=0,b=z.length=a.length,h=0;h<b;h++)z[h]=a[h];for(var h=0;h<b;++h)if(a[h]!==-1){var U=u[u.length-1];if(a[U]<a[h]){z[h]=U,u.push(h);continue}for(c=0,m=u.length-1;c<m;){var $=(c>>>1)+(m>>>1)+(c&m&1);a[u[$]]<a[h]?c=$+1:m=$}a[h]<a[u[c]]&&(c>0&&(z[h]=u[c-1]),u[c]=h)}for(c=u.length,m=u[c-1];c-- >0;)u[c]=m,m=z[m];return z.length=0,u}function Z(a,u,c){for(;u<a.length;u++)if(a[u]!=null&&a[u].dom!=null)return a[u].dom;return c}function ee(a,u,c){if(u.dom!=null){var m;if(u.domSize==null||u.domSize===1)m=u.dom;else{m=n(a).createDocumentFragment();for(var h of ar(u))m.appendChild(h)}Q(a,m,c)}}function Q(a,u,c){c!=null?a.insertBefore(u,c):a.appendChild(u)}function Ie(a){if(a.attrs==null||a.attrs.contenteditable==null&&a.attrs.contentEditable==null)return!1;var u=a.children;if(u!=null&&u.length===1&&u[0].tag==="<"){var c=u[0].children;a.dom.innerHTML!==c&&(a.dom.innerHTML=c)}else if(u!=null&&u.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function Ze(a,u,c,m){for(var h=c;h<m;h++){var b=u[h];b!=null&&at(a,b)}}function Fr(a,u,c,m){var h=u.state,b=o.call(c.onbeforeremove,u);if(b!=null){var U=r;for(var $ of ar(u))Go.set($,U);m.v++,Promise.resolve(b).finally(function(){s(u,h),Hr(a,u,m)})}}function Hr(a,u,c){--c.v===0&&(Bt(u),Gr(a,u))}function at(a,u){var c={v:1};typeof u.tag!="string"&&typeof u.state.onbeforeremove=="function"&&Fr(a,u,u.state,c),u.attrs&&typeof u.attrs.onbeforeremove=="function"&&Fr(a,u,u.attrs,c),Hr(a,u,c)}function Gr(a,u){if(u.dom!=null)if(u.domSize==null||u.domSize===1)a.removeChild(u.dom);else for(var c of ar(u))a.removeChild(c)}function Bt(a){if(typeof a.tag!="string"&&typeof a.state.onremove=="function"&&o.call(a.state.onremove,a),a.attrs&&typeof a.attrs.onremove=="function"&&o.call(a.attrs.onremove,a),typeof a.tag!="string")a.instance!=null&&Bt(a.instance);else{a.events!=null&&(a.events._=null);var u=a.children;if(Array.isArray(u))for(var c=0;c<u.length;c++){var m=u[c];m!=null&&Bt(m)}}}function vo(a,u,c){for(var m in u)zt(a,m,null,u[m],c)}function zt(a,u,c,m,h){if(!(u==="key"||m==null||Wr(u)||c===m&&!wo(a,u)&&typeof m!="object")){if(u[0]==="o"&&u[1]==="n")return Jr(a,u,m);if(u.slice(0,6)==="xlink:")a.dom.setAttributeNS("http://www.w3.org/1999/xlink",u.slice(6),m);else if(u==="style")Qr(a.dom,c,m);else if(Xr(a,u,h)){if(u==="value"){if((a.tag==="input"||a.tag==="textarea")&&a.dom.value===""+m||a.tag==="select"&&c!==null&&a.dom.value===""+m||a.tag==="option"&&c!==null&&a.dom.value===""+m)return;if(a.tag==="input"&&a.attrs.type==="file"&&""+m!=""){console.error("`value` is read-only on file inputs!");return}}a.tag==="input"&&u==="type"?a.dom.setAttribute(u,m):a.dom[u]=m}else typeof m=="boolean"?m?a.dom.setAttribute(u,""):a.dom.removeAttribute(u):a.dom.setAttribute(u==="className"?"class":u,m)}}function bo(a,u,c,m){if(!(u==="key"||c==null||Wr(u)))if(u[0]==="o"&&u[1]==="n")Jr(a,u,void 0);else if(u==="style")Qr(a.dom,c,null);else if(Xr(a,u,m)&&u!=="className"&&u!=="title"&&!(u==="value"&&(a.tag==="option"||a.tag==="select"&&a.dom.selectedIndex===-1&&a.dom===p(a.dom)))&&!(a.tag==="input"&&u==="type"))a.dom[u]=null;else{var h=u.indexOf(":");h!==-1&&(u=u.slice(h+1)),c!==!1&&a.dom.removeAttribute(u==="className"?"class":u)}}function xo(a,u){if("value"in u)if(u.value===null)a.dom.selectedIndex!==-1&&(a.dom.value=null);else{var c=""+u.value;(a.dom.value!==c||a.dom.selectedIndex===-1)&&(a.dom.value=c)}"selectedIndex"in u&&zt(a,"selectedIndex",null,u.selectedIndex,void 0)}function Ao(a,u,c,m){var h;if(u!=null){u===c&&!gn.has(c)&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major");for(var b in u)(h=u[b])!=null&&(c==null||c[b]==null)&&bo(a,b,h,m)}if(c!=null)for(var b in c)zt(a,b,u&&u[b],c[b],m)}function wo(a,u){return u==="value"||u==="checked"||u==="selectedIndex"||u==="selected"&&(a.dom===p(a.dom)||a.tag==="option"&&a.dom.parentNode===p(a.dom))}function Wr(a){return a==="oninit"||a==="oncreate"||a==="onupdate"||a==="onremove"||a==="onbeforeremove"||a==="onbeforeupdate"}function Xr(a,u,c){return c===void 0&&(a.tag.indexOf("-")>-1||a.is||u!=="href"&&u!=="list"&&u!=="form"&&u!=="width"&&u!=="height")&&u in a.dom}function Qr(a,u,c){if(u!==c)if(c==null)a.style="";else if(typeof c!="object")a.style=c;else if(u==null||typeof u!="object"){a.style="";for(var m in c){var h=c[m];h!=null&&(m.includes("-")?a.style.setProperty(m,String(h)):a.style[m]=String(h))}}else{for(var m in u)u[m]!=null&&c[m]==null&&(m.includes("-")?a.style.removeProperty(m):a.style[m]="");for(var m in c){var h=c[m];h!=null&&(h=String(h))!==String(u[m])&&(m.includes("-")?a.style.setProperty(m,h):a.style[m]=h)}}}function Ft(){this._=e}Ft.prototype=Object.create(null),Ft.prototype.handleEvent=function(a){var u=this["on"+a.type],c;typeof u=="function"?c=u.call(a.currentTarget,a):typeof u.handleEvent=="function"&&u.handleEvent(a);var m=this;m._!=null&&(a.redraw!==!1&&(0,m._)(),c!=null&&typeof c.then=="function"&&Promise.resolve(c).then(function(){m._!=null&&a.redraw!==!1&&(0,m._)()})),c===!1&&(a.preventDefault(),a.stopPropagation())};function Jr(a,u,c){if(a.events!=null){if(a.events._=e,a.events[u]===c)return;c!=null&&(typeof c=="function"||typeof c=="object")?(a.events[u]==null&&a.dom.addEventListener(u.slice(2),a.events,!1),a.events[u]=c):(a.events[u]!=null&&a.dom.removeEventListener(u.slice(2),a.events,!1),a.events[u]=void 0)}else c!=null&&(typeof c=="function"||typeof c=="object")&&(a.events=new Ft,a.dom.addEventListener(u.slice(2),a.events,!1),a.events[u]=c)}function Ht(a,u,c){typeof a.oninit=="function"&&o.call(a.oninit,u),typeof a.oncreate=="function"&&c.push(o.bind(a.oncreate,u))}function Gt(a,u,c){typeof a.onupdate=="function"&&c.push(o.bind(a.onupdate,u))}function To(a,u){do{if(a.attrs!=null&&typeof a.attrs.onbeforeupdate=="function"){var c=o.call(a.attrs.onbeforeupdate,a,u);if(c!==void 0&&!c)break}if(typeof a.tag!="string"&&typeof a.state.onbeforeupdate=="function"){var c=o.call(a.state.onbeforeupdate,a,u);if(c!==void 0&&!c)break}return!1}while(!1);return a.dom=u.dom,a.domSize=u.domSize,a.instance=u.instance,a.attrs=u.attrs,a.children=u.children,a.text=u.text,!0}var et;return function(a,u,c){if(!a)throw new TypeError("DOM element being rendered to does not exist.");if(et!=null&&a.contains(et))throw new TypeError("Node is currently being rendered to and thus is locked.");var m=e,h=et,b=[],U=p(a),$=a.namespaceURI;et=a,e=typeof c=="function"?c:void 0,r={};try{a.vnodes==null&&(a.textContent=""),u=ur.normalizeChildren(Array.isArray(u)?u:[u]),ie(a,a.vnodes,u,b,null,$==="http://www.w3.org/1999/xhtml"?void 0:$),a.vnodes=u,U!=null&&p(a)!==U&&typeof U.focus=="function"&&U.focus();for(var w=0;w<b.length;w++)b[w]()}finally{e=m,et=h}}}});var lr=F((Ba,xn)=>{"use strict";xn.exports=bn()()});var Tn=F((za,wn)=>{"use strict";var An=Ee();wn.exports=function(t,e,r){var n=[],i=!1,s=-1;function o(){for(s=0;s<n.length;s+=2)try{t(n[s],An(n[s+1]),p)}catch(y){r.error(y)}s=-1}function p(){i||(i=!0,e(function(){i=!1,o()}))}p.sync=o;function f(y,d){if(d!=null&&d.view==null&&typeof d!="function")throw new TypeError("m.mount expects a component, not a vnode.");var v=n.indexOf(y);v>=0&&(n.splice(v,2),v<=s&&(s-=2),t(y,[])),d!=null&&(n.push(y,d),t(y,An(d),p))}return{mount:f,redraw:p}}});var pt=F((Fa,kn)=>{"use strict";var Wo=lr();kn.exports=Tn()(Wo,typeof requestAnimationFrame<"u"?requestAnimationFrame:null,typeof console<"u"?console:null)});var cr=F((Ha,In)=>{"use strict";In.exports=function(t){if(Object.prototype.toString.call(t)!=="[object Object]")return"";var e=[];for(var r in t)n(r,t[r]);return e.join("&");function n(i,s){if(Array.isArray(s))for(var o=0;o<s.length;o++)n(i+"["+o+"]",s[o]);else if(Object.prototype.toString.call(s)==="[object Object]")for(var o in s)n(i+"["+o+"]",s[o]);else e.push(encodeURIComponent(i)+(s!=null&&s!==""?"="+encodeURIComponent(s):""))}}});var ft=F((Ga,En)=>{"use strict";var Xo=cr();En.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(e==null)return t;var r=t.indexOf("?"),n=t.indexOf("#"),i=n<0?t.length:n,s=r<0?i:r,o=t.slice(0,s),p={};Object.assign(p,e);var f=o.replace(/:([^\/\.-]+)(\.{3})?/g,function(fe,W,ie){return delete p[W],e[W]==null?fe:ie?e[W]:encodeURIComponent(String(e[W]))}),y=f.indexOf("?"),d=f.indexOf("#"),v=d<0?f.length:d,V=y<0?v:y,T=f.slice(0,V);r>=0&&(T+=t.slice(r,i)),y>=0&&(T+=(r<0?"?":"&")+f.slice(y,v));var H=Xo(p);return H&&(T+=(r<0&&y<0?"?":"&")+H),n>=0&&(T+=t.slice(n)),d>=0&&(T+=(n<0?"":"&")+f.slice(d)),T}});var Dn=F((Wa,Pn)=>{"use strict";var Qo=ft(),Sn=ct();Pn.exports=function(t,e){function r(s){return new Promise(s)}function n(s,o){return new Promise(function(p,f){s=Qo(s,o.params);var y=o.method!=null?o.method.toUpperCase():"GET",d=o.body,v=(o.serialize==null||o.serialize===JSON.serialize)&&!(d instanceof t.FormData||d instanceof t.URLSearchParams),V=o.responseType||(typeof o.extract=="function"?"":"json"),T=new t.XMLHttpRequest,H=!1,fe=!1,W=T,ie,C=T.abort;T.abort=function(){H=!0,C.call(this)},T.open(y,s,o.async!==!1,typeof o.user=="string"?o.user:void 0,typeof o.password=="string"?o.password:void 0),v&&d!=null&&!i(o,"content-type")&&T.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof o.deserialize!="function"&&!i(o,"accept")&&T.setRequestHeader("Accept","application/json, text/*"),o.withCredentials&&(T.withCredentials=o.withCredentials),o.timeout&&(T.timeout=o.timeout),T.responseType=V;for(var E in o.headers)Sn.call(o.headers,E)&&T.setRequestHeader(E,o.headers[E]);T.onreadystatechange=function(k){if(!H&&k.target.readyState===4)try{var R=k.target.status>=200&&k.target.status<300||k.target.status===304||/^file:\/\//i.test(s),P=k.target.response,j;if(V==="json"){if(!k.target.responseType&&typeof o.extract!="function")try{P=JSON.parse(k.target.responseText)}catch{P=null}}else(!V||V==="text")&&P==null&&(P=k.target.responseText);if(typeof o.extract=="function"?(P=o.extract(k.target,o),R=!0):typeof o.deserialize=="function"&&(P=o.deserialize(P)),R){if(typeof o.type=="function")if(Array.isArray(P))for(var O=0;O<P.length;O++)P[O]=new o.type(P[O]);else P=new o.type(P);p(P)}else{var z=function(){try{j=k.target.responseText}catch{j=P}var K=new Error(j);K.code=k.target.status,K.response=P,f(K)};T.status===0?setTimeout(function(){fe||z()}):z()}}catch(K){f(K)}},T.ontimeout=function(k){fe=!0;var R=new Error("Request timed out");R.code=k.target.status,f(R)},typeof o.config=="function"&&(T=o.config(T,o,s)||T,T!==W&&(ie=T.abort,T.abort=function(){H=!0,ie.call(this)})),d==null?T.send():typeof o.serialize=="function"?T.send(o.serialize(d)):d instanceof t.FormData||d instanceof t.URLSearchParams?T.send(d):T.send(JSON.stringify(d))})}r.prototype=Promise.prototype,r.__proto__=Promise;function i(s,o){for(var p in s.headers)if(Sn.call(s.headers,p)&&p.toLowerCase()===o)return!0;return!1}return{request:function(s,o){typeof s!="string"?(o=s,s=s.url):o==null&&(o={});var p=n(s,o);if(o.background===!0)return p;var f=0;function y(){--f===0&&typeof e=="function"&&e()}return d(p);function d(v){var V=v.then;return v.constructor=r,v.then=function(){f++;var T=V.apply(v,arguments);return T.then(y,function(H){if(y(),f===0)throw H}),d(T)},v}}}}});var Ln=F((Xa,_n)=>{"use strict";var Jo=pt();_n.exports=Dn()(typeof window<"u"?window:null,Jo.redraw)});var pr=F((Qa,On)=>{"use strict";var Ko=/%(?:[0-7]|(?!c[01]|e0%[89]|ed%[ab]|f0%8|f4%[9ab])(?:c|d|(?:e|f[0-4]%[89ab])[\da-f]%[89ab])[\da-f]%[89ab])[\da-f]/gi;On.exports=function(t){return String(t).replace(Ko,decodeURIComponent)}});var fr=F((Ja,Mn)=>{"use strict";var Rn=pr();Mn.exports=function(t){if(t===""||t==null)return{};t.charAt(0)==="?"&&(t=t.slice(1));for(var e=t.split("&"),r={},n={},i=0;i<e.length;i++){var s=e[i].split("="),o=Rn(s[0]),p=s.length===2?Rn(s[1]):"";p==="true"?p=!0:p==="false"&&(p=!1);var f=o.split(/\]\[?|\[/),y=n;o.indexOf("[")>-1&&f.pop();for(var d=0;d<f.length;d++){var v=f[d],V=f[d+1],T=V==""||!isNaN(parseInt(V,10));if(v===""){var o=f.slice(0,d).join();r[o]==null&&(r[o]=Array.isArray(y)?y.length:0),v=r[o]++}else if(v==="__proto__")break;if(d===f.length-1)y[v]=p;else{var H=Object.getOwnPropertyDescriptor(y,v);H!=null&&(H=H.value),H==null&&(y[v]=H=T?[]:{}),y=H}}}return n}});var mt=F((Ka,Cn)=>{"use strict";var Yo=fr();Cn.exports=function(t){var e=t.indexOf("?"),r=t.indexOf("#"),n=r<0?t.length:r,i=e<0?n:e,s=t.slice(0,i).replace(/\/{2,}/g,"/");return s?s[0]!=="/"&&(s="/"+s):s="/",{path:s,params:e<0?{}:Yo(t.slice(e+1,n))}}});var jn=F((Ya,Un)=>{"use strict";var Zo=mt();Un.exports=function(t){var e=Zo(t),r=Object.keys(e.params),n=[],i=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(s,o,p){return o==null?"\\"+s:(n.push({k:o,r:p==="..."}),p==="..."?"(.*)":p==="."?"([^/]+)\\.":"([^/]+)"+(p||""))})+"\\/?$");return function(s){for(var o=0;o<r.length;o++)if(e.params[r[o]]!==s.params[r[o]])return!1;if(!n.length)return i.test(s.path);var p=i.exec(s.path);if(p==null)return!1;for(var o=0;o<n.length;o++)s.params[n[o].k]=n[o].r?p[o+1]:decodeURIComponent(p[o+1]);return!0}}});var mr=F((Za,Vn)=>{"use strict";var Nn=ct(),$n=/^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$/;Vn.exports=function(t,e){var r={};if(e!=null)for(var n in t)Nn.call(t,n)&&!$n.test(n)&&e.indexOf(n)<0&&(r[n]=t[n]);else for(var n in t)Nn.call(t,n)&&!$n.test(n)&&(r[n]=t[n]);return r}});var Fn=F((el,zn)=>{"use strict";var eu=Ee(),tu=nr(),ru=pr(),qn=ft(),Bn=mt(),nu=jn(),iu=mr();zn.exports=function(t,e){var r=Promise.resolve(),n=!1,i=!1,s=!1,o,p,f,y,d,v,V,T,H={onremove:function(){i=s=!1,t.removeEventListener("popstate",ie,!1)},view:function(){var E=eu(d,v.key,v);return y?y.render(E):[E]}},fe=C.SKIP={};function W(){n=!1;var E=t.location.hash;C.prefix[0]!=="#"&&(E=t.location.search+E,C.prefix[0]!=="?"&&(E=t.location.pathname+E,E[0]!=="/"&&(E="/"+E)));var k=ru(E).slice(C.prefix.length),R=Bn(k);Object.assign(R.params,t.history.state);function P(O){console.error(O),C.set(f,null,{replace:!0})}j(0);function j(O){for(;O<p.length;O++)if(p[O].check(R)){var z=p[O].component,K=p[O].route,Z=z,ee=T=function(Q){if(ee===T){if(Q===fe)return j(O+1);d=Q!=null&&(typeof Q.view=="function"||typeof Q=="function")?Q:"div",v=R.params,V=k,T=null,y=z.render?z:null,s?e.redraw():(s=!0,e.mount(o,H))}};z.view||typeof z=="function"?(z={},ee(Z)):z.onmatch?r.then(function(){return z.onmatch(R.params,k,K)}).then(ee,k===f?null:P):ee();return}if(k===f)throw new Error("Could not resolve default route "+f+".");C.set(f,null,{replace:!0})}}function ie(){n||(n=!0,setTimeout(W))}function C(E,k,R){if(!E)throw new TypeError("DOM element being rendered to does not exist.");if(p=Object.keys(R).map(function(j){if(j[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(j))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:j,component:R[j],check:nu(j)}}),f=k,k!=null){var P=Bn(k);if(!p.some(function(j){return j.check(P)}))throw new ReferenceError("Default route doesn't match any known routes.")}o=E,t.addEventListener("popstate",ie,!1),i=!0,W()}return C.set=function(E,k,R){if(T!=null&&(R=R||{},R.replace=!0),T=null,E=qn(E,k),i){ie();var P=R?R.state:null,j=R?R.title:null;R&&R.replace?t.history.replaceState(P,j,C.prefix+E):t.history.pushState(P,j,C.prefix+E)}else t.location.href=C.prefix+E},C.get=function(){return V},C.prefix="#!",C.Link={view:function(E){var k=tu(E.attrs.selector||"a",iu(E.attrs,["options","params","selector","onclick"]),E.children),R,P,j;return(k.attrs.disabled=!!k.attrs.disabled)?(k.attrs.href=null,k.attrs["aria-disabled"]="true"):(R=E.attrs.options,P=E.attrs.onclick,j=qn(k.attrs.href,E.attrs.params),k.attrs.href=C.prefix+j,k.attrs.onclick=function(O){var z;typeof P=="function"?z=P.call(O.currentTarget,O):P==null||typeof P!="object"||typeof P.handleEvent=="function"&&P.handleEvent(O),z!==!1&&!O.defaultPrevented&&(O.button===0||O.which===0||O.which===1)&&(!O.currentTarget.target||O.currentTarget.target==="_self")&&!O.ctrlKey&&!O.metaKey&&!O.shiftKey&&!O.altKey&&(O.preventDefault(),O.redraw=!1,C.set(j,null,R))}),k}},C.param=function(E){return v&&E!=null?v[E]:v},C}});var Gn=F((tl,Hn)=>{"use strict";var su=pt();Hn.exports=Fn()(typeof window<"u"?window:null,su)});var _=F((rl,Xn)=>{"use strict";var ht=mn(),Wn=pt(),ou=Ln(),uu=Gn(),se=function(){return ht.apply(this,arguments)};se.m=ht;se.trust=ht.trust;se.fragment=ht.fragment;se.Fragment="[";se.mount=Wn.mount;se.route=uu;se.render=lr();se.redraw=Wn.redraw;se.request=ou.request;se.parseQueryString=fr();se.buildQueryString=cr();se.parsePathname=mt();se.buildPathname=ft();se.vnode=Ee();se.censor=mr();se.domFor=or();Xn.exports=se});var go=L(_());var A=L(_());var Y=L(_());function me(t,e){console.info(`broadcasting event: ${t}`,e),window.document.dispatchEvent(new CustomEvent(t,{detail:e}))}function yt(t,e){window.document.addEventListener(t,e)}function Se(t){t?.preventDefault()}function te(t){return e=>{me("navigate",{route:t}),Se(e)}}function au(){let t=e=>{me("click_burger_menu",{})};return{view(){return(0,Y.default)("a",{onclick:t},(0,Y.default)("span.burger","\u039E"))}}}function lu(){let t="photos";return{view(){return(0,Y.default)("a",{href:"#/",onclick:te("/")},(0,Y.default)("span.brand",t))}}}function cu(){let t=(0,Y.default)("path",{fill:"#ff9132",d:"M 4.259,23.467c-2.35,0-4.259,1.917-4.259,4.252c0,2.349, 1.909,4.244, 4.259,4.244 c 2.358,0, 4.265-1.895, 4.265-4.244C 8.525,25.383, 6.618,23.467, 4.259,23.467zM 0.005,10.873l0,6.133 c 3.993,0, 7.749,1.562, 10.577,4.391c 2.825,2.822, 4.384,6.595, 4.384,10.603l 6.16,0 C 21.125,20.349, 11.648,10.873, 0.005,10.873zM 0.012,0l0,6.136 c 14.243,0, 25.836,11.604, 25.836,25.864L 32,32 C 32,14.36, 17.648,0, 0.012,0z"});return{view(){return(0,Y.default)("a.rss",{title:"rss",href:"/manifest/atom/atom-index.xml"},[(0,Y.default)("svg",{alt:"rss",width:"25px",height:"25px",viewBox:"0 0 32 32",style:"position: relative; top: 5px;"},[t])])}}}function pu(){return{view(t){let e=t.attrs.darkMode?"\u2600\uFE0F":"\u{1F319}";return(0,Y.default)("a",{},(0,Y.default)("span.brand.switch",{onclick:()=>{me("switch_theme",{})}},e))}}}function xe(){return{view(t){return(0,Y.default)("nav.header",{role:"navigation"},[(0,Y.default)("ul",{style:"display: ruby"},[(0,Y.default)("li.header-item",{},(0,Y.default)(au())),(0,Y.default)("li.header-item",{},(0,Y.default)(lu())),(0,Y.default)("li.rss-tag header-item",{style:"float: right"},(0,Y.default)(cu())),(0,Y.default)("li.header-item",{style:"float: right"},(0,Y.default)(pu(),{darkMode:t.attrs.darkMode}))])])}}}function Qn(){return localStorage.getItem("darkMode")==="true"}var Zn=class ei{#t;#e;#r;constructor(){this.#t=0,this.#e=new Map,this.#r=new Map}map(){return this.#e}reverseMap(){return this.#r}add(e){return this.#e.has(e)?this.#e.get(e):(this.#e.set(e,this.#t),this.#r.set(this.#t,e),this.#t++,this.#t-1)}setIndex(e,r){this.#e.set(e,r),this.#r.set(r,e)}getIndex(e){return this.#e.get(e)}getValue(e){return this.#r.get(e)}has(e){return this.#e.has(e)}clone(){let e=new ei;for(let[r,n]of this.#e.entries())e.setIndex(r,n);return e}},ti=class{stringIndex;constructor(){this.stringIndex=new Zn}parseTriple(t){let e=t.match(/^(\d+) (\d+) (\d+)$/);if(!e)throw new SyntaxError(`Invalid format for triple line: ${t}`);let r=this.stringIndex.getValue(parseInt(e[1],10)),n=this.stringIndex.getValue(parseInt(e[2],10)),i=this.stringIndex.getValue(parseInt(e[3],10));if(r===void 0||n===void 0||i===void 0)throw new SyntaxError(`Invalid triple reference: ${t}`);return[r,n,i]}parseDeclaration(t){let e=t.match(/^(\d+) "(.*)"$/);if(!e)throw new SyntaxError(`Invalid format for declaration line: ${t}`);let r=e[1],n=e[2];this.stringIndex.setIndex(n,parseInt(r,10))}parse(t){if(/^(\d+)\s(\d+)\s(\d+)$/.test(t))return this.parseTriple(t);this.parseDeclaration(t)}};function mu(t){if(t==="")return{};let e=t.split("&"),r={};for(let n of e){let[i,s]=n.split("=");r[i]=s.indexOf("%")!==-1?decodeURIComponent(s):s}return r}function rt(t){let e=t.split(":",4),r=e[2],n=e[3]??"",i=n.indexOf("?"),s=i!==-1?n.slice(i+1):"",o=i!==-1?n.slice(0,i):n,p=s?mu(s):{};return{type:r,id:o,qs:p}}function x(t,e="r\xF3"){return typeof t!="string"||!t.startsWith(`urn:${e}:`)?{type:"unknown",id:t,qs:{}}:rt(t)}var hu=class ri{mapReadCount;constructor(){this.mapReadCount=0}mapRead(){this.mapReadCount++}clone(){let e=new ri;return e.mapReadCount=this.mapReadCount,e}};function _e(t){let[e,r,n]=t,i=0;for(let s=0;s<e.length;s++)i=(i<<5)-i+e.charCodeAt(s),i|=0;for(let s=0;s<r.length;s++)i=(i<<5)-i+r.charCodeAt(s),i|=0;for(let s=0;s<n.length;s++)i=(i<<5)-i+n.charCodeAt(s),i|=0;return i}var yu=class ni{indexedTriples;tripleMetadata;stringIndex;tripleHashes;hashIndices;sourceType;sourceId;sourceQs;relations;targetType;targetId;targetQs;metrics;stringUrn;constructor(e){this.indexedTriples=[],this.tripleMetadata=new Map,this.stringIndex=new Zn,this.tripleHashes=new Set,this.hashIndices=new Map,this.sourceType=new Map,this.sourceId=new Map,this.sourceQs=new Map,this.relations=new Map,this.targetType=new Map,this.targetId=new Map,this.targetQs=new Map,this.stringUrn=new Map,this.add(e),this.metrics=new hu}delete(e){for(let r=0;r<e.length;r++){let n=e[r],i=_e(n),s=this.hashIndices.get(i);if(s===void 0)continue;this.tripleHashes.delete(i),this.hashIndices.delete(i);let o=this.tripleMetadata.get(s);if(o){this.sourceType.get(o.sourceTypeIdx)?.delete(s),this.sourceId.get(o.sourceIdIdx)?.delete(s),this.relations.get(o.relation)?.delete(s),this.targetType.get(o.targetTypeIdx)?.delete(s),this.targetId.get(o.targetIdIdx)?.delete(s);for(let p of o.sourceQsIndices)this.sourceQs.get(p)?.delete(s);for(let p of o.targetQsIndices)this.targetQs.get(p)?.delete(s);this.tripleMetadata.delete(s)}delete this.indexedTriples[s]}}difference(e){return e.filter(r=>!this.hasTriple(r))}hasTriple(e){return this.tripleHashes.has(_e(e))}getTripleIndex(e){let r=_e(e);return this.hashIndices.get(r)}add(e){for(let r=0;r<e.length;r++){let n=e[r],i=n[0],s=n[1],o=n[2],p=this.stringUrn.get(i);p||(p=x(i),this.stringUrn.set(i,p));let f=this.stringUrn.get(o);f||(f=x(o),this.stringUrn.set(o,f));let y=this.stringIndex.add(i),d=this.stringIndex.add(o),v=this.stringIndex.add(p.type),V=this.stringIndex.add(p.id),T=this.stringIndex.add(f.type),H=this.stringIndex.add(f.id),fe=_e(n);if(this.tripleHashes.has(fe))continue;this.tripleHashes.add(fe);let W=this.indexedTriples.length;this.hashIndices.set(fe,W),this.indexedTriples.push([y,s,d]);let ie=[],C=[],E=this.sourceType.get(v);E||(E=new Set,this.sourceType.set(v,E)),E.add(W);let k=this.sourceId.get(V);k||(k=new Set,this.sourceId.set(V,k)),k.add(W);for(let[O,z]of Object.entries(p.qs)){let K=this.stringIndex.add(`${O}=${z}`);ie.push(K);let Z=this.sourceQs.get(K);Z||(Z=new Set,this.sourceQs.set(K,Z)),Z.add(W)}let R=this.relations.get(s);R||(R=new Set,this.relations.set(s,R)),R.add(W);let P=this.targetType.get(T);P||(P=new Set,this.targetType.set(T,P)),P.add(W);let j=this.targetId.get(H);j||(j=new Set,this.targetId.set(H,j)),j.add(W);for(let[O,z]of Object.entries(f.qs)){let K=this.stringIndex.add(`${O}=${z}`);C.push(K);let Z=this.targetQs.get(K);Z||(Z=new Set,this.targetQs.set(K,Z)),Z.add(W)}this.tripleMetadata.set(W,{sourceTypeIdx:v,sourceIdIdx:V,sourceQsIndices:ie,relation:s,targetTypeIdx:T,targetIdIdx:H,targetQsIndices:C})}return this}get length(){return this.tripleHashes.size}get arrayLength(){return this.indexedTriples.length}triples(){return this.indexedTriples.filter(e=>e!==void 0).map(([e,r,n])=>[this.stringIndex.getValue(e),r,this.stringIndex.getValue(n)])}getTriple(e){if(e<0||e>=this.indexedTriples.length)return;let r=this.indexedTriples[e];if(!r)return;let[n,i,s]=r;return[this.stringIndex.getValue(n),i,this.stringIndex.getValue(s)]}getTripleIndices(e){if(!(e<0||e>=this.indexedTriples.length))return this.indexedTriples[e]}getSourceTypeSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.sourceType.get(r)}getSourceIdSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.sourceId.get(r)}getSourceQsSet(e,r){let n=this.stringIndex.getIndex(`${e}=${r}`);if(n!==void 0)return this.metrics.mapRead(),this.sourceQs.get(n)}getRelationSet(e){return this.metrics.mapRead(),this.relations.get(e)}getTargetTypeSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.targetType.get(r)}getTargetIdSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.targetId.get(r)}getTargetQsSet(e,r){let n=this.stringIndex.getIndex(`${e}=${r}`);if(n!==void 0)return this.metrics.mapRead(),this.targetQs.get(n)}getUniqueSources(){let e=new Set;for(let n of this.indexedTriples)n!==void 0&&e.add(n[0]);let r=new Set;for(let n of e){let i=this.stringIndex.getValue(n);i!==void 0&&r.add(i)}return r}getUniqueRelations(){return new Set(this.relations.keys())}getUniqueTargets(){let e=new Set;for(let n of this.indexedTriples)n!==void 0&&e.add(n[2]);let r=new Set;for(let n of e){let i=this.stringIndex.getValue(n);i!==void 0&&r.add(i)}return r}clone(){let e=new ni([]);e.indexedTriples=this.indexedTriples.slice(),e.tripleMetadata=new Map(this.tripleMetadata),e.stringIndex=this.stringIndex.clone(),e.tripleHashes=new Set(this.tripleHashes),e.hashIndices=new Map(this.hashIndices);let r=i=>{let s=new Map;for(let[o,p]of i.entries())s.set(o,new Set(p));return s},n=i=>{let s=new Map;for(let[o,p]of i.entries())s.set(o,new Set(p));return s};return e.sourceType=r(this.sourceType),e.sourceId=r(this.sourceId),e.sourceQs=r(this.sourceQs),e.relations=n(this.relations),e.targetType=r(this.targetType),e.targetId=r(this.targetId),e.targetQs=r(this.targetQs),e.stringUrn=new Map(this.stringUrn),e.metrics=this.metrics.clone(),e}};function Jn(t){return t.startsWith("urn:")}function Kn(t){return typeof t=="string"?Jn(t)?[x(t)]:[{type:"unknown",id:t}]:Array.isArray(t)?t.map(e=>Jn(e)?x(e):{type:"unknown",id:e}):[t]}function du(t){return typeof t=="string"||Array.isArray(t)?{relation:t}:t}function Yn(t){let e=Array.isArray(t)?t[0]:t.source,r=Array.isArray(t)?t[1]:t.relation,n=Array.isArray(t)?t[2]:t.target,i={};return e&&(i.source=Kn(e)),r&&(i.relation=du(r)),n&&(i.target=Kn(n)),i}var ii=class Pe{index;validations;constructor(e,r={}){this.index=new yu(e),this.validations=r}static of(e){return new Pe(e)}static from(e){let r=[];for(let n of e){let{id:i,...s}=n;if(typeof i!="string")throw new Error("Each TripleObject must have a string id.");for(let[o,p]of Object.entries(s))if(Array.isArray(p))for(let f of p)r.push([i,o,f]);else r.push([i,o,p])}return new Pe(r)}validateTriples(e){let r=[];for(let[n,i,s]of e){let o=this.validations[i];if(!o)continue;let{type:p}=x(n),f=o(p,i,s);typeof f=="string"&&r.push(f)}if(r.length>0)throw new Error(`Triple validation failed:
- ${r.join(`
- `)}`)}add(e){this.validateTriples(e),this.index.add(e)}delete(e){return this.index.delete(e),this}triples(){return this.index.triples()}sources(){return this.index.getUniqueSources()}relations(){return this.index.getUniqueRelations()}targets(){return this.index.getUniqueTargets()}firstTriple(){let e=this.triples();return e.length>0?e[0]:void 0}firstSource(){return this.index.getTriple(0)?.[0]}firstRelation(){return this.index.getTriple(0)?.[1]}firstTarget(){return this.index.getTriple(0)?.[2]}firstObject(e=!1){let r,n={};for(let[i,s,o]of this.index.triples())r===void 0&&(r=i,n.id=i),r===i&&(Object.prototype.hasOwnProperty.call(n,s)?Array.isArray(n[s])?n[s].includes(o)||n[s].push(o):n[s]=n[s]===o?n[s]:[n[s],o]:n[s]=e?[o]:o);return Object.keys(n).length>0?n:void 0}objects(e=!1){let r=new Map;for(let[n,i,s]of this.index.triples()){let o=r.get(n);o||(o={id:n},r.set(n,o));let p=o[i];p?Array.isArray(p)?p.includes(s)||p.push(s):o[i]=p===s?p:[p,s]:o[i]=e?[s]:s}return Array.from(r.values())}map(e){return new Pe(this.triples().map(e))}flatMap(e){return new Pe(this.triples().flatMap(e))}deduplicateTriples(e){let r=new Set,n=[];for(let i of e){let s=_e(i);r.has(s)||(r.add(s),n.push(i))}return n}merge(e){return this.add(e.triples()),this}clone(){return new Pe(this.triples(),this.validations)}readThing(e,r={qs:!1}){let n=this.triples(),i=[];if(r.qs){let{type:o,id:p}=x(e);for(let f of n){let y=x(f[0]);y.type===o&&y.id===p&&i.push(f)}}else for(let o of n)o[0]===e&&i.push(o);if(i.length===0)return;let s={id:i[0][0]};for(let[,o,p]of i)Object.prototype.hasOwnProperty.call(s,o)?Array.isArray(s[o])?s[o].includes(p)||s[o].push(p):s[o]=[s[o],p]:s[o]=p;return s}readThings(e,r={qs:!1}){let n=[];for(let i of e){let s=this.readThing(i,r);s!==void 0&&n.push(s)}return n}parseThing(e,r,n={qs:!1}){let i=this.readThing(r,n);return i?e(i):void 0}parseThings(e,r,n={qs:!1}){let i=[];for(let s of r){let o=this.parseThing(e,s,n);o&&i.push(o)}return i}intersectSets(e,r){let n=new Set;for(let i of e)r.has(i)&&n.add(i);return n}search(e){let r=Yn(e);if(!r.source&&!r.relation&&!r.target)return new Pe(this.triples(),this.validations);let n=null;if(r.relation){let s=Array.isArray(r.relation.relation)?r.relation.relation:[r.relation.relation];if(s.length>0){n=new Set;for(let o of s){let p=this.index.getRelationSet(o);if(p)for(let f of p)n.add(f)}}}if(r.source){let s=this.getTripleIndicesForNodeQueries(r.source,"source");if(n===null)n=s;else{let o=new Set;for(let p of n)s.has(p)&&o.add(p);n=o}}if(r.target){let s=this.getTripleIndicesForNodeQueries(r.target,"target");if(n===null)n=s;else{let o=new Set;for(let p of n)s.has(p)&&o.add(p);n=o}}if(n===null||n.size===0)return new Pe([],this.validations);let i=[];for(let s of n){let o=this.index.getTriple(s);if(!o)continue;let[p,f,y]=o;if(r.source){let d=!1;for(let v of r.source)if(!(v.predicate&&!v.predicate(p))){d=!0;break}if(!d)continue}if(!(r.relation?.predicate&&!r.relation.predicate(f))){if(r.target){let d=!1;for(let v of r.target)if(!(v.predicate&&!v.predicate(y))){d=!0;break}if(!d)continue}i.push(o)}}return new Pe(i,this.validations)}getTripleIndicesForNodeQueries(e,r){let n=new Set;for(let i of e){if(!(i.type!==void 0||i.id!==void 0||i.qs!==void 0&&Object.keys(i.qs).length>0)){for(let f=0;f<this.index.arrayLength;f++)n.add(f);continue}let o=[];if(i.type!==void 0){let f=r==="source"?this.index.getSourceTypeSet(i.type):this.index.getTargetTypeSet(i.type);if(f)o.push(f);else continue}if(i.id!==void 0){let f=Array.isArray(i.id)?i.id:[i.id],y=new Set;for(let d of f){let v=r==="source"?this.index.getSourceIdSet(d):this.index.getTargetIdSet(d);if(v)for(let V of v)y.add(V)}if(y.size>0)o.push(y);else continue}if(i.qs!==void 0){let f=Object.keys(i.qs);if(f.length>0){let y=[];for(let d of f){let v=r==="source"?this.index.getSourceQsSet(d,i.qs[d]):this.index.getTargetQsSet(d,i.qs[d]);if(v)y.push(v);else{y.length=0;break}}if(y.length>0){let d=y[0];for(let v=1;v<y.length&&(d=this.intersectSets(d,y[v]),d.size!==0);v++);o.push(d)}else continue}}if(o.length===0)continue;let p=o[0];for(let f=1;f<o.length&&(p=this.intersectSets(p,o[f]),p.size!==0);f++);for(let f of p)n.add(f)}return n}searchTriples(e){let r=Yn(e);if(!r.source&&!r.relation&&!r.target)return this.triples();let n=null;if(r.relation){let s=Array.isArray(r.relation.relation)?r.relation.relation:[r.relation.relation];if(s.length>0){n=new Set;for(let o of s){let p=this.index.getRelationSet(o);if(p)for(let f of p)n.add(f)}}}if(r.source){let s=this.getTripleIndicesForNodeQueries(r.source,"source");if(n===null)n=s;else{let o=new Set;for(let p of n)s.has(p)&&o.add(p);n=o}}if(r.target){let s=this.getTripleIndicesForNodeQueries(r.target,"target");if(n===null)n=s;else{let o=new Set;for(let p of n)s.has(p)&&o.add(p);n=o}}if(n===null||n.size===0)return[];let i=[];for(let s of n){let o=this.index.getTriple(s);if(!o)continue;let[p,f,y]=o;if(r.source){let d=!1;for(let v of r.source)if(!(v.predicate&&!v.predicate(p))){d=!0;break}if(!d)continue}if(!(r.relation?.predicate&&!r.relation.predicate(f))){if(r.target){let d=!1;for(let v of r.target)if(!(v.predicate&&!v.predicate(y))){d=!0;break}if(!d)continue}i.push(o)}}return i}searchFlatmap(e,r){let n=this.searchTriples(e),i=n.flatMap(r),s=new Set,o=new Set,p=new Map;for(let d of n)s.add(_e(d));for(let d of i){let v=_e(d);o.add(v),p.set(v,d)}let f=[];for(let d of n){let v=_e(d);o.has(v)||f.push(d)}let y=[];for(let d of o)s.has(d)||y.push(p.get(d));return f.length>0&&this.delete(f),y.length>0&&this.add(y),this}get triplesCount(){return this.index.length}};async function*gu(t){let e=new ti,r=await fetch(t);if(!r.body)throw new Error("No response body");let n=new TextDecoderStream,i=r.body.pipeThrough(n).getReader(),s="",o=[];for(;;){let{value:p,done:f}=await i.read();if(f)break;s+=p;let y=s.split(`
`);s=y.pop()??"";for(let d of y){let v=e.parse(d);v!==void 0&&o.push(v),o.length>=500&&(yield[...o],o.length=0)}}if(s.length>0){let p=e.parse(s);p!==void 0&&o.push(p)}o.length>0&&(yield[...o])}var dt=null;async function si(t,e={},r=n=>[n]){dt||(dt=new ii([],e));for await(let n of gu(t))for(let i of n)dt.add(r(i));return dt}var S=class{static ALBUM_ID="albumId";static SUBJECT="subject";static LOCATION="location";static LONGITUDE="longitude";static LATITUDE="latitude";static COUNTRY="country";static FLAG="flag";static RATING="rating";static NAME="name";static BIRDWATCH_URL="birdwatchUrl";static WIKIPEDIA="wikipedia";static CREATED_AT="createdAt";static SEASON="season";static F_STOP="f_stop";static FOCAL_LENGTH="focalLength";static MODEL="model";static EXPOSURE_TIME="exposureTime";static ISO="iso";static WIDTH="width";static HEIGHT="height";static THUMBNAIL_URL="thumbnailUrl";static PNG_URL="pngUrl";static MID_IMAGE_LOSSY_URL="midImageLossyUrl";static FULL_IMAGE="fullImage";static POSTER_URL="posterUrl";static VIDEO_URL_1080P="videoUrl1080p";static VIDEO_URL_480P="videoUrl480p";static VIDEO_URL_720P="videoUrl720p";static VIDEO_URL_UNSCALED="videoUrlUnscaled";static YEAR="year";static CONTAINS="contains";static IN="in";static STYLE="style";static FLAGS="flags";static CONTAINS_ALBUM="containsAlbum";static TRIP="trip";static FEATURES="features";static PLACES_WITH_FEATURE="placesWithFeature"},I=class{static PLACE="place";static COUNTRY="country";static BIRD="bird";static MAMMAL="mammal";static REPTILE="reptile";static AMPHIBIAN="amphibian";static INSECT="insect";static CAMERA="camera";static PHOTO="photo";static VIDEO="video";static ALBUM="album";static UNESCO="unesco";static FISH="fish";static PLACE_FEATURE="place_feature"},oi=new Set([I.COUNTRY,I.CAMERA,I.PLACE]),hr=new Map([["country","countries"]]);var ui=new Set([S.THUMBNAIL_URL,S.PNG_URL,S.MID_IMAGE_LOSSY_URL,S.FULL_IMAGE,S.POSTER_URL,S.VIDEO_URL_1080P,S.VIDEO_URL_480P,S.VIDEO_URL_720P,S.VIDEO_URL_UNSCALED]),ai=[[S.IN,S.CONTAINS],[S.CONTAINS_ALBUM,S.TRIP]],yr={i:"urn:r\xF3:",birdwatch:"https://birdwatchireland.ie/birds/",photos:"https://photos-cdn.rgrannell.xyz/",wiki:"https://en.wikipedia.org/wiki/"},dr=/^\[([a-z]*):(.*)\]$/,li="https://photos-cdn.rgrannell.xyz";var nt={aquarium:"\u{1F420}",aquaduct:"\u{1F3DB}\uFE0F",archaeological:"\u{1F3FA}",beach:"\u{1F3D6}\uFE0F",bridge:"\u{1F309}",canal:"\u{1F6A4}",castle:"\u{1F3F0}",church:"\u26EA",cathedral:"\u26EA",continent:"\u{1F30D}",cave:"\u26CF\uFE0F",city:"\u{1F3D9}\uFE0F",cliffs:"\u26F0\uFE0F",county:"\u{1F5FA}\uFE0F",district:"\u{1F3D8}\uFE0F",garden:"\u{1F33A}",harbor:"\u2693",island:"\u{1F3DD}\uFE0F",lake:"\u{1F3DE}\uFE0F",monument:"\u{1F5FF}",mosque:"\u{1F54C}",mountain:"\u{1F3D4}\uFE0F",mountains:"\u{1F3D4}\uFE0F",museum:"\u{1F3DB}\uFE0F",monastery:"\u{1F3EF}",national:"\u{1F1FA}\u{1F1F3}",nature:"\u{1F33F}",palace:"\u{1F3EF}",park:"\u{1F333}",port:"\u{1F6F3}\uFE0F",rainforest:"\u{1F334}",square:"\u{1F3E2}",state:"\u{1F3DB}\uFE0F",street:"\u{1F6B6}\u200D\u2642\uFE0F",town:"\u{1F3D8}\uFE0F",train:"\u{1F686}",unesco:"\u{1F3DB}\uFE0F",village:"\u{1F3E1}",volcano:"\u{1F30B}",waterfall:"\u{1F4A6}",wildlife:"\u{1F981}",zoo:"\u{1F993}"},ci=new Set(["dc-gh5","dc-gh6","dmc-fz72","dmc-g7","finepix-f70exr","xz-1"]),pi=new Set(["pixel-4a","pixel-7-pro","pixel-9a","sm-a520f"]),fi=new Set([I.BIRD,I.MAMMAL,I.REPTILE,I.AMPHIBIAN,I.FISH,I.INSECT]);function Ve(t){return t.charAt(0).toUpperCase()+t.slice(1)}function gt(t){return hr.has(t)?hr.get(t):t+"s"}function mi(t){let e=t.replace(/-/g," ");return Ve(e)}function hi(t){let e=t.replace(/-/g," ");return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function vt(t){return t.replace(/\\"/g,'"')}function vu(t){let[e,r,n]=t;return Array.from(ui).some(s=>r===s)?[[e,r,`${li}${n}`]]:[t]}function bu(t){let[e,r,n]=t;return[[typeof e=="string"&&e.startsWith("::")?`urn:r\xF3:${e.slice(2)}`:e,r,typeof n=="string"&&n.startsWith("::")?`urn:r\xF3:${n.slice(2)}`:n]]}function xu(t){let e=t.search({relation:S.CREATED_AT}).triples().flatMap(([r,n,i])=>{let s=new Date(i);if(isNaN(s.getTime()))return[];let o=s.getUTCFullYear().toString();return[[r,S.YEAR,o]]});t.add(e)}function Au(t){let e=t.search({relation:S.FEATURES}).triples(),r=new Set;for(let[,,i]of e)x(i)?.type===I.PLACE_FEATURE&&r.add(i);let n=[];for(let i of r){let{id:s}=x(i);n.push([i,"id",i],[i,S.NAME,hi(s)])}t.add(n)}function wu(t){let e=[];for(let[r,n]of ai){let i=t.search({relation:r}).triples();for(let[s,o,p]of i)e.push([p,n,s])}t.add(e)}var yi=new Map;function di(t,e){let r=yi.get(e);if(r)return r;if(typeof e!="string"||!dr.test(e))return e;let n=e.match(dr);if(!n)return e;let i=n[1],s=n[2],o=t[i]?`${t[i]}${s}`:e;return yi.set(e,o),o}function Tu(t){let[e,r,n]=t;return[[di(yr,e),r,di(yr,n)]]}function ku(t){let e={nodes:new Map,branchIds:new Set},r=t.search({relation:S.IN}).triples(),n=e.nodes;for(let[i,,s]of r){let o=n.get(i);o||(o={id:i,parents:new Set},n.set(i,o));let p=n.get(s);p||(p={id:s,parents:new Set},n.set(s,p)),e.branchIds.add(s),o?.parents.add(s)}return e}var gi=[["urn:r\xF3:rating:%E2%AD%90",S.NAME,"\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50\u2B50\u2B50"]];function vi(t){let e=[bu,Tu,vu],r=[t];for(let n of e){let i=[];for(let s of r)i.push(...n(s));r=[...i],i=[]}return r}function bi(t){xu(t),Au(t),wu(t),Iu(t)}function Iu(t){let e=ku(t);function r(i,s){let o=[],p=e.nodes.get(s);if(!p)throw new Error(`no node in location tree for ${s}`);if(i.length>5)throw new Error(`likely cycle; ${JSON.stringify(i)}`);if(p.parents.size===0){let f=[...i,s];for(let y=0;y<f.length-1;y++)for(let d=y;d<f.length;d++){let v=f[y],V=f[d];v!==V&&(o.push([v,S.IN,V]),o.push([V,S.CONTAINS,v]))}}else for(let f of p.parents)o.push(...r([...i,s],f));return o}let n=[];for(let i of e.nodes.keys())e.branchIds.has(i)||n.push(...r([],i));t.add(n)}function xi(t){let e=[];for(let r of t)e.push(`Parse warning @
${JSON.stringify(r.path,null,2)}
: ${r.message}`);console.warn(e.join(`
`)),console.trace()}var gr;function wi(t){return{lang:t?.lang??gr?.lang,message:t?.message,abortEarly:t?.abortEarly??gr?.abortEarly,abortPipeEarly:t?.abortPipeEarly??gr?.abortPipeEarly}}var Eu;function Su(t){return Eu?.get(t)}var Pu;function Du(t){return Pu?.get(t)}var _u;function Lu(t,e){return _u?.get(t)?.get(e)}function Ou(t){let e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&Object.getPrototypeOf(t)?.constructor?.name)??"null":e}function De(t,e,r,n,i){let s=i&&"input"in i?i.input:r.value,o=i?.expected??t.expects??null,p=i?.received??Ou(s),f={kind:t.kind,type:t.type,input:s,expected:o,received:p,message:`Invalid ${e}: ${o?`Expected ${o} but r`:"R"}eceived ${p}`,requirement:t.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},y=t.kind==="schema",d=i?.message??t.message??Lu(t.reference,f.lang)??(y?Du(f.lang):null)??n.message??Su(f.lang);d!==void 0&&(f.message=typeof d=="function"?d(f):d),y&&(r.typed=!1),r.issues?r.issues.push(f):r.issues=[f]}function Le(t){return{version:1,vendor:"valibot",validate(e){return t["~run"]({value:e},wi())}}}function Ru(t,e){let r=[...new Set(t)];return r.length>1?`(${r.join(` ${e} `)})`:r[0]??"never"}function vr(t){return{kind:"validation",type:"integer",reference:vr,async:!1,expects:null,requirement:Number.isInteger,message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&De(this,"integer",e,r),e}}}function br(t){return{kind:"transformation",type:"transform",reference:br,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}}function xr(t){return{kind:"validation",type:"url",reference:xr,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&De(this,"URL",e,r),e}}}function Mu(t,e,r){return typeof t.fallback=="function"?t.fallback(e,r):t.fallback}function Ti(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function Ar(){return{kind:"schema",type:"any",reference:Ar,expects:"any",async:!1,get"~standard"(){return Le(this)},"~run"(t){return t.typed=!0,t}}}function wr(t,e){return{kind:"schema",type:"array",reference:wr,expects:"Array",async:!1,item:t,message:e,get"~standard"(){return Le(this)},"~run"(r,n){let i=r.value;if(Array.isArray(i)){r.typed=!0,r.value=[];for(let s=0;s<i.length;s++){let o=i[s],p=this.item["~run"]({value:o},n);if(p.issues){let f={type:"array",origin:"value",input:i,key:s,value:o};for(let y of p.issues)y.path?y.path.unshift(f):y.path=[f],r.issues?.push(y);if(r.issues||(r.issues=p.issues),n.abortEarly){r.typed=!1;break}}p.typed||(r.typed=!1),r.value.push(p.value)}}else De(this,"type",r,n);return r}}}function Tr(t){return{kind:"schema",type:"number",reference:Tr,expects:"number",async:!1,message:t,get"~standard"(){return Le(this)},"~run"(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:De(this,"type",e,r),e}}}function kr(t,e){return{kind:"schema",type:"object",reference:kr,expects:"Object",async:!1,entries:t,message:e,get"~standard"(){return Le(this)},"~run"(r,n){let i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(let s in this.entries){let o=this.entries[s];if(s in i||(o.type==="exact_optional"||o.type==="optional"||o.type==="nullish")&&o.default!==void 0){let p=s in i?i[s]:Ti(o),f=o["~run"]({value:p},n);if(f.issues){let y={type:"object",origin:"value",input:i,key:s,value:p};for(let d of f.issues)d.path?d.path.unshift(y):d.path=[y],r.issues?.push(d);if(r.issues||(r.issues=f.issues),n.abortEarly){r.typed=!1;break}}f.typed||(r.typed=!1),r.value[s]=f.value}else if(o.fallback!==void 0)r.value[s]=Mu(o);else if(o.type!=="exact_optional"&&o.type!=="optional"&&o.type!=="nullish"&&(De(this,"key",r,n,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),n.abortEarly))break}}else De(this,"type",r,n);return r}}}function Ir(t,e){return{kind:"schema",type:"optional",reference:Ir,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:e,get"~standard"(){return Le(this)},"~run"(r,n){return r.value===void 0&&(this.default!==void 0&&(r.value=Ti(this,r,n)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,n)}}}function Er(t){return{kind:"schema",type:"string",reference:Er,expects:"string",async:!1,message:t,get"~standard"(){return Le(this)},"~run"(e,r){return typeof e.value=="string"?e.typed=!0:De(this,"type",e,r),e}}}function Ai(t){let e;if(t)for(let r of t)e?e.push(...r.issues):e=r.issues;return e}function Sr(t,e){return{kind:"schema",type:"union",reference:Sr,expects:Ru(t.map(r=>r.expects),"|"),async:!1,options:t,message:e,get"~standard"(){return Le(this)},"~run"(r,n){let i,s,o;for(let p of this.options){let f=p["~run"]({value:r.value},n);if(f.typed)if(f.issues)s?s.push(f):s=[f];else{i=f;break}else o?o.push(f):o=[f]}if(i)return i;if(s){if(s.length===1)return s[0];De(this,"type",r,n,{issues:Ai(s)}),r.typed=!0}else{if(o?.length===1)return o[0];De(this,"type",r,n,{issues:Ai(o)})}return r}}}function ki(...t){return{...t[0],pipe:t,get"~standard"(){return Le(this)},"~run"(e,r){for(let n of t)if(n.kind!=="metadata"){if(e.issues&&(n.kind==="schema"||n.kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=n["~run"](e,r))}return e}}}function bt(t,e,r){let n=t["~run"]({value:e},wi(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}var Ei=L(_());var Ii=L(_());function We(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function M(t){return Array.isArray(t)?t[0]:t}function xt(t){let e=M(t.features),{id:r}=x(e);return Object.prototype.hasOwnProperty.call(nt,r)?nt[r]:"\u{1F4CD}"}function Cu(t){let{id:e}=x(t);return Object.prototype.hasOwnProperty.call(nt,e)?nt[e]:"\u{1F4CD}"}function qe(t){return M(t.flag)}function Uu(){return"\u{1F424}"}function ju(t){let{id:e}=x(t.id);return ci.has(e)?"\u{1F4F7}":pi.has(e)?"\u{1F4F1}":"\u{1F4F7}"}function At(t,e,r){let{type:n}=x(t);switch(n){case I.PLACE:return xt(r);case I.COUNTRY:return qe(r);case I.BIRD:return Uu();case I.CAMERA:return ju(r);case I.PLACE_FEATURE:return Cu(t);default:return""}}function wt(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=x(e),s=i;if(Object.prototype.hasOwnProperty.call(r,"name")){let p=M(r.name);p&&(s=p)}let o=At(e,s,r);return(0,Ii.default)("a",{href:e,onclick:te(`/thing/${n}:${i}`),class:["thing-link",`${n}-link`].join(" ")},`${o}	${s}`)}}}function Xe(t,e){let{id:r,type:n}=x(e);return t.search({source:{id:r,type:n}}).firstObject()}function Si(t,e,r){let n=Xe(e,r);if(n)return t(e,n)}function Pi(t,e){let r=[];for(let n of e){let i=Xe(t,n);i&&r.push(i)}return r}var Di=function(t,e,r){if(typeof t!="function")throw new Error("Parser must be a function");let n=[];for(let i of r){let s=Xe(e,i);if(!s)continue;let o=t(e,s);o&&n.push(o)}return n};function Pr(t,e){return t.search({source:{type:e}}).objects().filter(n=>Object.prototype.hasOwnProperty.call(n,"name")).sort((n,i)=>{let s=n.name,o=i.name,p=M(s),f=M(o);return p.localeCompare(f)})}function _i(t,e){return e.flatMap(r=>{if(!r)return[];let n=Xe(t,r);return!n||!n.name?[]:[(0,Ei.default)(wt,{urn:r,thing:n})]})}function he(t,e){return(r,n)=>{let i=bt(t,n);if(!i.success){xi(i.issues);return}return{...i.output,type:e}}}function Dr(t){return(e,r)=>{let{type:n}=x(M(r.id)),i=t[n]??t.default;if(i)return i(e,r)}}function Nu(t){return(e,r)=>Si(t,e,r)}function $u(t){if(typeof t!="function")throw new Error("Parser must be a function");return(e,r)=>Di(t,e,r)}function ce(t){return{one:Nu(t),many:$u(t)}}var l={string:Er,array:wr,object:kr,optional:Ir,union:Sr,any:Ar,pipe:ki,url:xr,integer:vr,number:Tr,transform:br},Li=l.object({name:l.string(),id:l.string(),trip:l.optional(l.string()),minDate:l.pipe(l.string(),l.transform(Number)),maxDate:l.pipe(l.string(),l.transform(Number)),thumbnailUrl:l.string(),mosaic:l.string(),photosCount:l.pipe(l.string(),l.transform(Number)),videosCount:l.pipe(l.string(),l.transform(Number)),country:l.union([l.string(),l.array(l.string())]),description:l.optional(l.string()),dateRange:l.string(),shortDateRange:l.string()}),Oi=l.object({id:l.string(),flag:l.optional(l.string()),name:l.string(),contains:l.optional(l.union([l.string(),l.array(l.string())])),in:l.optional(l.union([l.string(),l.array(l.string())]))}),Ri=l.object({id:l.string(),name:l.optional(l.string()),longitude:l.optional(l.string()),latitude:l.optional(l.string())}),Mi=l.object({id:l.string(),name:l.string(),features:l.optional(l.union([l.string(),l.array(l.string())])),in:l.optional(l.union([l.string(),l.array(l.string())])),shortName:l.optional(l.string()),wikipedia:l.optional(l.string()),unescoId:l.optional(l.string())}),Ci=l.object({albumId:l.string(),country:l.optional(l.union([l.string(),l.array(l.string())])),createdAt:l.string(),subject:l.optional(l.union([l.string(),l.array(l.string())])),exposureTime:l.optional(l.string()),fStop:l.optional(l.string()),focalLength:l.optional(l.string()),fullImage:l.string(),height:l.optional(l.string()),id:l.string(),iso:l.optional(l.string()),location:l.optional(l.union([l.string(),l.array(l.string())])),midImageLossyUrl:l.string(),model:l.optional(l.string()),mosaicColours:l.string(),pngUrl:l.string(),rating:l.string(),style:l.optional(l.string()),thumbnailUrl:l.string(),width:l.optional(l.string()),description:l.optional(l.string()),summary:l.optional(l.string()),contrastingGrey:l.string()}),Ui=l.object({id:l.string(),name:l.string(),wikipedia:l.optional(l.string())}),ji=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Ni=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),$i=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Vi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Bl=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),qi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string()),birdwatchUrl:l.optional(l.union([l.string(),l.array(l.string())]))}),Bi=l.object({id:l.string(),albumId:l.string(),description:l.string(),posterUrl:l.pipe(l.string(),l.url()),videoUrl1080p:l.pipe(l.string(),l.url()),videoUrl480p:l.pipe(l.string(),l.url()),videoUrl720p:l.pipe(l.string(),l.url()),videoUrlUnscaled:l.pipe(l.string(),l.url())}),zi=l.object({photos:l.pipe(l.number(),l.integer()),videos:l.pipe(l.number(),l.integer()),albums:l.pipe(l.number(),l.integer()),years:l.pipe(l.number(),l.integer()),countries:l.pipe(l.number(),l.integer()),bird_species:l.pipe(l.number(),l.integer()),mammal_species:l.pipe(l.number(),l.integer()),amphibian_species:l.pipe(l.number(),l.integer()),reptile_species:l.pipe(l.number(),l.integer()),unesco_sites:l.pipe(l.number(),l.integer())}),Fi=l.object({id:l.string(),name:l.optional(l.string())});var Hi=he(Fi,"feature"),_r=he(Oi,"country"),Lr=he(Ri,"unesco"),Gi=he(Ci,"photo"),Vu=he(qi,"bird"),Or=he(Ui,"mammal"),Rr=he(ji,"reptile"),Mr=he($i,"amphibian"),Cr=he(Vi,"insect"),Ur=he(Ni,"fish"),Wi=he(Bi,"video"),jr=he(Mi,"place"),Xi=he(Li,"album"),Qi=Dr({[I.BIRD]:Vu,[I.MAMMAL]:Or,[I.REPTILE]:Rr,[I.AMPHIBIAN]:Mr,[I.INSECT]:Cr,[I.FISH]:Ur}),Ji=Dr({[I.PLACE]:jr,[I.COUNTRY]:_r,[I.UNESCO]:Lr});function Ki(t){return bt(zi,t).success?t:void 0}var{one:Yi,many:Zi}=ce(_r),{one:es,many:Zl}=ce(jr),{one:ts,many:Tt}=ce(Ji),{one:rs,many:ns}=ce(Lr),{one:kt,many:It}=ce(Xi),{one:is,many:ec}=ce(Or),{one:ss,many:tc}=ce(Rr),{one:os,many:rc}=ce(Cr),{one:nc,many:ic}=ce(Ur),{one:sc,many:us}=ce(Qi),{one:as,many:oc}=ce(Mr),{one:ls,many:Et}=ce(Wi),{one:Qe,many:Oe}=ce(Gi),{one:uc,many:cs}=ce(Hi);function Ae(t){let e=globalThis.innerWidth,r=globalThis.innerHeight,n=400,i=Math.floor(e/n),s=Math.floor(r/n);return t>i*s+1?"lazy":"eager"}var St=new Map;function Re(t){if(St.has(t))return St.get(t);let e=t.split("#").map(i=>`#${i}`),r=window.document.createElement("canvas");r.width=2,r.height=2;let n=r.getContext("2d");if(!n)throw new Error("context missing");return n.fillStyle=e[1],n.fillRect(0,0,1,1),n.fillStyle=e[2],n.fillRect(1,0,1,1),n.fillStyle=e[3],n.fillRect(0,1,1,1),n.fillStyle=e[4],n.fillRect(1,1,1,1),St.set(t,r.toDataURL("image/png")),St.get(t)}function ps(t){let e=t.search({source:{type:"photo"}}).sources();return Oe(t,e).sort((r,n)=>parseInt(n.createdAt)-parseInt(r.createdAt))}function fs(t,e){let r=new Set,n=new Set;for(let i of e){let s=x(i),o=t.search({source:{type:s.type,id:s.id},relation:[S.LOCATION,S.SUBJECT]}).firstObject(!0);if(!o)continue;let p=o?.location??[],f=o?.subject??[];for(let y of p)r.add(y);for(let y of f)n.add(y)}return{subjects:us(t,n),locations:Tt(t,r)}}function ms(t,e){let r=new Set;for(let n of e){let{type:i,id:s}=x(n),o=t.search({source:{type:"photo"},target:{type:i,id:s}}).sources();for(let p of o)r.add(p)}return Oe(t,r).sort((n,i)=>parseInt(i.createdAt)-parseInt(n.createdAt))}function qu(t,e){let{type:r,id:n}=x(e),i=t.search({source:{type:"photo"},relation:"cover",target:{type:r,id:n}}).firstSource();return i?Qe(t,i):void 0}function Bu(t,e){let r=t.rating;return e.rating.toLocaleString().localeCompare(r.toLocaleString())}function hs(t,e){let{type:r,id:n}=x(e),i=qu(t,e);if(i)return i;let s=t.search({source:{type:"photo"},target:{type:r,id:n}}).sources(),o=Oe(t,new Set(s)).sort(Bu);return o.length>0?o[0]:null}function Nr(t){return new Date(t.minDate).getFullYear()}function ys(t){let e=t.search({source:{type:I.ALBUM}}).sources();return It(t,e).sort((r,n)=>n.minDate-r.minDate)}function ds(t,e){return t.search({source:{type:I.PHOTO},relation:S.ALBUM_ID,target:{id:x(e).id}}).sources()}function gs(t,e){return Oe(t,ds(t,e))}function zu(t,e){return t.search({source:{type:I.VIDEO},relation:S.ALBUM_ID,target:{id:x(e).id}}).sources()}function vs(t,e){return Et(t,zu(t,e))}function bs(t,e){return fs(t,ds(t,e))}function xs(t,e){let{type:r,id:n}=x(e),i=t.search({source:{type:I.ALBUM},relation:S.TRIP,target:{type:r,id:n}}).sources();return It(t,i).sort((s,o)=>s.minDate-o.minDate)}function As(t,e){let r=new Set;for(let i of e){let{type:s,id:o}=x(i),p=t.search({target:{type:s,id:o}}).sources();for(let f of p)r.add(f)}let n=new Set;for(let i of r){let s=x(i),o=t.search({source:{type:s.type,id:s.id},relation:S.ALBUM_ID}).targets();for(let p of o)n.add(`urn:r\xF3:album:${p}`)}return It(t,n)}var ws=new Map;function Ts(t,e){let r=new Set;if(e.size===0)return r;for(let i of e)if(ws.has(i)){let s=ws.get(i);s&&r.add(s)}if(r.size===e.size)return r;let n=t.search({relation:S.NAME,target:Array.from(e)});for(let[i,s,o]of n.triples())e.has(o)&&r.add(i);return r}async function Fu(){let t={},e=await si(`/manifest/tribbles.${window.envConfig.publication_id}.txt`,t,vi);return bi(e),e.add(gi),e}function Hu(t){return{readThing:t.readThing,readAlbum:kt.bind(null,t),readCountry:Yi.bind(null,t),readPlace:es.bind(null,t),readPhoto:Qe.bind(null,t),readMammal:is.bind(null,t),readReptile:ss.bind(null,t),readAmphibian:as.bind(null,t),readInsect:os.bind(null,t),readVideo:ls.bind(null,t),readLocation:ts.bind(null,t),readUnesco:rs.bind(null,t),readLocations:Tt.bind(null,t),readFeatures:cs.bind(null,t),readPhotos:Oe.bind(null,t),readUnescos:ns.bind(null,t),readThings:Pi.bind(null,t),readCountries:Zi.bind(null,t),namesToUrns:Ts.bind(null,t),readThingCover:hs.bind(null,t),readPhotosByThingIds:ms.bind(null,t),readAlbumsByThingIds:As.bind(null,t),toThingLinks:_i.bind(null,t)}}async function ks(){let t=await Fu();return{currentAlbum:void 0,currentPhoto:void 0,currentUrn:void 0,currentType:void 0,data:t,darkMode:Qn(),sidebarVisible:!1,services:Hu(t)}}var we=L(_());function it(){return{view(t){return(0,we.default)("li",{class:"sidebar-item",onclick:te(t.attrs.route)},t.attrs.name)}}}function Te(){function t(e){let r=["photo-sidebar"];return e&&r.push("sidebar-visible"),r.join(" ")}return{view(e){return(0,we.default)("aside",{class:t(e.attrs.visible)},[(0,we.default)("nav",[(0,we.default)("ul",[(0,we.default)(it,{name:"PHOTOS",route:"/photos"}),(0,we.default)(it,{name:"VIDEOS",route:"/videos"}),(0,we.default)(it,{name:"ALBUMS",route:"/albums"}),(0,we.default)(it,{name:"LISTINGS",route:"/listings"}),(0,we.default)(it,{name:"ABOUT",route:"/about"})])])])}}}var de=L(_());var ve=L(_());function Is(){let t=Ki(window.stats);return{view(){return t?(0,ve.default)("p.photo-stats",[`${t.photos} `,(0,ve.default)("a",{href:"#/photos"},"photos")," \xB7 ",`${t.videos} `,(0,ve.default)("a",{href:"#/videos"},"videos")," \xB7 ",`${t.albums} albums \xB7 ${t.years} years \xB7 `,`${t.countries} `,(0,ve.default)("a",{href:"#/listing/country"},"countries")," \xB7 ",`${t.bird_species} `,(0,ve.default)("a",{href:"#/listing/bird"},"bird species")," \xB7 ",`${t.mammal_species} `,(0,ve.default)("a",{href:"#/listing/mammal"},"mammal species")," \xB7 a few ",(0,ve.default)("a",{href:"#/listing/amphibian"},"amphibians")," and ",(0,ve.default)("a",{href:"#/listing/reptile"},"reptiles")," \xB7 ",`${t.unesco_sites} `,(0,ve.default)("a",{href:"#/thing/unesco:*"},"UNESCO sites")]):(0,ve.default)("p")}}}var Ce=L(_());function Dt(t=500){return globalThis.matchMedia(`(max-width: ${t}px)`).matches}function Me(t){document.title=t}function _t(){return{view(t){let{title:e,minDate:r,maxDate:n,count:i,countryLinks:s,dateRange:o,shortDateRange:p}=t.attrs,f=i===1?"photo":"photos",d=Dt(500)?p:o;return(0,Ce.default)("div.photo-album-metadata",[(0,Ce.default)("p.photo-album-title",e),(0,Ce.default)("p.photo-album-date",[(0,Ce.default)("time",d)]),(0,Ce.default)("div.photo-metadata-inline",[(0,Ce.default)("p.photo-album-count",`${i} ${f}`),(0,Ce.default)("p.photo-album-countries",s)])])}}}var ut=L(_());var be=L(_());var ot=L(_());function Gu(){return{view(t){let{colour:e}=t.attrs;return(0,ot.default)("svg.photo-icon",{height:40,width:40,preserveAspectRatio:"xMinYMin",viewBox:"-2 -2 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,ot.default)("path",{d:"m10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10 10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-10a1 1 0 0 1 1 1v5a1 1 0 0 1 -2 0v-5a1 1 0 0 1 1-1zm0-1a1 1 0 1 1 0-2 1 1 0 0 1 0 2z",fill:e})])}}}function Es(){return{view(t){let{id:e,colour:r}=t.attrs;return(0,ot.default)("div.photo-metadata-popover",{onclick:()=>me("navigate",{route:`/photo/${e}`})},(0,ot.default)(Gu,{colour:r}))}}}function Wu(t,e){me("photo_loaded",{url:t});let r=e.target?.parentNode?.querySelector(".thumbnail-placeholder");r&&(r.style.zIndex="-1")}function Xu(){return{view(t){let{thumbnailUrl:e,loading:r,onclick:n}=t.attrs;return(0,be.default)("img.thumbnail-image",{onload:Wu.bind(null,e),width:400,height:400,src:e,loading:r,onclick:n})}}}function Qu(){return{view(t){let{thumbnailDataUrl:e}=t.attrs;return(0,be.default)("img.u-photo.thumbnail-image.thumbnail-placeholder",{width:400,height:400,src:e})}}}function $r(){return{view(t){let{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,onclick:s}=t.attrs;return(0,be.default)("a",{href:e,target:"_blank",rel:"external"},[(0,be.default)(Qu,{thumbnailDataUrl:n}),(0,be.default)(Xu,{thumbnailUrl:r,loading:i,onclick:s})])}}}function Ju(t){return t.startsWith("urn:")?rt(t).id:t}function Ue(){return{view(t){let{photo:e,loading:r,interactive:n}=t.attrs,i=Ju(e.id),{fullImage:s,thumbnailUrl:o,mosaicColours:p}=e,f=Re(p),y=(0,be.default)(Es,{id:i,colour:e.contrastingGrey}),d=(0,be.default)($r,{imageUrl:e.fullImage,thumbnailUrl:o,thumbnailDataUrl:f,loading:r,onclick:()=>{window.location.href=s}});return(0,be.default)("div",(0,be.default)("div.photo",{},[(0,be.default)("a",{onclick:Se},n?[y,d]:[d])]))}}}var Vr=[];function Ku(){return{view(t){let{trip:e}=t.attrs;if(!e)return null;Vr.includes(e)||Vr.push(e);let r=Vr.indexOf(e);return(0,ut.default)("div.trip-tag .trip-color-"+r%2)}}}function Je(){return{view(t){let{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,child:s,minDate:o,onclick:p,trip:f}=t.attrs;return(0,ut.default)("div.photo-album",{"data-min-date":o},[(0,ut.default)(Ku,{trip:f}),(0,ut.default)($r,{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,onclick:p}),s])}}}var Lt=L(_());function qr(t){let{type:e,id:r}=x(t);return`#/thing/${e}:${r}`}function Ke(){return{view(t){let{country:e,mode:r}=t.attrs,{id:n,name:i}=e;if(!n)return(0,Lt.default)("p");let s=qe(e),o=x(n),p=te(`/thing/${o.type}:${o.id}`);return r==="flag"?(0,Lt.default)("a.country-link-short",{href:qr(n),onclick:p},s):(0,Lt.default)("a.country-link",{href:qr(n),onclick:p},`${s} ${i}`)}}}function je(t){return t===void 0?new Set:new Set(Array.isArray(t)?t:[t])}function Ot(t,e){let r=new Set;for(let n of e)if(t in n){let i=n[t];if(i===void 0)continue;if(Array.isArray(i))for(let s of i)r.add(s);else r.add(i)}return r}function Yu(t,e,r){let n=x(t);me("navigate",{route:`/album/${n.id}`,title:e}),Se(r)}function Zu(t,e,r,n){let i=Ae(r),s=[];if(t.year!==Nr(e)&&(t.year=Nr(e),t.year!==new Date().getFullYear())){let y=(0,de.default)("h2.album-year-heading",{key:`year-${t.year}`},t.year.toString());s.push(y)}let o=n.readCountries(je(e.country)).map(y=>(0,de.default)(Ke,{country:y,key:`album-country-${e.id}-${y.id}`,mode:"flag"})),p=(0,de.default)(_t,{title:e.name,minDate:e.minDate,maxDate:e.maxDate,count:e.photosCount,countryLinks:o,services:n,dateRange:e.dateRange,shortDateRange:e.shortDateRange}),f=(0,de.default)(Je,{trip:e.trip,imageUrl:e.thumbnailUrl,thumbnailUrl:e.thumbnailUrl,thumbnailDataUrl:Re(e.mosaic),loading:i,minDate:e.minDate,onclick:Yu.bind(null,e.id,e.name)});return s.push((0,de.default)("div",{key:`album-${e.id}`},[f,p])),s}function ea(){return{view(t){let e={year:2005},{albums:r,services:n}=t.attrs,i=[];for(let s=0;s<r.length;s++)i.push(...Zu(e,r[s],s,n));return(0,de.default)("section.album-container",i)}}}function Ps(){return{oninit(){Me("Albums - photos")},view(t){let{albums:e,services:r,visible:n}=t.attrs,i=(0,de.default)("section.album-metadata",[(0,de.default)("h1.albums-header","Albums"),(0,de.default)(Is)]);return(0,de.default)("div",{class:n?"page sidebar-visible":"page"},[i,(0,de.default)(ea,{albums:e,services:r,visible:n})])}}}var pe=L(_());function Ds(){return{oninit(){Me("About - photos")},view(t){let{visible:e}=t.attrs,r=new Date().getFullYear()-2012;return(0,pe.default)("div",{class:e?"page sidebar-visible":"page"},[(0,pe.default)("section.about-page",[(0,pe.default)("h1","About"),(0,pe.default)("br"),(0,pe.default)("p",`I started taking photos ${r} years ago, and have taken a lot of photos since. I've become, in my opinion, a reasonable wildlife photographer (though hit-or-miss at other styles of photography). I built this website to share the things`,(0,pe.default)("a",{href:"https://photos.rgrannell.xyz/#/thing/rating:4",onclick:te("/thing/rating:4")}," I found beautiful in this world.")),(0,pe.default)("h2","Can I use the photos on this site?"),(0,pe.default)("p","You may use this website and its content for personal, non-commerical purposes only. For example, using photos as a desktop wallpaper is fine, selling these photos is not."),(0,pe.default)("h2","Can I use data from this site to train AI?"),(0,pe.default)("p","No, absolutely not. The ",(0,pe.default)("a",{href:"http://photos.rgrannell.xyz/robots.txt"},"robots.txt")," file for this site explicitly prohibits this."),(0,pe.default)("h2","What is your contact information?"),(0,pe.default)("p","See ",(0,pe.default)("a",{href:"https://rgrannell.xyz/"},"my personal site")," for contact details.")])])}}}var Be=L(_());var ke=L(_());function Rt(){return{view(t){let{preload:e,video:r}=t.attrs;if(!r)return(0,ke.default)("div","No video");let{posterUrl:n,videoUrl1080p:i,videoUrl480p:s,videoUrl720p:o,videoUrlUnscaled:p}=r,f=(0,ke.default)("source",{src:s,type:"video/mp4"}),y=(0,ke.default)("ul",[(0,ke.default)("a",{href:p},"[L]"),(0,ke.default)("a",{href:i},"[M]"),(0,ke.default)("a",{href:o},"[S]"),(0,ke.default)("a",{href:s},"[XS]")]);return(0,ke.default)("div",{key:`video-${r.id}`},[(0,ke.default)("video.thumbnail-video",{controls:!0,preload:e,poster:n},f),y])}}}function _s(){return{view(t){let{videos:e,visible:r}=t.attrs,n=e.length===1?"1 video":`${e.length} videos`,i=e.map(s=>(0,Be.default)(Rt,{video:s,preload:"auto"}));return(0,Be.default)("div",{class:r?"page sidebar-visible":"page"},(0,Be.default)("section.photos-metadata",[(0,Be.default)("h1","Videos"),(0,Be.default)("p.photo-album-count",n)]),(0,Be.default)("section.photo-container",i))}}}function Ls(t){let e=t.search({source:{type:"video"}}).sources();return Et(t,e)}var re=L(_());function Os(t){let e=new Date(parseInt(t)),r={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return e.toLocaleDateString("en-US",r)}var Mt=L(_()),ra=.15,na=80;function Rs(){let t=null,e=()=>{};return{oncreate(r){let i=r.dom.querySelector(".album-banner-image");if(!i)return;let s=()=>{let o=Math.min(window.scrollY*ra,na);i.style.transform=`translateY(${o}px)`};e=()=>{t===null&&(t=requestAnimationFrame(()=>{s(),t=null}))},window.addEventListener("scroll",e,{passive:!0}),s()},onremove(){window.removeEventListener("scroll",e),t!==null&&cancelAnimationFrame(t)},view(r){let{src:n,alt:i}=r.attrs;return(0,Mt.default)("section.album-banner",{"aria-label":i},(0,Mt.default)("div.album-banner-inner",[(0,Mt.default)("img.album-banner-image",{src:n,alt:i,loading:"eager"})]))}}}var Ms=L(_());function ia(t){t.includes("Shared canceled")||alert(t)}async function sa(t,e,r){if(!navigator.share){ia("navigator.share not available");return}try{await navigator.share({title:`${r} - photos.rgrannell.xyz`,url:e})}catch(n){console.error("Error sharing:",n)}finally{t.sharing=!1}}function oa(t){return t.sharing?"[sharing...]":"[share]"}function Cs(){let t={sharing:!1};return{view(e){let{url:r,name:n}=e.attrs;return(0,Ms.default)("button.photo-share-button",{disabled:!navigator.share,onclick:sa.bind(null,t,r,n)},oa(t))}}}var Us=L(_());function js(){return{view(){return(0,Us.default)("a",{href:"/albums",onclick:te("/albums")},"[albums]")}}}var Ct=L(_());function Ns(){return{view(t){let{albums:e}=t.attrs;if(e.length===0)return null;let r=["...after travelling from "];return e.forEach((n,i)=>{i>0&&r.push(", ");let s=x(n.id).id;r.push((0,Ct.default)(Ct.default.route.Link,{href:`/album/${s}`},n.name))}),(0,Ct.default)("p.photo-album-trip-previous",r)}}}function $s(){return{oninit(){Me("Album - photos")},view(t){let{album:e,photos:r,videos:n,services:i,visible:s,tripPreviousAlbums:o}=t.attrs,{name:p,minDate:f,maxDate:y,photosCount:d,description:v,country:V,dateRange:T,shortDateRange:H}=e,fe=Dt(500)?H:T,W=d===1?"1 photo":`${d} photos`,ie=i.readCountries(i.namesToUrns(je(V))).map(ee=>(0,re.default)(Ke,{country:ee,mode:"flag"})),{id:C}=x(e.id),E=`https://sharephoto.rgrannell.xyz/album/${C}`,k=ee=>{let Q=(ee.style??"").toLowerCase(),Ie=Q.includes(":")?Q.split(":").pop()??Q:Q;return Ie==="landscape"?0:Ie==="cityscape"?1:Ie==="wildlife"?2:3},R=(ee,Q)=>{let Ie=(Q.rating??"").toLocaleString().localeCompare((ee.rating??"").toLocaleString());return Ie!==0?Ie:k(ee)-k(Q)},P=r.length>0?[...r].sort(R)[0]:null,j=P?P[S.MID_IMAGE_LOSSY_URL]??P[S.THUMBNAIL_URL]:null,O=j?(0,re.default)(Rs,{src:j,alt:p}):null,z=(0,re.default)("section.photos-metadata",[(0,re.default)("h1",p),(0,re.default)("p.photo-album-date",(0,re.default)("time",fe)),(0,re.default)("p.photo-album-count",W),(0,re.default)("p.photo-album-countries",ie),(0,re.default)(Ns,{albums:o}),(0,re.default)("p.photo-album-description",re.default.trust(vt(v??"")??"")),(0,re.default)(Cs,{url:E,name:p})," ",(0,re.default)(js)," "]),K=r.map((ee,Q)=>(0,re.default)(Ue,{photo:ee,loading:Ae(Q),interactive:!0})),Z=n.map(ee=>(0,re.default)(Rt,{video:ee,preload:"auto"}));return(0,re.default)("div",{class:s?"page sidebar-visible":"page"},O,z,(0,re.default)("section.photo-container",K),(0,re.default)("section.video-container",Z))}}}var Ne=L(_());function ua(){return{view(t){let{photos:e}=t.attrs;return(0,Ne.default)("section.photo-container",e.map((r,n)=>{let i=Ae(n);return(0,Ne.default)(Ue,{key:`photo-${r.id}`,photo:r,loading:i,interactive:!0})}))}}}function Vs(){return{view(t){let{photos:e,visible:r}=t.attrs,n=`${e.length} photo${e.length===1?"":"s"}`,i=(0,Ne.default)("section.photos-metadata",[(0,Ne.default)("h1","Photos"),(0,Ne.default)("p.photo-album-count",n)]);return(0,Ne.default)("div",{class:r?"page sidebar-visible":"page"},[i,(0,Ne.default)(ua,{photos:e,visible:r})])}}}var ye=L(_());var qs=L(_());function Bs(){return{view(t){let{id:e}=t.attrs;return(0,qs.default)("a",{href:`#/album/${e}`,onclick:te(`/album/${e}`)},"[album]")}}}var D=L(_());function ze(){return{view(t){let{text:e}=t.attrs;return(0,D.default)("th.exif-heading",e)}}}function aa(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.model]);return n.length>0?(0,D.default)("td",n):(0,D.default)("td","Unknown")}}}function la(){return{view(t){let{photo:e}=t.attrs;return typeof e.width=="string"&&typeof e.height=="string"?(0,D.default)("td",`${e.width} x ${e.height}`):(0,D.default)("td","Unknown")}}}function ca(){return{view(t){let{photo:e}=t.attrs;return e.focalLength==="Unknown"?(0,D.default)("td","Unknown"):e.focalLength==="0"?(0,D.default)("td","Manual lens"):e.focalLength?(0,D.default)("td",`${e.focalLength}mm`):(0,D.default)("td","Unknown")}}}function pa(){return{view(t){let{photo:e}=t.attrs,{exposureTime:r}=e;if(typeof r=="string"){let n=parseFloat(r);return isNaN(n)?(0,D.default)("td","Unknown"):n>=1?(0,D.default)("td",`${n} s`):(0,D.default)("td",`1/${Math.round(1/n)} s`)}return(0,D.default)("td","Unknown")}}}function fa(){return{view(t){let{photo:e}=t.attrs;return e.fStop==="Unknown"?(0,D.default)("td","Unknown"):e.fStop==="0.0"?(0,D.default)("td","Manual aperture control"):e.fStop?(0,D.default)("td",`\u0192/${e.fStop}`):(0,D.default)("td","Unknown")}}}function zs(){return{view(t){let{photo:e,services:r}=t.attrs,n=(0,D.default)("tr",[(0,D.default)(ze,{text:"Date-Time"}),(0,D.default)("td",(0,D.default)("time",Os(e.createdAt)))]),i=(0,D.default)("tr",[(0,D.default)(ze,{text:"Camera Model"}),(0,D.default)(aa,{photo:e,services:r})]),s=(0,D.default)("tr",[(0,D.default)(ze,{text:"Dimensions"}),(0,D.default)(la,{photo:e,services:r})]),o=(0,D.default)("tr",[(0,D.default)(ze,{text:"Focal Length"}),(0,D.default)(ca,{photo:e,services:r})]),p=(0,D.default)("tr",[(0,D.default)(ze,{text:"Shutter Speed"}),(0,D.default)(pa,{photo:e,services:r})]),f=(0,D.default)("tr",[(0,D.default)(ze,{text:"Aperture"}),(0,D.default)(fa,{photo:e,services:r})]),y=(0,D.default)("tr",[(0,D.default)(ze,{text:"ISO"}),(0,D.default)("td",e.iso??"Unknown")]);return(0,D.default)("table.metadata-table",[n,i,s,o,p,f,y])}}}var B=L(_());function Ye(){return{view(t){let{text:e}=t.attrs;return(0,B.default)("th.exif-heading",e)}}}function ma(){return{view(t){let{photo:e}=t.attrs,r=vt(e.description??e.summary??"");return r?(0,B.default)("td",B.default.trust(r)):(0,B.default)("td","\u2014")}}}function ha(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.location));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function ya(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.rating]);return(0,B.default)("td",n.length>0?n:"\u2014")}}}function da(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.style]);return(0,B.default)("td",n.length>0?n:"\u2014")}}}function ga(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.subject));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function va(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.country));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Fs(){return{view(t){let{photo:e,services:r}=t.attrs,n=[];return(e.description||e.summary)&&n.push((0,B.default)("tr",[(0,B.default)(Ye,{text:"Description"}),(0,B.default)(ma,{photo:e,services:r})])),n.push((0,B.default)("tr",[(0,B.default)(Ye,{text:"Country"}),(0,B.default)(va,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ye,{text:"Location"}),(0,B.default)(ha,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ye,{text:"Rating"}),(0,B.default)(ya,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ye,{text:"Style"}),(0,B.default)(da,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ye,{text:"Subject"}),(0,B.default)(ga,{photo:e,services:r})])),(0,B.default)("table.metadata-table",n)}}}function Hs(){return{view(t){let{photo:e,services:r,visible:n}=t.attrs,i=(0,ye.default)("li.link-list",[(0,ye.default)("a",{href:e.fullImage,rel:"noreferrer"},"[webp]")," ",(0,ye.default)("a",{href:e.pngUrl,rel:"noreferrer"},"[png]")," ",(0,ye.default)(Bs,{id:e.albumId})]),s=(0,ye.default)(zs,{photo:e,services:r}),o=(0,ye.default)(Fs,{photo:e,services:r});return(0,ye.default)("section",[(0,ye.default)("h1","Photo"),(0,ye.default)(Ue,{photo:e,loading:"eager",interactive:!1}),i,(0,ye.default)("div",{class:n?"page sidebar-visible":"page"},(0,ye.default)("h3","Photo Information"),o,(0,ye.default)("h3","Exif Data"),s)])}}}var ge=L(_());var jt=L(_());var Fe=L(_());var Gs=L(_());function Br(){return{view(t){let{href:e,text:r}=t.attrs;return(0,Gs.default)("a",{href:e,target:"_blank",rel:"noopener"},r)}}}function Ut(){return{view(t){let{things:e}=t.attrs;if(e.length!==1)return(0,Fe.default)("ul");let[r]=e,n=[],i=M(r.wikipedia);i&&n.push((0,Fe.default)("li",(0,Fe.default)(Br,{href:i,text:"[wikipedia]"})));let s=M(r.birdwatchUrl);return s&&n.push((0,Fe.default)("li",(0,Fe.default)(Br,{href:s,text:"[birdwatch]"}))),(0,Fe.default)("ul.link-list",n)}}}function Ws(){let t=new Set([I.AMPHIBIAN,I.REPTILE,I.INSECT,I.FISH,I.MAMMAL]);return{view(e){let{thing:r}=e.attrs,{type:n}=x(M(r.id)),i=(0,jt.default)(Ut,{things:[r]}),s=n===I.COUNTRY?`${qe(r)} ${M(r.name)}`:M(r.name);return(0,jt.default)("div.photo-album-metadata",[(0,jt.default)("p.photo-album-title",s),i])}}}function ba(t,e,r){let n=M(e.id);if(!n)return[];let i=t.readThingCover(n);if(!i)return[];let s=(0,ge.default)(Ws,{thing:e}),{id:o,type:p}=x(n);return[(0,ge.default)(Je,{imageUrl:i.fullImage,thumbnailUrl:i.thumbnailUrl,thumbnailDataUrl:Re(i?.mosaicColours),loading:Ae(r),trip:void 0,child:s,onclick:te(`/thing/${p}:${o}`)})]}function xa(){return{view(t){let{services:e,things:r}=t.attrs,n=r.flatMap((i,s)=>(console.log("Drawing album for thing:",i),ba(e,i,s)));return(0,ge.default)("section.album-container",n)}}}function Aa(){return{view(t){let{type:e}=t.attrs;return(0,ge.default)("h1.albums-header",`${Ve(gt(e))}`)}}}function wa(){return{view(t){let{type:e}=t.attrs;return(0,ge.default)("a",{href:`#/thing/${e}:*`,onclick:te(`/thing/${e}:*`)},`See all ${e} photos`)}}}function Xs(){return{view(t){let{type:e,things:r,services:n,visible:i}=t.attrs,s=[(0,ge.default)(Aa,{type:e})];return oi.has(e)||s.push((0,ge.default)("section.album-metadata",[(0,ge.default)(wa,{type:e})])),(0,ge.default)("div",{class:i?"page sidebar-visible":"page"},[(0,ge.default)("section.album-metadata",s),(0,ge.default)(xa,{services:n,things:r})])}}}var oe=L(_());function He(){return{view(t){return(0,oe.default)("li",(0,oe.default)("a",{class:"listing-item",onclick:te(t.attrs.route)},t.attrs.name))}}}function Qs(){return{view(t){let{visible:e}=t.attrs;return(0,oe.default)("div",{class:e?"page sidebar-visible":"page"},[(0,oe.default)("h1","Listings"),(0,oe.default)("br"),(0,oe.default)("p","Collections of all places, countries, and animals"),(0,oe.default)("br"),(0,oe.default)("section",(0,oe.default)("ul",[(0,oe.default)(He,{route:"/listing/place",name:"Places"}),(0,oe.default)(He,{route:"/listing/country",name:"Countries"}),(0,oe.default)(He,{route:"/listing/bird",name:"Birds"}),(0,oe.default)(He,{route:"/listing/mammal",name:"Mammals"}),(0,oe.default)(He,{route:"/listing/reptile",name:"Reptiles"}),(0,oe.default)(He,{route:"/listing/amphibian",name:"Amphibians"}),(0,oe.default)(He,{route:"/listing/insect",name:"Insects"})]))])}}}var N=L(_());var Nt=L(_());function Ta(t,e){let r=rt(t);if(r.id==="*")return Ve(gt(r.type));if(e.length===0)return t;let[n]=e,i=M(n.name)??r.id;return r.type===I.COUNTRY?`${qe(n)} ${i}`:r.type===I.PLACE?`${xt(n)} ${i}`:i}function Js(){return{view(t){let{urn:e,things:r}=t.attrs,n=Ta(e,r);return Me(n),(0,Nt.default)("h1",n)}}}function Ks(){return{view(t){let e=x(t.attrs.urn);return fi.has(e.type)&&e.id!=="*"?(0,Nt.default)("span",{class:`thing-binomial ${e.type}-binomial`},mi(e.id)):(0,Nt.default)("span")}}}var $t=L(_());function zr(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readLocations(e).sort((s,o)=>(M(s.name)??"").localeCompare(M(o.name)??"")).map(s=>{let o=(0,$t.default)(wt,{urn:M(s.id),thing:s});return(0,$t.default)("li",{key:`place-${s.id}`},o)});return(0,$t.default)("ul",i)}}}var Ys=L(_());function ka(t,e){me("navigate",{route:`/listing/${t}`}),Se(e)}function Zs(){return{view(t){let e="";return"type"in t.attrs?e=t.attrs.type:e=x(t.attrs.urn).type,(0,Ys.default)("a",{href:`#/listing/${e}`,onclick:ka.bind(null,e)},Ve(e))}}}var Vt=L(_());var eo=L(_());function to(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=x(e),s=M(r.name)??i,p=`${At(e,s,r)}	${s}`;return(0,eo.default)("p",{class:["thing-link",`${n}-link`].join(" ")},p)}}}function ro(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readFeatures(e).map(s=>{let o=M(s.id);return(0,Vt.default)("li",{key:`feature-${o}`},(0,Vt.default)(to,{urn:o,thing:s}))});return(0,Vt.default)("ul",i)}}}var qt=L(_());var no=L(_());function io(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=x(e),s=M(r.name)??i;return(0,no.default)("a",{href:`https://whc.unesco.org/en/list/${i}`,target:"_blank",rel:"noopener noreferrer",class:["thing-link",`${n}-link`].join(" ")},s)}}}function so(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readUnescos(e).map(s=>{let o=M(s.id);return(0,qt.default)("li",(0,qt.default)(io,{urn:o,thing:s}))});return(0,qt.default)("ul",i)}}}function Ia(){return{view(t){let e={},{urn:r,things:n,services:i}=t.attrs;e.Classification=(0,N.default)(Zs,{urn:r});let s=Ot(S.IN,n);if(s.size>0&&(e["Located In"]=(0,N.default)(zr,{services:i,urns:s})),n.length!==1)return;let[o]=n;o.features&&(e["Place Type"]=(0,N.default)(ro,{urns:je(o.features),services:i})),o.contains&&(e.Contains=(0,N.default)(zr,{services:i,urns:je(o.contains)})),o.unescoId&&(e.UNESCO=(0,N.default)(so,{urns:new Set(We(o.unescoId)),services:i}));let p=Object.entries(e).map(([f,y])=>(0,N.default)("tr",[(0,N.default)("th.exif-heading",f),(0,N.default)("td",y)]));return(0,N.default)("div",[(0,N.default)("h3","Details"),(0,N.default)("table.metadata-table",p)])}}}function Ea(t,e,r){let n=x(t);me("navigate",{route:`/album/${n.id}`,title:e}),Se(r)}function Sa(){return{view(t){let{things:e,services:r}=t.attrs,n=Ot("id",e),s=r.readAlbumsByThingIds(new Set(n)).map(o=>{let f=r.readCountries(je(o.country)).map(v=>(0,N.default)(Ke,{country:v,key:`album-country-${o.id}-${v.id}`,mode:"flag"})),y=(0,N.default)(_t,{title:o.name,minDate:o.minDate,maxDate:o.maxDate,count:o.photosCount,countryLinks:f,dateRange:o.dateRange,shortDateRange:o.shortDateRange}),d=(0,N.default)(Je,{imageUrl:o.thumbnailUrl,thumbnailUrl:o.thumbnailUrl,thumbnailDataUrl:Re(o.mosaic),loading:"lazy",minDate:o.minDate,onclick:Ea.bind(null,o.id,o.name),trip:void 0,child:(0,N.default)("p")});return(0,N.default)("div",d,y)});return(0,N.default)("section.album-container",s)}}}function Pa(){return{view(t){let{things:e,services:r}=t.attrs,n=Ot("id",e),i=r.readPhotosByThingIds(n);return(0,N.default)("section.photo-container",i.map((s,o)=>{let p=Ae(o);return(0,N.default)(Ue,{key:`photo-${s.id}`,photo:s,loading:p,interactive:!0})}))}}}function oo(){return{view(t){let{urn:e,things:r,services:n,visible:i}=t.attrs;return(0,N.default)("div",{class:i?"page sidebar-visible":"page"},[(0,N.default)("section.thing-page",[(0,N.default)(Js,{urn:e,things:r}),(0,N.default)(Ks,{urn:e}),(0,N.default)("br"),(0,N.default)(Ut,{things:r}),(0,N.default)(Ia,{urn:e,things:r,services:n,visible:i}),(0,N.default)("h3","Photos"),(0,N.default)(Pa,{urn:e,things:r,services:n,visible:i}),(0,N.default)("h3","Albums"),(0,N.default)(Sa,{urn:e,things:r,services:n,visible:i})])])}}}var g=await ks();yt("navigate",t=>{let{route:e}=t.detail;console.info(`navigating to route: ${e}`),g.sidebarVisible=!1,A.default.route.set(e)});yt("switch_theme",()=>{g.darkMode=!g.darkMode});yt("click_burger_menu",()=>{g.sidebarVisible=!g.sidebarVisible});function uo(){return{oninit(){},view(){return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Ps,{albums:ys(g.data),services:g.services,visible:g.sidebarVisible})])])}}}function ao(){return{view(){let t=A.default.route.param("id");if(t&&(g.currentAlbum=`urn:r\xF3:album:${t}`),!g.currentAlbum)return(0,A.default)("p","No album selected");let e=kt(g.data,g.currentAlbum),r=gs(g.data,g.currentAlbum),n=vs(g.data,g.currentAlbum);if(!e)return(0,A.default)("p","Album not found");let{subjects:i,locations:s}=bs(g.data,g.currentAlbum),o=e.trip?xs(g.data,e.trip).filter(p=>p.minDate<e.minDate).sort((p,f)=>f.minDate-p.minDate):[];return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)($s,{album:e,subjects:i,country:e.country||[],locations:s,photos:r,videos:n,services:g.services,visible:g.sidebarVisible,tripPreviousAlbums:o})])])}}}function lo(){return{view(){return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Ds,{visible:g.sidebarVisible})])])}}}function co(){return{view(){return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(_s,{videos:Ls(g.data),visible:g.sidebarVisible})])])}}}function po(){return{view(){return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Vs,{photos:ps(g.data),visible:g.sidebarVisible})])])}}}function fo(){let t=[];return{view(){let e=A.default.route.param("pair");if(g.currentUrn=`urn:r\xF3:${e}`,x(g.currentUrn).id==="*")t=Pr(g.data,e.split(":")[0]);else{let n=Xe(g.data,g.currentUrn);n&&(t=[n])}return g.currentUrn?(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(oo,{urn:g.currentUrn,things:t,services:g.services,visible:g.sidebarVisible})])]):(0,A.default)("p","No thing selected")}}}function mo(){return{oninit(){let t=A.default.route.param("id");g.currentPhoto=`urn:r\xF3:photo:${t}`},view(){if(!g.currentPhoto)return(0,A.default)("p","No photo selected");let t=Qe(g.data,g.currentPhoto);return t?(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Hs,{photo:t,services:g.services,visible:g.sidebarVisible})])]):(0,A.default)("p","Photo not found")}}}function ho(){return{oninit(){let t=A.default.route.param("type");g.currentType=t},view(){if(!g.currentType)return(0,A.default)("p","No type selected");let t=Pr(g.data,g.currentType);return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Xs,{type:g.currentType,things:t,services:g.services,visible:g.sidebarVisible})])])}}}function yo(){return{view(){return(0,A.default)("div.photos-app",{class:g.darkMode?"dark-mode":void 0},[(0,A.default)(xe,g),(0,A.default)("div.app-container",{class:g.sidebarVisible?"sidebar-visible":void 0},[(0,A.default)(Te,{visible:g.sidebarVisible}),(0,A.default)(Qs,{visible:g.sidebarVisible})])])}}}go.default.route(document.body,"/albums",{"/albums":uo,"/about":lo,"/videos":co,"/photos":po,"/album/:id":ao,"/thing/:pair":fo,"/photo/:id":mo,"/listing/:type":ho,"/listings":yo});
//# sourceMappingURL=app.15a9feec6d.js.map
