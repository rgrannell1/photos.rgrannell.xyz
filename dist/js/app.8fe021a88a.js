var So=Object.create;var en=Object.defineProperty;var Do=Object.getOwnPropertyDescriptor;var Po=Object.getOwnPropertyNames;var _o=Object.getPrototypeOf,Lo=Object.prototype.hasOwnProperty;var F=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Oo=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Po(e))!Lo.call(t,i)&&i!==r&&en(t,i,{get:()=>e[i],enumerable:!(n=Do(e,i))||n.enumerable});return t};var O=(t,e,r)=>(r=t!=null?So(_o(t)):{},Oo(e||!t||!t.__esModule?en(r,"default",{value:t,enumerable:!0}):r,t));var Ie=F((qa,tn)=>{"use strict";function je(t,e,r,n,i,s){return{tag:t,key:e,attrs:r,children:n,text:i,dom:s,is:void 0,domSize:void 0,state:void 0,events:void 0,instance:void 0}}je.normalize=function(t){return Array.isArray(t)?je("[",void 0,void 0,je.normalizeChildren(t),void 0,void 0):t==null||typeof t=="boolean"?null:typeof t=="object"?t:je("#",void 0,void 0,String(t),void 0,void 0)};je.normalizeChildren=function(t){for(var e=new Array(t.length),r=0,n=0;n<t.length;n++)e[n]=je.normalize(t[n]),e[n]!==null&&e[n].key!=null&&r++;if(r!==0&&r!==t.length)throw new TypeError(e.includes(null)?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");return e};tn.exports=je});var Yt=F((Ba,rn)=>{"use strict";var Co=Ie();rn.exports=function(t,e){return t==null||typeof t=="object"&&t.tag==null&&!Array.isArray(t)?e.length===1&&Array.isArray(e[0])&&(e=e[0]):(e=e.length===0&&Array.isArray(t)?t:[t,...e],t=void 0),Co("",t&&t.key,t,e)}});var pt=F((za,nn)=>{"use strict";nn.exports={}.hasOwnProperty});var Kt=F((Fa,sn)=>{"use strict";sn.exports={}});var Zt=F((Ha,on)=>{"use strict";var Mo=Kt();on.exports=new Map([[Mo,!0]])});var tr=F((Ga,ln)=>{"use strict";var jo=Ie(),Ro=Yt(),er=pt(),un=Kt(),Uo=Zt(),$o=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,an=Object.create(null);function No(t){for(var e in t)if(er.call(t,e))return!1;return!0}function Vo(t){return t==="value"||t==="checked"||t==="selectedIndex"||t==="selected"}function qo(t){for(var e,r="div",n=[],i={},s=!0;e=$o.exec(t);){var a=e[1],p=e[2];if(a===""&&p!=="")r=p;else if(a==="#")i.id=p;else if(a===".")n.push(p);else if(e[3][0]==="["){var f=e[6];f&&(f=f.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),e[4]==="class"?n.push(f):(i[e[4]]=f===""?f:f||!0,Vo(e[4])&&(s=!1))}}return n.length>0&&(i.className=n.join(" ")),No(i)?i=un:Uo.set(i,s),an[t]={tag:r,attrs:i,is:i.is}}function Bo(t,e){e.tag=t.tag;var r=e.attrs;if(r==null)return e.attrs=t.attrs,e.is=t.is,e;if(er.call(r,"class")&&(r.class!=null&&(r.className=r.class),r.class=null),t.attrs!==un){var n=r.className;r=Object.assign({},t.attrs,r),t.attrs.className!=null&&(r.className=n!=null?String(t.attrs.className)+" "+String(n):t.attrs.className)}return t.tag==="input"&&er.call(r,"type")&&(r=Object.assign({type:r.type},r)),e.is=r.is,e.attrs=r,e}function zo(t,e,...r){if(t==null||typeof t!="string"&&typeof t!="function"&&typeof t.view!="function")throw Error("The selector must be either a string or a component.");var n=Ro(e,r);return typeof t=="string"&&(n.children=jo.normalizeChildren(n.children),t!=="[")?Bo(an[t]||qo(t),n):(n.attrs==null&&(n.attrs={}),n.tag=t,n)}ln.exports=zo});var pn=F((Wa,cn)=>{"use strict";var Fo=Ie();cn.exports=function(t){return t==null&&(t=""),Fo("<",void 0,void 0,t,void 0,void 0)}});var mn=F((Xa,fn)=>{"use strict";var Ho=Ie(),Go=Yt();fn.exports=function(t,...e){var r=Go(t,e);return r.attrs==null&&(r.attrs={}),r.tag="[",r.children=Ho.normalizeChildren(r.children),r}});var yn=F((Ja,hn)=>{"use strict";var rr=tr();rr.trust=pn();rr.fragment=mn();hn.exports=rr});var nr=F((Qa,dn)=>{"use strict";dn.exports=new WeakMap});var ir=F((Ya,vn)=>{"use strict";var gn=nr();function*Wo(t){var e=t.dom,r=t.domSize,n=gn.get(e);if(e!=null)do{var i=e.nextSibling;gn.get(e)===n&&(yield e,r--),e=i}while(r)}vn.exports=Wo});var An=F((Ka,xn)=>{"use strict";var sr=Ie(),Xo=nr(),or=ir(),bn=Zt();xn.exports=function(){var t={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},e,r;function n(u){return u.ownerDocument}function i(u){return u.attrs&&u.attrs.xmlns||t[u.tag]}function s(u,o){if(u.state!==o)throw new Error("'vnode.state' must not be modified.")}function a(u){var o=u.state;try{return this.apply(o,arguments)}finally{s(u,o)}}function p(u){try{return n(u).activeElement}catch{return null}}function f(u,o,c,m,h,g,U){for(var V=c;V<m;V++){var T=o[V];T!=null&&y(u,T,h,U,g)}}function y(u,o,c,m,h){var g=o.tag;if(typeof g=="string")switch(o.state={},o.attrs!=null&&zt(o.attrs,o,c),g){case"#":v(u,o,h);break;case"<":k(u,o,m,h);break;case"[":A(u,o,c,m,h);break;default:$(u,o,c,m,h)}else ee(u,o,c,m,h)}function v(u,o,c){o.dom=n(u).createTextNode(o.children),ge(u,o.dom,c)}var b={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function k(u,o,c,m){var h=o.children.match(/^\s*?<(\w+)/im)||[],g=n(u).createElement(b[h[1]]||"div");c==="http://www.w3.org/2000/svg"?(g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+o.children+"</svg>",g=g.firstChild):g.innerHTML=o.children,o.dom=g.firstChild,o.domSize=g.childNodes.length;for(var U=n(u).createDocumentFragment(),V;V=g.firstChild;)U.appendChild(V);ge(u,U,m)}function A(u,o,c,m,h){var g=n(u).createDocumentFragment();if(o.children!=null){var U=o.children;f(g,U,0,U.length,c,null,m)}o.dom=g.firstChild,o.domSize=g.childNodes.length,ge(u,g,h)}function $(u,o,c,m,h){var g=o.tag,U=o.attrs,V=o.is;m=i(o)||m;var T=m?V?n(u).createElementNS(m,g,{is:V}):n(u).createElementNS(m,g):V?n(u).createElement(g,{is:V}):n(u).createElement(g);if(o.dom=T,U!=null&&xo(o,U,m),ge(u,T,h),!Hr(o)&&o.children!=null){var q=o.children;f(T,q,0,q.length,c,null,m),o.tag==="select"&&U!=null&&wo(o,U)}}function ne(u,o){var c;if(typeof u.tag.view=="function"){if(u.state=Object.create(u.tag),c=u.state.view,c.$$reentrantLock$$!=null)return;c.$$reentrantLock$$=!0}else{if(u.state=void 0,c=u.tag,c.$$reentrantLock$$!=null)return;c.$$reentrantLock$$=!0,u.state=u.tag.prototype!=null&&typeof u.tag.prototype.view=="function"?new u.tag(u):u.tag(u)}if(zt(u.state,u,o),u.attrs!=null&&zt(u.attrs,u,o),u.instance=sr.normalize(a.call(u.state.view,u)),u.instance===u)throw Error("A view cannot return the vnode it received as argument");c.$$reentrantLock$$=null}function ee(u,o,c,m,h){ne(o,c),o.instance!=null?(y(u,o.instance,c,m,h),o.dom=o.instance.dom,o.domSize=o.instance.domSize):o.domSize=0}function G(u,o,c,m,h,g){if(!(o===c||o==null&&c==null))if(o==null||o.length===0)f(u,c,0,c.length,m,h,g);else if(c==null||c.length===0)Ze(u,o,0,o.length);else{var U=o[0]!=null&&o[0].key!=null,V=c[0]!=null&&c[0].key!=null,T=0,q=0;if(!U)for(;q<o.length&&o[q]==null;)q++;if(!V)for(;T<c.length&&c[T]==null;)T++;if(U!==V)Ze(u,o,q,o.length),f(u,c,T,c.length,m,h,g);else if(V){for(var oe=o.length-1,Z=c.length-1,ct,ue,J,ie,W,Gt;oe>=q&&Z>=T&&(ie=o[oe],W=c[Z],ie.key===W.key);)ie!==W&&j(u,ie,W,m,h,g),W.dom!=null&&(h=W.dom),oe--,Z--;for(;oe>=q&&Z>=T&&(ue=o[q],J=c[T],ue.key===J.key);)q++,T++,ue!==J&&j(u,ue,J,m,se(o,q,h),g);for(;oe>=q&&Z>=T&&!(T===Z||ue.key!==W.key||ie.key!==J.key);)Gt=se(o,q,h),K(u,ie,Gt),ie!==J&&j(u,ie,J,m,Gt,g),++T<=--Z&&K(u,ue,h),ue!==W&&j(u,ue,W,m,h,g),W.dom!=null&&(h=W.dom),q++,oe--,ie=o[oe],W=c[Z],ue=o[q],J=c[T];for(;oe>=q&&Z>=T&&ie.key===W.key;)ie!==W&&j(u,ie,W,m,h,g),W.dom!=null&&(h=W.dom),oe--,Z--,ie=o[oe],W=c[Z];if(T>Z)Ze(u,o,q,oe+1);else if(q>oe)f(u,c,T,Z+1,m,h,g);else{var Eo=h,Zr=Z-T+1,tt=new Array(Zr),Wt=0,X=0,Xt=2147483647,Jt=0,ct,Qt;for(X=0;X<Zr;X++)tt[X]=-1;for(X=Z;X>=T;X--){ct==null&&(ct=C(o,q,oe+1)),W=c[X];var Fe=ct[W.key];Fe!=null&&(Xt=Fe<Xt?Fe:-1,tt[X-T]=Fe,ie=o[Fe],o[Fe]=null,ie!==W&&j(u,ie,W,m,h,g),W.dom!=null&&(h=W.dom),Jt++)}if(h=Eo,Jt!==oe-q+1&&Ze(u,o,q,oe+1),Jt===0)f(u,c,T,Z+1,m,h,g);else if(Xt===-1)for(Qt=le(tt),Wt=Qt.length-1,X=Z;X>=T;X--)J=c[X],tt[X-T]===-1?y(u,J,m,g,h):Qt[Wt]===X-T?Wt--:K(u,J,h),J.dom!=null&&(h=c[X].dom);else for(X=Z;X>=T;X--)J=c[X],tt[X-T]===-1&&y(u,J,m,g,h),J.dom!=null&&(h=c[X].dom)}}else{var Ht=o.length<c.length?o.length:c.length;for(T=T<q?T:q;T<Ht;T++)ue=o[T],J=c[T],!(ue===J||ue==null&&J==null)&&(ue==null?y(u,J,m,g,se(o,T+1,h)):J==null?lt(u,ue):j(u,ue,J,m,se(o,T+1,h),g));o.length>Ht&&Ze(u,o,T,o.length),c.length>Ht&&f(u,c,T,c.length,m,h,g)}}}function j(u,o,c,m,h,g){var U=o.tag,V=c.tag;if(U===V&&o.is===c.is){if(c.state=o.state,c.events=o.events,Io(c,o))return;if(typeof U=="string")switch(c.attrs!=null&&Ft(c.attrs,c,m),U){case"#":I(o,c);break;case"<":E(u,o,c,g,h);break;case"[":R(u,o,c,m,h,g);break;default:_(o,c,m,g)}else z(u,o,c,m,h,g)}else lt(u,o),y(u,c,m,g,h)}function I(u,o){u.children.toString()!==o.children.toString()&&(u.dom.nodeValue=o.children),o.dom=u.dom}function E(u,o,c,m,h){o.children!==c.children?(Xr(u,o),k(u,c,m,h)):(c.dom=o.dom,c.domSize=o.domSize)}function R(u,o,c,m,h,g){G(u,o.children,c.children,m,h,g);var U=0,V=c.children;if(c.dom=null,V!=null)for(var T=0;T<V.length;T++){var q=V[T];q!=null&&q.dom!=null&&(c.dom==null&&(c.dom=q.dom),U+=q.domSize||1)}c.domSize=U}function _(u,o,c,m){var h=o.dom=u.dom;m=i(o)||m,(u.attrs!=o.attrs||o.attrs!=null&&!bn.get(o.attrs))&&To(o,u.attrs,o.attrs,m),Hr(o)||G(h,u.children,o.children,c,null,m)}function z(u,o,c,m,h,g){if(c.instance=sr.normalize(a.call(c.state.view,c)),c.instance===c)throw Error("A view cannot return the vnode it received as argument");Ft(c.state,c,m),c.attrs!=null&&Ft(c.attrs,c,m),c.instance!=null?(o.instance==null?y(u,c.instance,m,g,h):j(u,o.instance,c.instance,m,h,g),c.dom=c.instance.dom,c.domSize=c.instance.domSize):(o.instance!=null&&lt(u,o.instance),c.domSize=0)}function C(u,o,c){for(var m=Object.create(null);o<c;o++){var h=u[o];if(h!=null){var g=h.key;g!=null&&(m[g]=o)}}return m}var H=[];function le(u){for(var o=[0],c=0,m=0,h=0,g=H.length=u.length,h=0;h<g;h++)H[h]=u[h];for(var h=0;h<g;++h)if(u[h]!==-1){var U=o[o.length-1];if(u[U]<u[h]){H[h]=U,o.push(h);continue}for(c=0,m=o.length-1;c<m;){var V=(c>>>1)+(m>>>1)+(c&m&1);u[o[V]]<u[h]?c=V+1:m=V}u[h]<u[o[c]]&&(c>0&&(H[h]=o[c-1]),o[c]=h)}for(c=o.length,m=o[c-1];c-- >0;)o[c]=m,m=H[m];return H.length=0,o}function se(u,o,c){for(;o<u.length;o++)if(u[o]!=null&&u[o].dom!=null)return u[o].dom;return c}function K(u,o,c){if(o.dom!=null){var m;if(o.domSize==null||o.domSize===1)m=o.dom;else{m=n(u).createDocumentFragment();for(var h of or(o))m.appendChild(h)}ge(u,m,c)}}function ge(u,o,c){c!=null?u.insertBefore(o,c):u.appendChild(o)}function Hr(u){if(u.attrs==null||u.attrs.contenteditable==null&&u.attrs.contentEditable==null)return!1;var o=u.children;if(o!=null&&o.length===1&&o[0].tag==="<"){var c=o[0].children;u.dom.innerHTML!==c&&(u.dom.innerHTML=c)}else if(o!=null&&o.length!==0)throw new Error("Child node of a contenteditable must be trusted.");return!0}function Ze(u,o,c,m){for(var h=c;h<m;h++){var g=o[h];g!=null&&lt(u,g)}}function Gr(u,o,c,m){var h=o.state,g=a.call(c.onbeforeremove,o);if(g!=null){var U=r;for(var V of or(o))Xo.set(V,U);m.v++,Promise.resolve(g).finally(function(){s(o,h),Wr(u,o,m)})}}function Wr(u,o,c){--c.v===0&&(Vt(o),Xr(u,o))}function lt(u,o){var c={v:1};typeof o.tag!="string"&&typeof o.state.onbeforeremove=="function"&&Gr(u,o,o.state,c),o.attrs&&typeof o.attrs.onbeforeremove=="function"&&Gr(u,o,o.attrs,c),Wr(u,o,c)}function Xr(u,o){if(o.dom!=null)if(o.domSize==null||o.domSize===1)u.removeChild(o.dom);else for(var c of or(o))u.removeChild(c)}function Vt(u){if(typeof u.tag!="string"&&typeof u.state.onremove=="function"&&a.call(u.state.onremove,u),u.attrs&&typeof u.attrs.onremove=="function"&&a.call(u.attrs.onremove,u),typeof u.tag!="string")u.instance!=null&&Vt(u.instance);else{u.events!=null&&(u.events._=null);var o=u.children;if(Array.isArray(o))for(var c=0;c<o.length;c++){var m=o[c];m!=null&&Vt(m)}}}function xo(u,o,c){for(var m in o)qt(u,m,null,o[m],c)}function qt(u,o,c,m,h){if(!(o==="key"||m==null||Jr(o)||c===m&&!ko(u,o)&&typeof m!="object")){if(o[0]==="o"&&o[1]==="n")return Kr(u,o,m);if(o.slice(0,6)==="xlink:")u.dom.setAttributeNS("http://www.w3.org/1999/xlink",o.slice(6),m);else if(o==="style")Yr(u.dom,c,m);else if(Qr(u,o,h)){if(o==="value"){if((u.tag==="input"||u.tag==="textarea")&&u.dom.value===""+m||u.tag==="select"&&c!==null&&u.dom.value===""+m||u.tag==="option"&&c!==null&&u.dom.value===""+m)return;if(u.tag==="input"&&u.attrs.type==="file"&&""+m!=""){console.error("`value` is read-only on file inputs!");return}}u.tag==="input"&&o==="type"?u.dom.setAttribute(o,m):u.dom[o]=m}else typeof m=="boolean"?m?u.dom.setAttribute(o,""):u.dom.removeAttribute(o):u.dom.setAttribute(o==="className"?"class":o,m)}}function Ao(u,o,c,m){if(!(o==="key"||c==null||Jr(o)))if(o[0]==="o"&&o[1]==="n")Kr(u,o,void 0);else if(o==="style")Yr(u.dom,c,null);else if(Qr(u,o,m)&&o!=="className"&&o!=="title"&&!(o==="value"&&(u.tag==="option"||u.tag==="select"&&u.dom.selectedIndex===-1&&u.dom===p(u.dom)))&&!(u.tag==="input"&&o==="type"))u.dom[o]=null;else{var h=o.indexOf(":");h!==-1&&(o=o.slice(h+1)),c!==!1&&u.dom.removeAttribute(o==="className"?"class":o)}}function wo(u,o){if("value"in o)if(o.value===null)u.dom.selectedIndex!==-1&&(u.dom.value=null);else{var c=""+o.value;(u.dom.value!==c||u.dom.selectedIndex===-1)&&(u.dom.value=c)}"selectedIndex"in o&&qt(u,"selectedIndex",null,o.selectedIndex,void 0)}function To(u,o,c,m){var h;if(o!=null){o===c&&!bn.has(c)&&console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major");for(var g in o)(h=o[g])!=null&&(c==null||c[g]==null)&&Ao(u,g,h,m)}if(c!=null)for(var g in c)qt(u,g,o&&o[g],c[g],m)}function ko(u,o){return o==="value"||o==="checked"||o==="selectedIndex"||o==="selected"&&(u.dom===p(u.dom)||u.tag==="option"&&u.dom.parentNode===p(u.dom))}function Jr(u){return u==="oninit"||u==="oncreate"||u==="onupdate"||u==="onremove"||u==="onbeforeremove"||u==="onbeforeupdate"}function Qr(u,o,c){return c===void 0&&(u.tag.indexOf("-")>-1||u.is||o!=="href"&&o!=="list"&&o!=="form"&&o!=="width"&&o!=="height")&&o in u.dom}function Yr(u,o,c){if(o!==c)if(c==null)u.style="";else if(typeof c!="object")u.style=c;else if(o==null||typeof o!="object"){u.style="";for(var m in c){var h=c[m];h!=null&&(m.includes("-")?u.style.setProperty(m,String(h)):u.style[m]=String(h))}}else{for(var m in o)o[m]!=null&&c[m]==null&&(m.includes("-")?u.style.removeProperty(m):u.style[m]="");for(var m in c){var h=c[m];h!=null&&(h=String(h))!==String(o[m])&&(m.includes("-")?u.style.setProperty(m,h):u.style[m]=h)}}}function Bt(){this._=e}Bt.prototype=Object.create(null),Bt.prototype.handleEvent=function(u){var o=this["on"+u.type],c;typeof o=="function"?c=o.call(u.currentTarget,u):typeof o.handleEvent=="function"&&o.handleEvent(u);var m=this;m._!=null&&(u.redraw!==!1&&(0,m._)(),c!=null&&typeof c.then=="function"&&Promise.resolve(c).then(function(){m._!=null&&u.redraw!==!1&&(0,m._)()})),c===!1&&(u.preventDefault(),u.stopPropagation())};function Kr(u,o,c){if(u.events!=null){if(u.events._=e,u.events[o]===c)return;c!=null&&(typeof c=="function"||typeof c=="object")?(u.events[o]==null&&u.dom.addEventListener(o.slice(2),u.events,!1),u.events[o]=c):(u.events[o]!=null&&u.dom.removeEventListener(o.slice(2),u.events,!1),u.events[o]=void 0)}else c!=null&&(typeof c=="function"||typeof c=="object")&&(u.events=new Bt,u.dom.addEventListener(o.slice(2),u.events,!1),u.events[o]=c)}function zt(u,o,c){typeof u.oninit=="function"&&a.call(u.oninit,o),typeof u.oncreate=="function"&&c.push(a.bind(u.oncreate,o))}function Ft(u,o,c){typeof u.onupdate=="function"&&c.push(a.bind(u.onupdate,o))}function Io(u,o){do{if(u.attrs!=null&&typeof u.attrs.onbeforeupdate=="function"){var c=a.call(u.attrs.onbeforeupdate,u,o);if(c!==void 0&&!c)break}if(typeof u.tag!="string"&&typeof u.state.onbeforeupdate=="function"){var c=a.call(u.state.onbeforeupdate,u,o);if(c!==void 0&&!c)break}return!1}while(!1);return u.dom=o.dom,u.domSize=o.domSize,u.instance=o.instance,u.attrs=o.attrs,u.children=o.children,u.text=o.text,!0}var et;return function(u,o,c){if(!u)throw new TypeError("DOM element being rendered to does not exist.");if(et!=null&&u.contains(et))throw new TypeError("Node is currently being rendered to and thus is locked.");var m=e,h=et,g=[],U=p(u),V=u.namespaceURI;et=u,e=typeof c=="function"?c:void 0,r={};try{u.vnodes==null&&(u.textContent=""),o=sr.normalizeChildren(Array.isArray(o)?o:[o]),G(u,u.vnodes,o,g,null,V==="http://www.w3.org/1999/xhtml"?void 0:V),u.vnodes=o,U!=null&&p(u)!==U&&typeof U.focus=="function"&&U.focus();for(var T=0;T<g.length;T++)g[T]()}finally{e=m,et=h}}}});var ur=F((Za,wn)=>{"use strict";wn.exports=An()()});var In=F((el,kn)=>{"use strict";var Tn=Ie();kn.exports=function(t,e,r){var n=[],i=!1,s=-1;function a(){for(s=0;s<n.length;s+=2)try{t(n[s],Tn(n[s+1]),p)}catch(y){r.error(y)}s=-1}function p(){i||(i=!0,e(function(){i=!1,a()}))}p.sync=a;function f(y,v){if(v!=null&&v.view==null&&typeof v!="function")throw new TypeError("m.mount expects a component, not a vnode.");var b=n.indexOf(y);b>=0&&(n.splice(b,2),b<=s&&(s-=2),t(y,[])),v!=null&&(n.push(y,v),t(y,Tn(v),p))}return{mount:f,redraw:p}}});var ft=F((tl,En)=>{"use strict";var Jo=ur();En.exports=In()(Jo,typeof requestAnimationFrame<"u"?requestAnimationFrame:null,typeof console<"u"?console:null)});var ar=F((rl,Sn)=>{"use strict";Sn.exports=function(t){if(Object.prototype.toString.call(t)!=="[object Object]")return"";var e=[];for(var r in t)n(r,t[r]);return e.join("&");function n(i,s){if(Array.isArray(s))for(var a=0;a<s.length;a++)n(i+"["+a+"]",s[a]);else if(Object.prototype.toString.call(s)==="[object Object]")for(var a in s)n(i+"["+a+"]",s[a]);else e.push(encodeURIComponent(i)+(s!=null&&s!==""?"="+encodeURIComponent(s):""))}}});var mt=F((nl,Dn)=>{"use strict";var Qo=ar();Dn.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(e==null)return t;var r=t.indexOf("?"),n=t.indexOf("#"),i=n<0?t.length:n,s=r<0?i:r,a=t.slice(0,s),p={};Object.assign(p,e);var f=a.replace(/:([^\/\.-]+)(\.{3})?/g,function(ne,ee,G){return delete p[ee],e[ee]==null?ne:G?e[ee]:encodeURIComponent(String(e[ee]))}),y=f.indexOf("?"),v=f.indexOf("#"),b=v<0?f.length:v,k=y<0?b:y,A=f.slice(0,k);r>=0&&(A+=t.slice(r,i)),y>=0&&(A+=(r<0?"?":"&")+f.slice(y,b));var $=Qo(p);return $&&(A+=(r<0&&y<0?"?":"&")+$),n>=0&&(A+=t.slice(n)),v>=0&&(A+=(n<0?"":"&")+f.slice(v)),A}});var Ln=F((il,_n)=>{"use strict";var Yo=mt(),Pn=pt();_n.exports=function(t,e){function r(s){return new Promise(s)}function n(s,a){return new Promise(function(p,f){s=Yo(s,a.params);var y=a.method!=null?a.method.toUpperCase():"GET",v=a.body,b=(a.serialize==null||a.serialize===JSON.serialize)&&!(v instanceof t.FormData||v instanceof t.URLSearchParams),k=a.responseType||(typeof a.extract=="function"?"":"json"),A=new t.XMLHttpRequest,$=!1,ne=!1,ee=A,G,j=A.abort;A.abort=function(){$=!0,j.call(this)},A.open(y,s,a.async!==!1,typeof a.user=="string"?a.user:void 0,typeof a.password=="string"?a.password:void 0),b&&v!=null&&!i(a,"content-type")&&A.setRequestHeader("Content-Type","application/json; charset=utf-8"),typeof a.deserialize!="function"&&!i(a,"accept")&&A.setRequestHeader("Accept","application/json, text/*"),a.withCredentials&&(A.withCredentials=a.withCredentials),a.timeout&&(A.timeout=a.timeout),A.responseType=k;for(var I in a.headers)Pn.call(a.headers,I)&&A.setRequestHeader(I,a.headers[I]);A.onreadystatechange=function(E){if(!$&&E.target.readyState===4)try{var R=E.target.status>=200&&E.target.status<300||E.target.status===304||/^file:\/\//i.test(s),_=E.target.response,z;if(k==="json"){if(!E.target.responseType&&typeof a.extract!="function")try{_=JSON.parse(E.target.responseText)}catch{_=null}}else(!k||k==="text")&&_==null&&(_=E.target.responseText);if(typeof a.extract=="function"?(_=a.extract(E.target,a),R=!0):typeof a.deserialize=="function"&&(_=a.deserialize(_)),R){if(typeof a.type=="function")if(Array.isArray(_))for(var C=0;C<_.length;C++)_[C]=new a.type(_[C]);else _=new a.type(_);p(_)}else{var H=function(){try{z=E.target.responseText}catch{z=_}var le=new Error(z);le.code=E.target.status,le.response=_,f(le)};A.status===0?setTimeout(function(){ne||H()}):H()}}catch(le){f(le)}},A.ontimeout=function(E){ne=!0;var R=new Error("Request timed out");R.code=E.target.status,f(R)},typeof a.config=="function"&&(A=a.config(A,a,s)||A,A!==ee&&(G=A.abort,A.abort=function(){$=!0,G.call(this)})),v==null?A.send():typeof a.serialize=="function"?A.send(a.serialize(v)):v instanceof t.FormData||v instanceof t.URLSearchParams?A.send(v):A.send(JSON.stringify(v))})}r.prototype=Promise.prototype,r.__proto__=Promise;function i(s,a){for(var p in s.headers)if(Pn.call(s.headers,p)&&p.toLowerCase()===a)return!0;return!1}return{request:function(s,a){typeof s!="string"?(a=s,s=s.url):a==null&&(a={});var p=n(s,a);if(a.background===!0)return p;var f=0;function y(){--f===0&&typeof e=="function"&&e()}return v(p);function v(b){var k=b.then;return b.constructor=r,b.then=function(){f++;var A=k.apply(b,arguments);return A.then(y,function($){if(y(),f===0)throw $}),v(A)},b}}}}});var Cn=F((sl,On)=>{"use strict";var Ko=ft();On.exports=Ln()(typeof window<"u"?window:null,Ko.redraw)});var lr=F((ol,Mn)=>{"use strict";var Zo=/%(?:[0-7]|(?!c[01]|e0%[89]|ed%[ab]|f0%8|f4%[9ab])(?:c|d|(?:e|f[0-4]%[89ab])[\da-f]%[89ab])[\da-f]%[89ab])[\da-f]/gi;Mn.exports=function(t){return String(t).replace(Zo,decodeURIComponent)}});var cr=F((ul,Rn)=>{"use strict";var jn=lr();Rn.exports=function(t){if(t===""||t==null)return{};t.charAt(0)==="?"&&(t=t.slice(1));for(var e=t.split("&"),r={},n={},i=0;i<e.length;i++){var s=e[i].split("="),a=jn(s[0]),p=s.length===2?jn(s[1]):"";p==="true"?p=!0:p==="false"&&(p=!1);var f=a.split(/\]\[?|\[/),y=n;a.indexOf("[")>-1&&f.pop();for(var v=0;v<f.length;v++){var b=f[v],k=f[v+1],A=k==""||!isNaN(parseInt(k,10));if(b===""){var a=f.slice(0,v).join();r[a]==null&&(r[a]=Array.isArray(y)?y.length:0),b=r[a]++}else if(b==="__proto__")break;if(v===f.length-1)y[b]=p;else{var $=Object.getOwnPropertyDescriptor(y,b);$!=null&&($=$.value),$==null&&(y[b]=$=A?[]:{}),y=$}}}return n}});var ht=F((al,Un)=>{"use strict";var eu=cr();Un.exports=function(t){var e=t.indexOf("?"),r=t.indexOf("#"),n=r<0?t.length:r,i=e<0?n:e,s=t.slice(0,i).replace(/\/{2,}/g,"/");return s?s[0]!=="/"&&(s="/"+s):s="/",{path:s,params:e<0?{}:eu(t.slice(e+1,n))}}});var Nn=F((ll,$n)=>{"use strict";var tu=ht();$n.exports=function(t){var e=tu(t),r=Object.keys(e.params),n=[],i=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(s,a,p){return a==null?"\\"+s:(n.push({k:a,r:p==="..."}),p==="..."?"(.*)":p==="."?"([^/]+)\\.":"([^/]+)"+(p||""))})+"\\/?$");return function(s){for(var a=0;a<r.length;a++)if(e.params[r[a]]!==s.params[r[a]])return!1;if(!n.length)return i.test(s.path);var p=i.exec(s.path);if(p==null)return!1;for(var a=0;a<n.length;a++)s.params[n[a].k]=n[a].r?p[a+1]:decodeURIComponent(p[a+1]);return!0}}});var pr=F((cl,Bn)=>{"use strict";var Vn=pt(),qn=/^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$/;Bn.exports=function(t,e){var r={};if(e!=null)for(var n in t)Vn.call(t,n)&&!qn.test(n)&&e.indexOf(n)<0&&(r[n]=t[n]);else for(var n in t)Vn.call(t,n)&&!qn.test(n)&&(r[n]=t[n]);return r}});var Gn=F((pl,Hn)=>{"use strict";var ru=Ie(),nu=tr(),iu=lr(),zn=mt(),Fn=ht(),su=Nn(),ou=pr();Hn.exports=function(t,e){var r=Promise.resolve(),n=!1,i=!1,s=!1,a,p,f,y,v,b,k,A,$={onremove:function(){i=s=!1,t.removeEventListener("popstate",G,!1)},view:function(){var I=ru(v,b.key,b);return y?y.render(I):[I]}},ne=j.SKIP={};function ee(){n=!1;var I=t.location.hash;j.prefix[0]!=="#"&&(I=t.location.search+I,j.prefix[0]!=="?"&&(I=t.location.pathname+I,I[0]!=="/"&&(I="/"+I)));var E=iu(I).slice(j.prefix.length),R=Fn(E);Object.assign(R.params,t.history.state);function _(C){console.error(C),j.set(f,null,{replace:!0})}z(0);function z(C){for(;C<p.length;C++)if(p[C].check(R)){var H=p[C].component,le=p[C].route,se=H,K=A=function(ge){if(K===A){if(ge===ne)return z(C+1);v=ge!=null&&(typeof ge.view=="function"||typeof ge=="function")?ge:"div",b=R.params,k=E,A=null,y=H.render?H:null,s?e.redraw():(s=!0,e.mount(a,$))}};H.view||typeof H=="function"?(H={},K(se)):H.onmatch?r.then(function(){return H.onmatch(R.params,E,le)}).then(K,E===f?null:_):K();return}if(E===f)throw new Error("Could not resolve default route "+f+".");j.set(f,null,{replace:!0})}}function G(){n||(n=!0,setTimeout(ee))}function j(I,E,R){if(!I)throw new TypeError("DOM element being rendered to does not exist.");if(p=Object.keys(R).map(function(z){if(z[0]!=="/")throw new SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(z))throw new SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:z,component:R[z],check:su(z)}}),f=E,E!=null){var _=Fn(E);if(!p.some(function(z){return z.check(_)}))throw new ReferenceError("Default route doesn't match any known routes.")}a=I,t.addEventListener("popstate",G,!1),i=!0,ee()}return j.set=function(I,E,R){if(A!=null&&(R=R||{},R.replace=!0),A=null,I=zn(I,E),i){G();var _=R?R.state:null,z=R?R.title:null;R&&R.replace?t.history.replaceState(_,z,j.prefix+I):t.history.pushState(_,z,j.prefix+I)}else t.location.href=j.prefix+I},j.get=function(){return k},j.prefix="#!",j.Link={view:function(I){var E=nu(I.attrs.selector||"a",ou(I.attrs,["options","params","selector","onclick"]),I.children),R,_,z;return(E.attrs.disabled=!!E.attrs.disabled)?(E.attrs.href=null,E.attrs["aria-disabled"]="true"):(R=I.attrs.options,_=I.attrs.onclick,z=zn(E.attrs.href,I.attrs.params),E.attrs.href=j.prefix+z,E.attrs.onclick=function(C){var H;typeof _=="function"?H=_.call(C.currentTarget,C):_==null||typeof _!="object"||typeof _.handleEvent=="function"&&_.handleEvent(C),H!==!1&&!C.defaultPrevented&&(C.button===0||C.which===0||C.which===1)&&(!C.currentTarget.target||C.currentTarget.target==="_self")&&!C.ctrlKey&&!C.metaKey&&!C.shiftKey&&!C.altKey&&(C.preventDefault(),C.redraw=!1,j.set(z,null,R))}),E}},j.param=function(I){return b&&I!=null?b[I]:b},j}});var Xn=F((fl,Wn)=>{"use strict";var uu=ft();Wn.exports=Gn()(typeof window<"u"?window:null,uu)});var L=F((ml,Qn)=>{"use strict";var yt=yn(),Jn=ft(),au=Cn(),lu=Xn(),te=function(){return yt.apply(this,arguments)};te.m=yt;te.trust=yt.trust;te.fragment=yt.fragment;te.Fragment="[";te.mount=Jn.mount;te.route=lu;te.render=ur();te.redraw=Jn.redraw;te.request=au.request;te.parseQueryString=cr();te.buildQueryString=ar();te.parsePathname=ht();te.buildPathname=mt();te.vnode=Ie();te.censor=pr();te.domFor=ir();Qn.exports=te});var bo=O(L());var x=O(L());var Q=O(L());function ce(t,e){console.info(`broadcasting event: ${t}`,e),window.document.dispatchEvent(new CustomEvent(t,{detail:e}))}function dt(t,e){window.document.addEventListener(t,e)}function Ee(t){t?.preventDefault()}function Y(t){return e=>{ce("navigate",{route:t}),Ee(e)}}function cu(){let t=e=>{ce("click_burger_menu",{})};return{view(){return(0,Q.default)("a",{onclick:t},(0,Q.default)("span.burger","\u039E"))}}}function pu(){let t="photos";return{view(){return(0,Q.default)("a",{href:"#/",onclick:Y("/")},(0,Q.default)("span.brand",t))}}}function fu(){let t=(0,Q.default)("path",{fill:"#ff9132",d:"M 4.259,23.467c-2.35,0-4.259,1.917-4.259,4.252c0,2.349, 1.909,4.244, 4.259,4.244 c 2.358,0, 4.265-1.895, 4.265-4.244C 8.525,25.383, 6.618,23.467, 4.259,23.467zM 0.005,10.873l0,6.133 c 3.993,0, 7.749,1.562, 10.577,4.391c 2.825,2.822, 4.384,6.595, 4.384,10.603l 6.16,0 C 21.125,20.349, 11.648,10.873, 0.005,10.873zM 0.012,0l0,6.136 c 14.243,0, 25.836,11.604, 25.836,25.864L 32,32 C 32,14.36, 17.648,0, 0.012,0z"});return{view(){return(0,Q.default)("a.rss",{title:"rss",href:"/manifest/atom/atom-index.xml"},[(0,Q.default)("svg",{alt:"rss",width:"25px",height:"25px",viewBox:"0 0 32 32",style:"position: relative; top: 5px;"},[t])])}}}function mu(){return{view(t){let e=t.attrs.darkMode?"\u2600\uFE0F":"\u{1F319}";return(0,Q.default)("a",{},(0,Q.default)("span.brand.switch",{onclick:()=>{ce("switch_theme",{})}},e))}}}function xe(){return{view(t){return(0,Q.default)("nav.header",{role:"navigation"},[(0,Q.default)("ul",{style:"display: ruby"},[(0,Q.default)("li.header-item",{},(0,Q.default)(cu())),(0,Q.default)("li.header-item",{},(0,Q.default)(pu())),(0,Q.default)("li.rss-tag header-item",{style:"float: right"},(0,Q.default)(fu())),(0,Q.default)("li.header-item",{style:"float: right"},(0,Q.default)(mu(),{darkMode:t.attrs.darkMode}))])])}}}function Yn(){return localStorage.getItem("darkMode")==="true"}var ti=class ri{#t;#e;#r;constructor(){this.#t=0,this.#e=new Map,this.#r=new Map}map(){return this.#e}reverseMap(){return this.#r}add(e){return this.#e.has(e)?this.#e.get(e):(this.#e.set(e,this.#t),this.#r.set(this.#t,e),this.#t++,this.#t-1)}setIndex(e,r){this.#e.set(e,r),this.#r.set(r,e)}getIndex(e){return this.#e.get(e)}getValue(e){return this.#r.get(e)}has(e){return this.#e.has(e)}clone(){let e=new ri;for(let[r,n]of this.#e.entries())e.setIndex(r,n);return e}},Ge=class{static intersection(t,e){if(e.length===0)return new Set;e.sort((n,i)=>n.size-i.size);let r=new Set(e[0]);for(let n=1;n<e.length;n++){let i=e[n];for(let s of r)t.setCheck(),i.has(s)||r.delete(s);if(r.size===0)break}return r}static append(t,e){for(let r of e)t.add(r);return t}static difference(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}},ni=class{stringIndex;constructor(){this.stringIndex=new ti}parseTriple(t){let e=t.match(/^(\d+) (\d+) (\d+)$/);if(!e)throw new SyntaxError(`Invalid format for triple line: ${t}`);let r=this.stringIndex.getValue(parseInt(e[1],10)),n=this.stringIndex.getValue(parseInt(e[2],10)),i=this.stringIndex.getValue(parseInt(e[3],10));if(r===void 0||n===void 0||i===void 0)throw new SyntaxError(`Invalid triple reference: ${t}`);return[r,n,i]}parseDeclaration(t){let e=t.match(/^(\d+) "(.*)"$/);if(!e)throw new SyntaxError(`Invalid format for declaration line: ${t}`);let r=e[1],n=e[2];this.stringIndex.setIndex(n,parseInt(r,10))}parse(t){if(/^(\d+)\s(\d+)\s(\d+)$/.test(t))return this.parseTriple(t);this.parseDeclaration(t)}};function rt(t){let e=t.split(":",4),r=e[2],n=e[3]??"",i=n.indexOf("?"),s=i!==-1?n.slice(i+1):"",a=i!==-1?n.slice(0,i):n,p=s?Object.fromEntries(new URLSearchParams(s)):{};return{type:r,id:a,qs:p}}function w(t,e="r\xF3"){return typeof t!="string"||!t.startsWith(`urn:${e}:`)?{type:"unknown",id:t,qs:{}}:rt(t)}var yu=class ii{mapReadCount;constructor(){this.mapReadCount=0}mapRead(){this.mapReadCount++}clone(){let e=new ii;return e.mapReadCount=this.mapReadCount,e}},du=class si{setCheckCount;constructor(){this.setCheckCount=0}setCheck(){this.setCheckCount++}clone(){let e=new si;return e.setCheckCount=this.setCheckCount,e}},gu=class oi{indexedTriples;tripleMetadata;stringIndex;tripleHashes;hashIndices;sourceType;sourceId;sourceQs;relations;targetType;targetId;targetQs;metrics;stringUrn;constructor(e){this.indexedTriples=[],this.tripleMetadata=new Map,this.stringIndex=new ti,this.tripleHashes=new Set,this.hashIndices=new Map,this.sourceType=new Map,this.sourceId=new Map,this.sourceQs=new Map,this.relations=new Map,this.targetType=new Map,this.targetId=new Map,this.targetQs=new Map,this.stringUrn=new Map,this.add(e),this.metrics=new yu}delete(e){for(let r=0;r<e.length;r++){let n=e[r],i=this.hashTriple(n),s=this.hashIndices.get(i);if(s===void 0)continue;this.tripleHashes.delete(i),this.hashIndices.delete(i);let a=this.tripleMetadata.get(s);if(a){this.sourceType.get(a.sourceTypeIdx)?.delete(s),this.sourceId.get(a.sourceIdIdx)?.delete(s),this.relations.get(a.relationIdx)?.delete(s),this.targetType.get(a.targetTypeIdx)?.delete(s),this.targetId.get(a.targetIdIdx)?.delete(s);for(let p of a.sourceQsIndices)this.sourceQs.get(p)?.delete(s);for(let p of a.targetQsIndices)this.targetQs.get(p)?.delete(s);this.tripleMetadata.delete(s)}delete this.indexedTriples[s]}}difference(e){return e.filter(r=>!this.hasTriple(r))}hasTriple(e){return this.tripleHashes.has(this.hashTriple(e))}hashTriple(e){let r=`${e[0]}${e[1]}${e[2]}`,n=0;for(let i=0,s=r.length;i<s;i++){let a=r.charCodeAt(i);n=(n<<5)-n+a,n|=0}return n.toString()}getTripleIndex(e){let r=this.hashTriple(e);return this.hashIndices.get(r)}add(e){for(let r=0;r<e.length;r++){let n=e[r],i=n[0],s=n[1],a=n[2],p=this.stringUrn.get(i);p||(p=w(i),this.stringUrn.set(i,p));let f=this.stringUrn.get(a);f||(f=w(a),this.stringUrn.set(a,f));let y=this.stringIndex.add(i),v=this.stringIndex.add(s),b=this.stringIndex.add(a),k=this.stringIndex.add(p.type),A=this.stringIndex.add(p.id),$=this.stringIndex.add(f.type),ne=this.stringIndex.add(f.id),ee=this.hashTriple(n);if(this.tripleHashes.has(ee))continue;this.tripleHashes.add(ee);let G=this.indexedTriples.length;this.hashIndices.set(ee,G),this.indexedTriples.push([y,v,b]);let j=[],I=[],E=this.sourceType.get(k);E||(E=new Set,this.sourceType.set(k,E)),E.add(G);let R=this.sourceId.get(A);R||(R=new Set,this.sourceId.set(A,R)),R.add(G);for(let[H,le]of Object.entries(p.qs)){let se=this.stringIndex.add(`${H}=${le}`);j.push(se);let K=this.sourceQs.get(se);K||(K=new Set,this.sourceQs.set(se,K)),K.add(G)}let _=this.relations.get(v);_||(_=new Set,this.relations.set(v,_)),_.add(G);let z=this.targetType.get($);z||(z=new Set,this.targetType.set($,z)),z.add(G);let C=this.targetId.get(ne);C||(C=new Set,this.targetId.set(ne,C)),C.add(G);for(let[H,le]of Object.entries(f.qs)){let se=this.stringIndex.add(`${H}=${le}`);I.push(se);let K=this.targetQs.get(se);K||(K=new Set,this.targetQs.set(se,K)),K.add(G)}this.tripleMetadata.set(G,{sourceTypeIdx:k,sourceIdIdx:A,sourceQsIndices:j,relationIdx:v,targetTypeIdx:$,targetIdIdx:ne,targetQsIndices:I})}}get length(){return this.tripleHashes.size}get arrayLength(){return this.indexedTriples.length}triples(){return this.indexedTriples.filter(e=>e!==void 0).map(([e,r,n])=>[this.stringIndex.getValue(e),this.stringIndex.getValue(r),this.stringIndex.getValue(n)])}getTriple(e){if(e<0||e>=this.indexedTriples.length)return;let r=this.indexedTriples[e];if(!r)return;let[n,i,s]=r;return[this.stringIndex.getValue(n),this.stringIndex.getValue(i),this.stringIndex.getValue(s)]}getTripleIndices(e){if(!(e<0||e>=this.indexedTriples.length))return this.indexedTriples[e]}getSourceTypeSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.sourceType.get(r)}getSourceIdSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.sourceId.get(r)}getSourceQsSet(e,r){let n=this.stringIndex.getIndex(`${e}=${r}`);if(n!==void 0)return this.metrics.mapRead(),this.sourceQs.get(n)}getRelationSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.relations.get(r)}getTargetTypeSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.targetType.get(r)}getTargetIdSet(e){let r=this.stringIndex.getIndex(e);if(r!==void 0)return this.metrics.mapRead(),this.targetId.get(r)}getTargetQsSet(e,r){let n=this.stringIndex.getIndex(`${e}=${r}`);if(n!==void 0)return this.metrics.mapRead(),this.targetQs.get(n)}clone(){let e=new oi([]);e.indexedTriples=this.indexedTriples.slice(),e.tripleMetadata=new Map(this.tripleMetadata),e.stringIndex=this.stringIndex.clone(),e.tripleHashes=new Set(this.tripleHashes),e.hashIndices=new Map(this.hashIndices);let r=n=>{let i=new Map;for(let[s,a]of n.entries())i.set(s,new Set(a));return i};return e.sourceType=r(this.sourceType),e.sourceId=r(this.sourceId),e.sourceQs=r(this.sourceQs),e.relations=r(this.relations),e.targetType=r(this.targetType),e.targetId=r(this.targetId),e.targetQs=r(this.targetQs),e.stringUrn=new Map(this.stringUrn),e.metrics=this.metrics.clone(),e}},He=class{static source(t){return t[0]}static relation(t){return t[1]}static target(t){return t[2]}};function vu(t){let e=["source","relation","target"];if(!Array.isArray(t)){for(let r of Object.keys(t))if(Object.prototype.hasOwnProperty.call(t,r)&&!e.includes(r))throw new Error(`Unexpected search parameter: ${r}`)}}function bu(t,e,r){let n=e?r.getSourceTypeSet(t):r.getTargetTypeSet(t);return n===void 0||n.size===0?new Set:n}function xu(t,e,r){let n=new Set,i=Array.isArray(t)?t:[t];for(let s of i){let a=e?r.getSourceIdSet(s):r.getTargetIdSet(s);a&&Ge.append(n,a)}return n.size===0?new Set:n}function Au(t,e,r,n){let i=[];for(let[s,a]of Object.entries(t)){let p=e?r.getSourceQsSet(s,a):r.getTargetQsSet(s,a);if(typeof p>"u")return new Set;i.push(p)}return Ge.intersection(n,i)}function wu(t,e,r,n,i){let s;if(t.type&&(s=bu(t.type,e,r),s.size===0))return new Set;let a;if(t.id&&(a=xu(t.id,e,r),a.size===0))return new Set;let p;if(t.qs&&Object.keys(t.qs).length>0&&(p=Au(t.qs,e,r,n),p.size===0))return new Set;if(s===void 0&&a===void 0&&p===void 0){let b=t.predicate;if(!b)return i;let k=new Set([...i]);for(let A of k){let $=r.getTriple(A);if(!$){k.delete(A);continue}b(e?$[0]:$[2])||k.delete(A)}return k}let f=[i];s!==void 0&&f.push(s),a!==void 0&&f.push(a),p!==void 0&&f.push(p);let y=Ge.intersection(n,f);if(!t.predicate)return y;let v=t.predicate;for(let b of y){let k=r.getTriple(b);v(e?k[0]:k[2])||y.delete(b)}return y}function Kn(t,e,r,n,i){let s=new Set;for(let a of t)Ge.append(s,wu(a,e,r,n,i));return s}function Tu(t,e){let r=Array.isArray(t.relation)?t.relation:[t.relation],n=new Set;for(let s of r){let a=e.getRelationSet(s);a&&Ge.append(n,a)}if(!t.predicate)return n;let i=t.predicate;for(let s of n){let a=e.getTriple(s);if(!a){n.delete(s);continue}i(a[1])||n.delete(s)}return n}function ku(t,e,r,n){let{source:i,relation:s,target:a}=t,p=[];if(i){let f=Array.isArray(i)?i:[i],y=Kn(f,!0,e,n,r);p.push(y)}if(s&&p.push(Tu(s,e)),a){let f=Array.isArray(a)?a:[a],y=Kn(f,!1,e,n,r);p.push(y)}return p.length===0?r:Ge.intersection(n,p)}function Zn(t){return t.startsWith("urn:")}function ei(t){return typeof t=="string"?Zn(t)?[w(t)]:[{type:"unknown",id:t}]:Array.isArray(t)?t.map(e=>Zn(e)?w(e):{type:"unknown",id:e}):[t]}function Iu(t){return typeof t=="string"||Array.isArray(t)?{relation:t}:t}function Eu(t){let e=Array.isArray(t)?t[0]:t.source,r=Array.isArray(t)?t[1]:t.relation,n=Array.isArray(t)?t[2]:t.target,i={};return e&&(i.source=ei(e)),r&&(i.relation=Iu(r)),n&&(i.target=ei(n)),i}var ui=class Re{index;triplesCount;cursorIndices;metrics;validations;constructor(e,r={}){this.index=new gu(e),this.triplesCount=this.index.length,this.cursorIndices=new Set,this.metrics=new du,this.validations=r;for(let n=0;n<this.triplesCount;n++)this.cursorIndices.add(n)}clone(){let e=new Re([]);return e.index=this.index,e.triplesCount=this.triplesCount,e.cursorIndices=this.cursorIndices,e.metrics=this.metrics,e}static of(e){return new Re(e)}static from(e){let r=[];for(let n of e){let{id:i,...s}=n;if(typeof i!="string")throw new Error("Each TripleObject must have a string id.");for(let[a,p]of Object.entries(s))if(Array.isArray(p))for(let f of p)r.push([i,a,f]);else r.push([i,a,p])}return new Re(r)}validateTriples(e){let r=[];for(let[n,i,s]of e){let a=this.validations[i];if(!a)continue;let{type:p}=w(n),f=a(p,i,s);typeof f=="string"&&r.push(f)}if(r.length>0)throw new Error(`Triple validation failed:
- ${r.join(`
- `)}`)}add(e){let r=this.index.arrayLength;this.validateTriples(e),this.index.add(e),this.triplesCount=this.index.length;for(let n=r;n<this.index.arrayLength;n++)this.cursorIndices.add(n)}map(e){return new Re(this.index.triples().map(e))}flatMap(e){let r=this.index.triples().flatMap(e),n=new Re([]);return n.index=this.index.clone(),n.add(r),n}deduplicateTriples(e){let r=new Set,n=[];for(let i of e){let s=this.index.hashTriple(i);r.has(s)||(r.add(s),n.push(i))}return n}searchFlatmap(e,r){let i=this.search(e).triples(),s=i.flatMap(r),a=this.deduplicateTriples(s),p=new Map;for(let b of i){let k=this.index.hashTriple(b);p.set(k,b)}let f=new Map;for(let b of a){let k=this.index.hashTriple(b);f.set(k,b)}let y=[],v=[];for(let[b,k]of p)f.has(b)||y.push(k);for(let[b,k]of f)p.has(b)||v.push(k);return this.delete(y),this.add(v),this}firstTriple(){return this.index.length>0?this.index.getTriple(0):void 0}firstSource(){let e=this.firstTriple();return e?He.source(e):void 0}firstRelation(){let e=this.firstTriple();return e?He.relation(e):void 0}firstTarget(){let e=this.firstTriple();return e?He.target(e):void 0}firstObject(e=!1){let r,n={};for(let[i,s,a]of this.index.triples())r===void 0&&(r=i,n.id=i),r===i&&(n[s]?Array.isArray(n[s])?n[s].includes(a)||n[s].push(a):n[s]=n[s]===a?n[s]:[n[s],a]:n[s]=e?[a]:a);return Object.keys(n).length>0?n:void 0}triples(){return this.index.triples()}sources(){return new Set(this.index.triples().map(He.source))}relations(){return new Set(this.index.triples().map(He.relation))}targets(){return new Set(this.index.triples().map(He.target))}objects(e=!1){let r=[];for(let[n,i]of Object.entries(this.#t(e)))i.id=n,r.push(i);return r}#t(e=!1){let r={};for(let[n,i,s]of this.index.triples()){r[n]||(r[n]={id:n});let a=r[n][i];a?Array.isArray(a)?a.includes(s)||a.push(s):r[n][i]=a===s?a:[a,s]:r[n][i]=e?[s]:s}return r}search(e){let r=Eu(e);vu(r);let n=[];for(let i of ku(r,this.index,this.cursorIndices,this.metrics)){let s=this.index.getTriple(i);s!==void 0&&n.push(s)}return new Re(n)}getMetrics(){return{index:this.index.metrics,db:this.metrics}}readThing(e,r={qs:!1}){if(r.qs){let{type:n,id:i}=w(e);return this.search({source:{type:n,id:i}}).firstObject()}else return this.search({source:e}).firstObject()}readThings(e,r={qs:!1}){let n=[];for(let i of e){let s=this.readThing(i,r);s!==void 0&&n.push(s)}return n}parseThing(e,r,n={qs:!1}){let i=this.readThing(r,n);if(i)return e(i)}parseThings(e,r,n={qs:!1}){let i=[];for(let s of r){let a=this.parseThing(e,s,n);a&&i.push(a)}return i}merge(e){return this.add(e.triples()),this}delete(e){let r=new Set;for(let n of e){let i=this.index.getTripleIndex(n);i!==void 0&&r.add(i)}this.index.delete(e),this.triplesCount=this.index.length;for(let n of r)this.cursorIndices.delete(n);return this}};async function*Su(t){let e=new ni,r=await fetch(t);if(!r.body)throw new Error("No response body");let n=new TextDecoderStream,i=r.body.pipeThrough(n).getReader(),s="",a=[];for(;;){let{value:p,done:f}=await i.read();if(f)break;s+=p;let y=s.split(`
`);s=y.pop()??"";for(let v of y){let b=e.parse(v);b!==void 0&&a.push(b),a.length>=500&&(yield[...a],a.length=0)}}if(s.length>0){let p=e.parse(s);p!==void 0&&a.push(p)}a.length>0&&(yield[...a])}var gt=null;async function ai(t,e={},r=n=>[n]){gt||(gt=new ui([],e));for await(let n of Su(t))for(let i of n)gt.add(r(i));return gt}var S=class{static ALBUM_ID="albumId";static SUBJECT="subject";static LOCATION="location";static LONGITUDE="longitude";static LATITUDE="latitude";static COUNTRY="country";static FLAG="flag";static RATING="rating";static NAME="name";static BIRDWATCH_URL="birdwatchUrl";static WIKIPEDIA="wikipedia";static CREATED_AT="createdAt";static SEASON="season";static F_STOP="f_stop";static FOCAL_LENGTH="focalLength";static MODEL="model";static EXPOSURE_TIME="exposureTime";static ISO="iso";static WIDTH="width";static HEIGHT="height";static THUMBNAIL_URL="thumbnailUrl";static PNG_URL="pngUrl";static MID_IMAGE_LOSSY_URL="midImageLossyUrl";static FULL_IMAGE="fullImage";static POSTER_URL="posterUrl";static VIDEO_URL_1080P="videoUrl1080p";static VIDEO_URL_480P="videoUrl480p";static VIDEO_URL_720P="videoUrl720p";static VIDEO_URL_UNSCALED="videoUrlUnscaled";static YEAR="year";static CONTAINS="contains";static IN="in";static STYLE="style";static FLAGS="flags";static CONTAINS_ALBUM="containsAlbum";static TRIP="trip"},D=class{static PLACE="place";static COUNTRY="country";static BIRD="bird";static MAMMAL="mammal";static REPTILE="reptile";static AMPHIBIAN="amphibian";static INSECT="insect";static CAMERA="camera";static PHOTO="photo";static VIDEO="video";static ALBUM="album";static UNESCO="unesco";static FISH="fish";static PLACE_FEATURE="place_feature"},li=new Set([D.COUNTRY,D.CAMERA,D.PLACE]),fr=new Map([["country","countries"]]),ci=new Map([[S.FLAGS,S.COUNTRY]]),pi=new Set([S.THUMBNAIL_URL,S.PNG_URL,S.MID_IMAGE_LOSSY_URL,S.FULL_IMAGE,S.POSTER_URL,S.VIDEO_URL_1080P,S.VIDEO_URL_480P,S.VIDEO_URL_720P,S.VIDEO_URL_UNSCALED]),fi=[[S.IN,S.CONTAINS],[S.CONTAINS_ALBUM,S.TRIP]],mr={i:"urn:r\xF3:",birdwatch:"https://birdwatchireland.ie/birds/",photos:"https://photos-cdn.rgrannell.xyz/",wiki:"https://en.wikipedia.org/wiki/"},hr=/^\[([a-z]*):(.*)\]$/,mi="https://photos-cdn.rgrannell.xyz";var nt={aquarium:"\u{1F420}",aquaduct:"\u{1F3DB}\uFE0F",archaeological:"\u{1F3FA}",beach:"\u{1F3D6}\uFE0F",bridge:"\u{1F309}",canal:"\u{1F6A4}",castle:"\u{1F3F0}",church:"\u26EA",cathedral:"\u26EA",continent:"\u{1F30D}",cave:"\u26CF\uFE0F",city:"\u{1F3D9}\uFE0F",cliffs:"\u26F0\uFE0F",county:"\u{1F5FA}\uFE0F",district:"\u{1F3D8}\uFE0F",garden:"\u{1F33A}",harbor:"\u2693",island:"\u{1F3DD}\uFE0F",lake:"\u{1F3DE}\uFE0F",monument:"\u{1F5FF}",mosque:"\u{1F54C}",mountain:"\u{1F3D4}\uFE0F",mountains:"\u{1F3D4}\uFE0F",museum:"\u{1F3DB}\uFE0F",monastery:"\u{1F3EF}",national:"\u{1F1FA}\u{1F1F3}",nature:"\u{1F33F}",palace:"\u{1F3EF}",park:"\u{1F333}",port:"\u{1F6F3}\uFE0F",rainforest:"\u{1F334}",square:"\u{1F3E2}",state:"\u{1F3DB}\uFE0F",street:"\u{1F6B6}\u200D\u2642\uFE0F",town:"\u{1F3D8}\uFE0F",train:"\u{1F686}",unesco:"\u{1F3DB}\uFE0F",village:"\u{1F3E1}",volcano:"\u{1F30B}",waterfall:"\u{1F4A6}",wildlife:"\u{1F981}",zoo:"\u{1F993}"},hi=new Set(["dc-gh5","dc-gh6","dmc-fz72","dmc-g7","finepix-f70exr","xz-1"]),yi=new Set(["pixel-4a","pixel-7-pro","pixel-9a","sm-a520f"]),di=new Set([D.BIRD,D.MAMMAL,D.REPTILE,D.AMPHIBIAN,D.FISH,D.INSECT]);function Ue(t){return t.charAt(0).toUpperCase()+t.slice(1)}function vt(t){return fr.has(t)?fr.get(t):t+"s"}var yr=new Map;function gi(t){if(typeof t!="string")throw new TypeError("Expected a string");if(yr.has(t))return yr.get(t);let e=t.replace(/[-_ ]+([a-z0-9])/g,(r,n)=>n.toUpperCase());return yr.set(t,e),e}function vi(t){let e=t.replace(/-/g," ");return Ue(e)}function bt(t){return t.replace(/\\"/g,'"')}function Du(t){let[e,r,n]=t;if(r!==S.RATING)return[t];let i=(n.match(/â­/g)||[]).length;return[[e,r,`urn:r\xF3:rating:${i-1}`]]}function Pu(t){let[e,r,n]=t;if(r!==S.COUNTRY)return[t];let s=`urn:r\xF3:country:${n.toLowerCase().replace(/ /g,"-")}`;return[[e,r,s]]}var bi=new Set;function _u(t){let[e,r,n]=t;if(r!==S.STYLE)return[t];let s=`urn:r\xF3:style:${n.toLowerCase().replace(/ /g,"-")}`;return bi.has(n)?[[e,r,s]]:(bi.add(n),[[e,r,s],[s,S.NAME,n]])}function Lu(t){let[e,r,n]=t;return Array.from(pi).some(s=>r===s)?[[e,r,`${mi}${n}`]]:[t]}function Ou(t){let[e,r,n]=t;return[[e,gi(r),n]]}function Cu(t){let[e,r,n]=t;return[[typeof e=="string"&&e.startsWith("::")?`urn:r\xF3:${e.slice(2)}`:e,r,typeof n=="string"&&n.startsWith("::")?`urn:r\xF3:${n.slice(2)}`:n]]}function Mu(t){let e=t.search({relation:S.CREATED_AT}).triples().flatMap(([r,n,i])=>{let s=new Date(i);if(isNaN(s.getTime()))return[];let a=s.getUTCFullYear().toString();return[[r,S.YEAR,a]]});t.add(e)}function ju(t){let e=[];for(let[r,n]of fi){let i=t.search({relation:r}).triples();for(let[s,a,p]of i)e.push([p,n,s])}t.add(e)}var xi=new Map;function Ai(t,e){let r=xi.get(e);if(r)return r;if(typeof e!="string"||!hr.test(e))return e;let n=e.match(hr);if(!n)return e;let i=n[1],s=n[2],a=t[i]?`${t[i]}${s}`:e;return xi.set(e,a),a}function Ru(t){let[e,r,n]=t;return[[Ai(mr,e),r,Ai(mr,n)]]}function Uu(t){let e={nodes:new Map,branchIds:new Set},r=t.search({relation:S.IN}).triples(),n=e.nodes;for(let[i,,s]of r){let a=n.get(i);a||(a={id:i,parents:new Set},n.set(i,a));let p=n.get(s);p||(p={id:s,parents:new Set},n.set(s,p)),e.branchIds.add(s),a?.parents.add(s)}return e}function $u(t){for(let[e,r]of ci)if(t[1]===e)return[[t[0],r,t[2]]];return[t]}var wi=[["urn:r\xF3:rating:%E2%AD%90",S.NAME,"\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50\u2B50"],["urn:r\xF3:rating:%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90%E2%AD%90",S.NAME,"\u2B50\u2B50\u2B50\u2B50\u2B50"]];function Ti(t){let e=[$u,Ou,Cu,Ru,Du,Pu,Lu,_u],r=[t];for(let n of e){let i=[];for(let s of r)i.push(...n(s));r=[...i],i=[]}return r}function ki(t){Mu(t),ju(t),Nu(t)}function Nu(t){let e=Uu(t);function r(i,s){let a=[],p=e.nodes.get(s);if(!p)throw new Error(`no node in location tree for ${s}`);if(i.length>5)throw new Error(`likely cycle; ${JSON.stringify(i)}`);if(p.parents.size===0){let f=[...i,s];for(let y=0;y<f.length-1;y++)for(let v=y;v<f.length;v++){let b=f[y],k=f[v];b!==k&&(a.push([b,S.IN,k]),a.push([k,S.CONTAINS,b]))}}else for(let f of p.parents)a.push(...r([...i,s],f));return a}let n=[];for(let i of e.nodes.keys())e.branchIds.has(i)||n.push(...r([],i));t.add(n)}function Ii(t){let e=[];for(let r of t)e.push(`Parse warning @
${JSON.stringify(r.path,null,2)}
: ${r.message}`);console.warn(e.join(`
`)),console.trace()}var dr;function Si(t){return{lang:t?.lang??dr?.lang,message:t?.message,abortEarly:t?.abortEarly??dr?.abortEarly,abortPipeEarly:t?.abortPipeEarly??dr?.abortPipeEarly}}var Vu;function qu(t){return Vu?.get(t)}var Bu;function zu(t){return Bu?.get(t)}var Fu;function Hu(t,e){return Fu?.get(t)?.get(e)}function Gu(t){let e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&Object.getPrototypeOf(t)?.constructor?.name)??"null":e}function Se(t,e,r,n,i){let s=i&&"input"in i?i.input:r.value,a=i?.expected??t.expects??null,p=i?.received??Gu(s),f={kind:t.kind,type:t.type,input:s,expected:a,received:p,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${p}`,requirement:t.requirement,path:i?.path,issues:i?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},y=t.kind==="schema",v=i?.message??t.message??Hu(t.reference,f.lang)??(y?zu(f.lang):null)??n.message??qu(f.lang);v!==void 0&&(f.message=typeof v=="function"?v(f):v),y&&(r.typed=!1),r.issues?r.issues.push(f):r.issues=[f]}function De(t){return{version:1,vendor:"valibot",validate(e){return t["~run"]({value:e},Si())}}}function Wu(t,e){let r=[...new Set(t)];return r.length>1?`(${r.join(` ${e} `)})`:r[0]??"never"}function gr(t){return{kind:"validation",type:"integer",reference:gr,async:!1,expects:null,requirement:Number.isInteger,message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&Se(this,"integer",e,r),e}}}function vr(t){return{kind:"transformation",type:"transform",reference:vr,async:!1,operation:t,"~run"(e){return e.value=this.operation(e.value),e}}}function br(t){return{kind:"validation",type:"url",reference:br,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,"~run"(e,r){return e.typed&&!this.requirement(e.value)&&Se(this,"URL",e,r),e}}}function Xu(t,e,r){return typeof t.fallback=="function"?t.fallback(e,r):t.fallback}function Di(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function xr(){return{kind:"schema",type:"any",reference:xr,expects:"any",async:!1,get"~standard"(){return De(this)},"~run"(t){return t.typed=!0,t}}}function Ar(t,e){return{kind:"schema",type:"array",reference:Ar,expects:"Array",async:!1,item:t,message:e,get"~standard"(){return De(this)},"~run"(r,n){let i=r.value;if(Array.isArray(i)){r.typed=!0,r.value=[];for(let s=0;s<i.length;s++){let a=i[s],p=this.item["~run"]({value:a},n);if(p.issues){let f={type:"array",origin:"value",input:i,key:s,value:a};for(let y of p.issues)y.path?y.path.unshift(f):y.path=[f],r.issues?.push(y);if(r.issues||(r.issues=p.issues),n.abortEarly){r.typed=!1;break}}p.typed||(r.typed=!1),r.value.push(p.value)}}else Se(this,"type",r,n);return r}}}function wr(t){return{kind:"schema",type:"number",reference:wr,expects:"number",async:!1,message:t,get"~standard"(){return De(this)},"~run"(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:Se(this,"type",e,r),e}}}function Tr(t,e){return{kind:"schema",type:"object",reference:Tr,expects:"Object",async:!1,entries:t,message:e,get"~standard"(){return De(this)},"~run"(r,n){let i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(let s in this.entries){let a=this.entries[s];if(s in i||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){let p=s in i?i[s]:Di(a),f=a["~run"]({value:p},n);if(f.issues){let y={type:"object",origin:"value",input:i,key:s,value:p};for(let v of f.issues)v.path?v.path.unshift(y):v.path=[y],r.issues?.push(v);if(r.issues||(r.issues=f.issues),n.abortEarly){r.typed=!1;break}}f.typed||(r.typed=!1),r.value[s]=f.value}else if(a.fallback!==void 0)r.value[s]=Xu(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(Se(this,"key",r,n,{input:void 0,expected:`"${s}"`,path:[{type:"object",origin:"key",input:i,key:s,value:i[s]}]}),n.abortEarly))break}}else Se(this,"type",r,n);return r}}}function kr(t,e){return{kind:"schema",type:"optional",reference:kr,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:e,get"~standard"(){return De(this)},"~run"(r,n){return r.value===void 0&&(this.default!==void 0&&(r.value=Di(this,r,n)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,n)}}}function Ir(t){return{kind:"schema",type:"string",reference:Ir,expects:"string",async:!1,message:t,get"~standard"(){return De(this)},"~run"(e,r){return typeof e.value=="string"?e.typed=!0:Se(this,"type",e,r),e}}}function Ei(t){let e;if(t)for(let r of t)e?e.push(...r.issues):e=r.issues;return e}function Er(t,e){return{kind:"schema",type:"union",reference:Er,expects:Wu(t.map(r=>r.expects),"|"),async:!1,options:t,message:e,get"~standard"(){return De(this)},"~run"(r,n){let i,s,a;for(let p of this.options){let f=p["~run"]({value:r.value},n);if(f.typed)if(f.issues)s?s.push(f):s=[f];else{i=f;break}else a?a.push(f):a=[f]}if(i)return i;if(s){if(s.length===1)return s[0];Se(this,"type",r,n,{issues:Ei(s)}),r.typed=!0}else{if(a?.length===1)return a[0];Se(this,"type",r,n,{issues:Ei(a)})}return r}}}function Pi(...t){return{...t[0],pipe:t,get"~standard"(){return De(this)},"~run"(e,r){for(let n of t)if(n.kind!=="metadata"){if(e.issues&&(n.kind==="schema"||n.kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=n["~run"](e,r))}return e}}}function xt(t,e,r){let n=t["~run"]({value:e},Si(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}var Li=O(L());var _i=O(L());function We(t){return t===void 0?[]:Array.isArray(t)?t:[t]}function M(t){return Array.isArray(t)?t[0]:t}function At(t){let e=M(t.features),{id:r}=w(e);return Object.prototype.hasOwnProperty.call(nt,r)?nt[r]:"\u{1F4CD}"}function Ju(t){let{id:e}=w(t);return Object.prototype.hasOwnProperty.call(nt,e)?nt[e]:"\u{1F4CD}"}function $e(t){return M(t.flag)}function Qu(){return"\u{1F424}"}function Yu(t){let{id:e}=w(t.id);return hi.has(e)?"\u{1F4F7}":yi.has(e)?"\u{1F4F1}":"\u{1F4F7}"}function wt(t,e,r){let{type:n}=w(t);switch(n){case D.PLACE:return At(r);case D.COUNTRY:return $e(r);case D.BIRD:return Qu();case D.CAMERA:return Yu(r);case D.PLACE_FEATURE:return Ju(t);default:return""}}function Tt(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=w(e),s=i;if(Object.prototype.hasOwnProperty.call(r,"name")){let p=M(r.name);p&&(s=p)}let a=wt(e,s,r);return(0,_i.default)("a",{href:e,onclick:Y(`/thing/${n}:${i}`),class:["thing-link",`${n}-link`].join(" ")},`${a}	${s}`)}}}function Xe(t,e){let{id:r,type:n}=w(e);return t.search({source:{id:r,type:n}}).firstObject()}function Oi(t,e,r){let n=Xe(e,r);if(n)return t(e,n)}function Ci(t,e){let r=[];for(let n of e){let i=Xe(t,n);i&&r.push(i)}return r}var Mi=function(t,e,r){if(typeof t!="function")throw new Error("Parser must be a function");let n=[];for(let i of r){let s=Xe(e,i);if(!s)continue;let a=t(e,s);a&&n.push(a)}return n};function Sr(t,e){return t.search({source:{type:e}}).objects().filter(n=>Object.prototype.hasOwnProperty.call(n,"name")).sort((n,i)=>{let s=n.name,a=i.name,p=M(s),f=M(a);return p.localeCompare(f)})}function ji(t,e){return e.flatMap(r=>{if(!r)return[];let n=Xe(t,r);return!n||!n.name?[]:[(0,Li.default)(Tt,{urn:r,thing:n})]})}function pe(t,e){return(r,n)=>{let i=xt(t,n);if(!i.success){Ii(i.issues);return}return{...i.output,type:e}}}function Dr(t){return(e,r)=>{let{type:n}=w(M(r.id)),i=t[n]??t.default;if(i)return i(e,r)}}function Ku(t){return(e,r)=>Oi(t,e,r)}function Zu(t){if(typeof t!="function")throw new Error("Parser must be a function");return(e,r)=>Mi(t,e,r)}function ae(t){return{one:Ku(t),many:Zu(t)}}var l={string:Ir,array:Ar,object:Tr,optional:kr,union:Er,any:xr,pipe:Pi,url:br,integer:gr,number:wr,transform:vr},Ri=l.object({name:l.string(),id:l.string(),trip:l.optional(l.string()),minDate:l.pipe(l.string(),l.transform(Number)),maxDate:l.pipe(l.string(),l.transform(Number)),thumbnailUrl:l.string(),mosaic:l.string(),photosCount:l.pipe(l.string(),l.transform(Number)),videosCount:l.pipe(l.string(),l.transform(Number)),country:l.union([l.string(),l.array(l.string())]),description:l.optional(l.string())}),Ui=l.object({id:l.string(),flag:l.optional(l.string()),name:l.string(),contains:l.optional(l.union([l.string(),l.array(l.string())])),in:l.optional(l.union([l.string(),l.array(l.string())]))}),$i=l.object({id:l.string(),name:l.optional(l.string()),longitude:l.optional(l.string()),latitude:l.optional(l.string())}),Ni=l.object({id:l.string(),name:l.string(),features:l.optional(l.union([l.string(),l.array(l.string())])),in:l.optional(l.union([l.string(),l.array(l.string())])),shortName:l.optional(l.string()),wikipedia:l.optional(l.string()),unescoId:l.optional(l.string())}),Vi=l.object({albumId:l.string(),country:l.optional(l.union([l.string(),l.array(l.string())])),createdAt:l.string(),subject:l.optional(l.union([l.string(),l.array(l.string())])),exposureTime:l.optional(l.string()),fStop:l.optional(l.string()),focalLength:l.optional(l.string()),fullImage:l.string(),height:l.optional(l.string()),id:l.string(),iso:l.optional(l.string()),location:l.optional(l.union([l.string(),l.array(l.string())])),midImageLossyUrl:l.string(),model:l.optional(l.string()),mosaicColours:l.string(),pngUrl:l.string(),rating:l.string(),style:l.optional(l.string()),thumbnailUrl:l.string(),width:l.optional(l.string()),description:l.optional(l.string()),summary:l.optional(l.string()),contrastingGrey:l.string()}),qi=l.object({id:l.string(),name:l.string(),wikipedia:l.optional(l.string())}),Bi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),zi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Fi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Hi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),ec=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string())}),Gi=l.object({id:l.string(),name:l.optional(l.string()),wikipedia:l.optional(l.string()),birdwatchUrl:l.optional(l.union([l.string(),l.array(l.string())]))}),Wi=l.object({id:l.string(),albumId:l.string(),description:l.string(),posterUrl:l.pipe(l.string(),l.url()),videoUrl1080p:l.pipe(l.string(),l.url()),videoUrl480p:l.pipe(l.string(),l.url()),videoUrl720p:l.pipe(l.string(),l.url()),videoUrlUnscaled:l.pipe(l.string(),l.url())}),Xi=l.object({photos:l.pipe(l.number(),l.integer()),videos:l.pipe(l.number(),l.integer()),albums:l.pipe(l.number(),l.integer()),years:l.pipe(l.number(),l.integer()),countries:l.pipe(l.number(),l.integer()),bird_species:l.pipe(l.number(),l.integer()),mammal_species:l.pipe(l.number(),l.integer()),amphibian_species:l.pipe(l.number(),l.integer()),reptile_species:l.pipe(l.number(),l.integer()),unesco_sites:l.pipe(l.number(),l.integer())}),Ji=l.object({id:l.string(),name:l.optional(l.string())});var Qi=pe(Ji,"feature"),Pr=pe(Ui,"country"),_r=pe($i,"unesco"),Yi=pe(Vi,"photo"),ea=pe(Gi,"bird"),Lr=pe(qi,"mammal"),Or=pe(Bi,"reptile"),Cr=pe(Fi,"amphibian"),Mr=pe(Hi,"insect"),jr=pe(zi,"fish"),Ki=pe(Wi,"video"),Rr=pe(Ni,"place"),Zi=pe(Ri,"album"),es=Dr({[D.BIRD]:ea,[D.MAMMAL]:Lr,[D.REPTILE]:Or,[D.AMPHIBIAN]:Cr,[D.INSECT]:Mr,[D.FISH]:jr}),ts=Dr({[D.PLACE]:Rr,[D.COUNTRY]:Pr,[D.UNESCO]:_r});function rs(t){return xt(Xi,t).success?t:void 0}var{one:ns,many:is}=ae(Pr),{one:ss,many:pc}=ae(Rr),{one:os,many:kt}=ae(ts),{one:us,many:as}=ae(_r),{one:It,many:Ur}=ae(Zi),{one:ls,many:fc}=ae(Lr),{one:cs,many:mc}=ae(Or),{one:ps,many:hc}=ae(Mr),{one:yc,many:dc}=ae(jr),{one:gc,many:fs}=ae(es),{one:ms,many:vc}=ae(Cr),{one:hs,many:Et}=ae(Ki),{one:Je,many:Pe}=ae(Yi),{one:bc,many:ys}=ae(Qi);function Ae(t){let e=globalThis.innerWidth,r=globalThis.innerHeight,n=400,i=Math.floor(e/n),s=Math.floor(r/n);return t>i*s+1?"lazy":"eager"}var St=new Map;function _e(t){if(St.has(t))return St.get(t);let e=t.split("#").map(i=>`#${i}`),r=window.document.createElement("canvas");r.width=2,r.height=2;let n=r.getContext("2d");if(!n)throw new Error("context missing");return n.fillStyle=e[1],n.fillRect(0,0,1,1),n.fillStyle=e[2],n.fillRect(1,0,1,1),n.fillStyle=e[3],n.fillRect(0,1,1,1),n.fillStyle=e[4],n.fillRect(1,1,1,1),St.set(t,r.toDataURL("image/png")),St.get(t)}function ds(t){let e=t.search({source:{type:"photo"}}).sources();return Pe(t,e).sort((r,n)=>parseInt(n.createdAt)-parseInt(r.createdAt))}function gs(t,e){let r=new Set,n=new Set;for(let i of e){let s=w(i),a=t.search({source:{type:s.type,id:s.id},relation:[S.LOCATION,S.SUBJECT]}).firstObject(!0);if(!a)continue;let p=a?.location??[],f=a?.subject??[];for(let y of p)r.add(y);for(let y of f)n.add(y)}return{subjects:fs(t,n),locations:kt(t,r)}}function vs(t,e){let r=new Set;for(let n of e){let{type:i,id:s}=w(n),a=t.search({source:{type:"photo"},target:{type:i,id:s}}).sources();for(let p of a)r.add(p)}return Pe(t,r).sort((n,i)=>parseInt(i.createdAt)-parseInt(n.createdAt))}function ta(t,e){let{type:r,id:n}=w(e),i=t.search({source:{type:"photo"},relation:"cover",target:{type:r,id:n}}).firstSource();return i?Je(t,i):void 0}function ra(t,e){let r=t.rating;return e.rating.toLocaleString().localeCompare(r.toLocaleString())}function bs(t,e){let{type:r,id:n}=w(e),i=ta(t,e);if(i)return i;let s=t.search({source:{type:"photo"},target:{type:r,id:n}}).sources(),a=Pe(t,new Set(s)).sort(ra);return a.length>0?a[0]:null}function $r(t){return new Date(t.minDate).getFullYear()}function xs(t){let e=t.search({source:{type:D.ALBUM}}).sources();return Ur(t,e).sort((r,n)=>n.minDate-r.minDate)}function As(t,e){return t.search({source:{type:D.PHOTO},relation:S.ALBUM_ID,target:{id:w(e).id}}).sources()}function ws(t,e){return Pe(t,As(t,e))}function na(t,e){return t.search({source:{type:D.VIDEO},relation:S.ALBUM_ID,target:{id:w(e).id}}).sources()}function Ts(t,e){return Et(t,na(t,e))}function ks(t,e){return gs(t,As(t,e))}function Is(t,e){let r=new Set;for(let i of e){let{type:s,id:a}=w(i),p=t.search({target:{type:s,id:a}}).sources();for(let f of p)r.add(f)}let n=new Set;for(let i of r){let s=w(i),a=t.search({source:{type:s.type,id:s.id},relation:S.ALBUM_ID}).targets();for(let p of a)n.add(`urn:r\xF3:album:${p}`)}return Ur(t,n)}var Es=new Map;function Ss(t,e){let r=new Set;if(e.size===0)return r;for(let i of e)if(Es.has(i)){let s=Es.get(i);s&&r.add(s)}if(r.size===e.size)return r;let n=t.search({relation:S.NAME,target:Array.from(e)});for(let[i,s,a]of n.triples())e.has(a)&&r.add(i);return r}async function ia(){let t={},e=await ai(`/manifest/tribbles.${window.envConfig.publication_id}.txt`,t,Ti);return ki(e),e.add(wi),e}function sa(t){return{readThing:t.readThing,readAlbum:It.bind(null,t),readCountry:ns.bind(null,t),readPlace:ss.bind(null,t),readPhoto:Je.bind(null,t),readMammal:ls.bind(null,t),readReptile:cs.bind(null,t),readAmphibian:ms.bind(null,t),readInsect:ps.bind(null,t),readVideo:hs.bind(null,t),readLocation:os.bind(null,t),readUnesco:us.bind(null,t),readLocations:kt.bind(null,t),readFeatures:ys.bind(null,t),readPhotos:Pe.bind(null,t),readUnescos:as.bind(null,t),readThings:Ci.bind(null,t),readCountries:is.bind(null,t),namesToUrns:Ss.bind(null,t),readThingCover:bs.bind(null,t),readPhotosByThingIds:vs.bind(null,t),readAlbumsByThingIds:Is.bind(null,t),toThingLinks:ji.bind(null,t)}}async function Ds(){let t=await ia();return{currentAlbum:void 0,currentPhoto:void 0,currentUrn:void 0,currentType:void 0,data:t,darkMode:Yn(),sidebarVisible:!1,services:sa(t)}}var we=O(L());function it(){return{view(t){return(0,we.default)("li",{class:"sidebar-item",onclick:Y(t.attrs.route)},t.attrs.name)}}}function Te(){function t(e){let r=["photo-sidebar"];return e&&r.push("sidebar-visible"),r.join(" ")}return{view(e){return(0,we.default)("aside",{class:t(e.attrs.visible)},[(0,we.default)("nav",[(0,we.default)("ul",[(0,we.default)(it,{name:"PHOTOS",route:"/photos"}),(0,we.default)(it,{name:"VIDEOS",route:"/videos"}),(0,we.default)(it,{name:"ALBUMS",route:"/albums"}),(0,we.default)(it,{name:"LISTINGS",route:"/listings"}),(0,we.default)(it,{name:"ABOUT",route:"/about"})])])])}}}var ye=O(L());var ve=O(L());function Ps(){let t=rs(window.stats);return{view(){return t?(0,ve.default)("p.photo-stats",[`${t.photos} `,(0,ve.default)("a",{href:"#/photos"},"photos")," \xB7 ",`${t.videos} `,(0,ve.default)("a",{href:"#/videos"},"videos")," \xB7 ",`${t.albums} albums \xB7 ${t.years} years \xB7 `,`${t.countries} `,(0,ve.default)("a",{href:"#/listing/country"},"countries")," \xB7 ",`${t.bird_species} `,(0,ve.default)("a",{href:"#/listing/bird"},"bird species")," \xB7 ",`${t.mammal_species} `,(0,ve.default)("a",{href:"#/listing/mammal"},"mammal species")," \xB7 a few ",(0,ve.default)("a",{href:"#/listing/amphibian"},"amphibians")," and ",(0,ve.default)("a",{href:"#/listing/reptile"},"reptiles")," \xB7 ",`${t.unesco_sites} `,(0,ve.default)("a",{href:"#/thing/unesco:*"},"UNESCO sites")]):(0,ve.default)("p")}}}var Oe=O(L());function Pt(t=500){return globalThis.matchMedia(`(max-width: ${t}px)`).matches}function Le(t){document.title=t}function _s(t){let e=new Date(parseInt(t)),r={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return e.toLocaleDateString("en-US",r)}function _t(t,e,r){if(!t&&!e)return"unknown date";let n=t instanceof Date?t:new Date(t),i=e instanceof Date?e:new Date(e);if(r){let s={day:"numeric",month:"short"},a=n.toLocaleDateString("en-IE",s),p=i.toLocaleDateString("en-IE",s),f=n.toLocaleDateString("en-IE",{day:"numeric"}),y=i.toLocaleDateString("en-IE",{day:"numeric"}),v=n.toLocaleDateString("en-IE",{month:"short"}),b=i.toLocaleDateString("en-IE",{month:"short"}),k=n.getFullYear(),A=i.getFullYear(),$=v===b,ne=k===A;return a===p?`${a} ${k}`:$&&ne?`${f} - ${y} ${b} ${k}`:`${a} ${k} - ${p} ${A}`}else{let s={year:"numeric",month:"short",day:"numeric"},a=n.toLocaleDateString("en-IE",s),p=i.toLocaleDateString("en-IE",s);return a===p?a:`${a} \u2014 ${p}`}}function Lt(){function t(e,r){if(!e||!r)return"unknown date";let n=Pt(500);return _t(e,r,n)}return{view(e){let{title:r,minDate:n,maxDate:i,count:s,countryLinks:a}=e.attrs,p=s===1?"photo":"photos";return(0,Oe.default)("div.photo-album-metadata",[(0,Oe.default)("p.photo-album-title",r),(0,Oe.default)("p.photo-album-date",[(0,Oe.default)("time",t(n,i))]),(0,Oe.default)("div.photo-metadata-inline",[(0,Oe.default)("p.photo-album-count",`${s} ${p}`),(0,Oe.default)("p.photo-album-countries",a)])])}}}var ut=O(L());var be=O(L());var ot=O(L());function oa(){return{view(t){let{colour:e}=t.attrs;return(0,ot.default)("svg.photo-icon",{height:40,width:40,preserveAspectRatio:"xMinYMin",viewBox:"-2 -2 24 24",xmlns:"http://www.w3.org/2000/svg"},[(0,ot.default)("path",{d:"m10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10 10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-10a1 1 0 0 1 1 1v5a1 1 0 0 1 -2 0v-5a1 1 0 0 1 1-1zm0-1a1 1 0 1 1 0-2 1 1 0 0 1 0 2z",fill:e})])}}}function Ls(){return{view(t){let{id:e,colour:r}=t.attrs;return(0,ot.default)("div.photo-metadata-popover",{onclick:()=>ce("navigate",{route:`/photo/${e}`})},(0,ot.default)(oa,{colour:r}))}}}function ua(t,e){ce("photo_loaded",{url:t});let r=e.target?.parentNode?.querySelector(".thumbnail-placeholder");r&&(r.style.zIndex="-1")}function aa(){return{view(t){let{thumbnailUrl:e,loading:r,onclick:n}=t.attrs;return(0,be.default)("img.thumbnail-image",{onload:ua.bind(null,e),width:400,height:400,src:e,loading:r,onclick:n})}}}function la(){return{view(t){let{thumbnailDataUrl:e}=t.attrs;return(0,be.default)("img.u-photo.thumbnail-image.thumbnail-placeholder",{width:400,height:400,src:e})}}}function Vr(){return{view(t){let{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,onclick:s}=t.attrs;return(0,be.default)("a",{href:e,target:"_blank",rel:"external"},[(0,be.default)(la,{thumbnailDataUrl:n}),(0,be.default)(aa,{thumbnailUrl:r,loading:i,onclick:s})])}}}function ca(t){return t.startsWith("urn:")?rt(t).id:t}function Ce(){return{view(t){let{photo:e,loading:r,interactive:n}=t.attrs,i=ca(e.id),{fullImage:s,thumbnailUrl:a,mosaicColours:p}=e,f=_e(p),y=(0,be.default)(Ls,{id:i,colour:e.contrastingGrey}),v=(0,be.default)(Vr,{imageUrl:e.fullImage,thumbnailUrl:a,thumbnailDataUrl:f,loading:r,onclick:()=>{window.location.href=s}});return(0,be.default)("div",(0,be.default)("div.photo",{},[(0,be.default)("a",{onclick:Ee},n?[y,v]:[v])]))}}}var qr=[];function pa(){return{view(t){let{trip:e}=t.attrs;if(!e)return null;qr.includes(e)||qr.push(e);let r=qr.indexOf(e);return(0,ut.default)("div.trip-tag .trip-color-"+r%2)}}}function Qe(){return{view(t){let{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,child:s,minDate:a,onclick:p,trip:f}=t.attrs;return(0,ut.default)("div.photo-album",{"data-min-date":a},[(0,ut.default)(pa,{trip:f}),(0,ut.default)(Vr,{imageUrl:e,thumbnailUrl:r,thumbnailDataUrl:n,loading:i,onclick:p}),s])}}}var Ot=O(L());function Br(t){let{type:e,id:r}=w(t);return`#/thing/${e}:${r}`}function Ye(){return{view(t){let{country:e,mode:r}=t.attrs,{id:n,name:i}=e;if(!n)return(0,Ot.default)("p");let s=$e(e),a=w(n),p=Y(`/thing/${a.type}:${a.id}`);return r==="flag"?(0,Ot.default)("a.country-link-short",{href:Br(n),onclick:p},s):(0,Ot.default)("a.country-link",{href:Br(n),onclick:p},`${s} ${i}`)}}}function Ne(t){return t===void 0?new Set:new Set(Array.isArray(t)?t:[t])}function at(t,e){let r=new Set;for(let n of e)if(t in n){let i=n[t];if(i===void 0)continue;if(Array.isArray(i))for(let s of i)r.add(s);else r.add(i)}return r}function fa(t,e,r){let n=w(t);ce("navigate",{route:`/album/${n.id}`,title:e}),Ee(r)}function ma(t,e,r,n){let i=Ae(r),s=[];if(t.year!==$r(e)&&(t.year=$r(e),t.year!==new Date().getFullYear())){let y=(0,ye.default)("h2.album-year-heading",{key:`year-${t.year}`},t.year.toString());s.push(y)}let a=n.readCountries(Ne(e.country)).map(y=>(0,ye.default)(Ye,{country:y,key:`album-country-${e.id}-${y.id}`,mode:"flag"})),p=(0,ye.default)(Lt,{title:e.name,minDate:e.minDate,maxDate:e.maxDate,count:e.photosCount,countryLinks:a}),f=(0,ye.default)(Qe,{trip:e.trip,imageUrl:e.thumbnailUrl,thumbnailUrl:e.thumbnailUrl,thumbnailDataUrl:_e(e.mosaic),loading:i,minDate:e.minDate,onclick:fa.bind(null,e.id,e.name)});return s.push((0,ye.default)("div",{key:`album-${e.id}`},[f,p])),s}function ha(){return{view(t){let e={year:2005},{albums:r,services:n}=t.attrs,i=[];for(let s=0;s<r.length;s++)i.push(...ma(e,r[s],s,n));return(0,ye.default)("section.album-container",i)}}}function Cs(){return{oninit(){Le("Albums - photos")},view(t){let{albums:e,services:r}=t.attrs,n=(0,ye.default)("section.album-metadata",[(0,ye.default)("h1.albums-header","Albums"),(0,ye.default)(Ps)]);return(0,ye.default)("div.page",[n,(0,ye.default)(ha,{albums:e,services:r})])}}}var fe=O(L());function Ms(){return{oninit(){Le("About - photos")},view(){let t=new Date().getFullYear()-2012;return(0,fe.default)("div.page",[(0,fe.default)("section.about-page",[(0,fe.default)("h1","About"),(0,fe.default)("p",`I started taking photos ${t} years ago, and have taken a lot of photos since. I've become, in my opinion, a reasonable wildlife photographer (though hit-or-miss at other styles of photography). I built this website to share the things`,(0,fe.default)("a",{href:"https://photos.rgrannell.xyz/#/thing/rating:4",onclick:Y("/thing/rating:4")}," I found beautiful in this world.")),(0,fe.default)("h2","Can I use the photos on this site?"),(0,fe.default)("p","You may use this website and its content for personal, non-commerical purposes only. For example, using photos as a desktop wallpaper is fine, selling these photos is not."),(0,fe.default)("h2","Can I use data from this site to train AI?"),(0,fe.default)("p","No, absolutely not. The ",(0,fe.default)("a",{href:"http://photos.rgrannell.xyz/robots.txt"},"robots.txt")," file for this site explicitly prohibits this."),(0,fe.default)("h2","What is your contact information?"),(0,fe.default)("p","See ",(0,fe.default)("a",{href:"https://rgrannell.xyz/"},"my personal site")," for contact details.")])])}}}var Ve=O(L());var ke=O(L());function Ct(){return{view(t){let{preload:e,video:r}=t.attrs;if(!r)return(0,ke.default)("div","No video");let{posterUrl:n,videoUrl1080p:i,videoUrl480p:s,videoUrl720p:a,videoUrlUnscaled:p}=r,f=(0,ke.default)("source",{src:s,type:"video/mp4"}),y=(0,ke.default)("ul",[(0,ke.default)("a",{href:p},"[L]"),(0,ke.default)("a",{href:i},"[M]"),(0,ke.default)("a",{href:a},"[S]"),(0,ke.default)("a",{href:s},"[XS]")]);return(0,ke.default)("div",{key:`video-${r.id}`},[(0,ke.default)("video.thumbnail-video",{controls:!0,preload:e,poster:n},f),y])}}}function js(){return{view(t){let{videos:e}=t.attrs,r=e.length===1?"1 video":`${e.length} videos`,n=e.map(i=>(0,Ve.default)(Ct,{video:i,preload:"auto"}));return(0,Ve.default)("div.page",(0,Ve.default)("section.photos-metadata",[(0,Ve.default)("h1","Videos"),(0,Ve.default)("p.photo-album-count",r)]),(0,Ve.default)("section.photo-container",n))}}}function Rs(t){let e=t.search({source:{type:"video"}}).sources();return Et(t,e)}var re=O(L());var Us=O(L());function ya(t){t.includes("Shared canceled")||alert(t)}async function da(t,e,r){if(!navigator.share){ya("navigator.share not available");return}try{await navigator.share({title:`${r} - photos.rgrannell.xyz`,url:e})}catch(n){console.error("Error sharing:",n)}finally{t.sharing=!1}}function ga(t){return t.sharing?"[sharing...]":"[share]"}function $s(){let t={sharing:!1};return{view(e){let{url:r,name:n}=e.attrs;return(0,Us.default)("button.photo-share-button",{disabled:!navigator.share,onclick:da.bind(null,t,r,n)},ga(t))}}}var Ns=O(L());function Vs(){return{view(){return(0,Ns.default)("a",{href:"/albums",onclick:Y("/albums")},"[albums]")}}}function qs(){return{oninit(){Le("Album - photos")},view(t){let{album:e,photos:r,videos:n,services:i}=t.attrs,{name:s,minDate:a,maxDate:p,photosCount:f,description:y,country:v}=e,b=_t(a,p,Pt(500)),k=f===1?"1 photo":`${f} photos`,A=i.readCountries(i.namesToUrns(Ne(v))).map(I=>(0,re.default)(Ye,{country:I,mode:"flag"})),{id:$}=w(e.id),ne=`https://sharephoto.rgrannell.xyz/album/${$}`,ee=(0,re.default)("section.photos-metadata",[(0,re.default)("h1",s),(0,re.default)("p.photo-album-date",(0,re.default)("time",b)),(0,re.default)("p.photo-album-count",k),(0,re.default)("p.photo-album-countries",A),(0,re.default)("p.photo-album-description",re.default.trust(bt(y??"")??"")),(0,re.default)($s,{url:ne,name:s})," ",(0,re.default)(Vs)," "]),G=r.map((I,E)=>(0,re.default)(Ce,{photo:I,loading:Ae(E),interactive:!0})),j=n.map(I=>(0,re.default)(Ct,{video:I,preload:"auto"}));return(0,re.default)("div.page",ee,(0,re.default)("section.photo-container",G),(0,re.default)("section.video-container",j))}}}var Me=O(L());function va(){return{view(t){let{photos:e}=t.attrs;return(0,Me.default)("section.photo-container",e.map((r,n)=>{let i=Ae(n);return(0,Me.default)(Ce,{key:`photo-${r.id}`,photo:r,loading:i,interactive:!0})}))}}}function Bs(){return{view(t){let{photos:e}=t.attrs,r=`${e.length} photo${e.length===1?"":"s"}`,n=(0,Me.default)("section.photos-metadata",[(0,Me.default)("h1","Photos"),(0,Me.default)("p.photo-album-count",r)]);return(0,Me.default)("div.page",[n,(0,Me.default)(va,{photos:e})])}}}var he=O(L());var zs=O(L());function Fs(){return{view(t){let{id:e}=t.attrs;return(0,zs.default)("a",{href:`#/album/${e}`,onclick:Y(`/album/${e}`)},"[album]")}}}var P=O(L());function qe(){return{view(t){let{text:e}=t.attrs;return(0,P.default)("th.exif-heading",e)}}}function ba(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.model]);return n.length>0?(0,P.default)("td",n):(0,P.default)("td","Unknown")}}}function xa(){return{view(t){let{photo:e}=t.attrs;return typeof e.width=="string"&&typeof e.height=="string"?(0,P.default)("td",`${e.width} x ${e.height}`):(0,P.default)("td","Unknown")}}}function Aa(){return{view(t){let{photo:e}=t.attrs;return e.focalLength==="Unknown"?(0,P.default)("td","Unknown"):e.focalLength==="0"?(0,P.default)("td","Manual lens"):e.focalLength?(0,P.default)("td",`${e.focalLength}mm`):(0,P.default)("td","Unknown")}}}function wa(){return{view(t){let{photo:e}=t.attrs,{exposureTime:r}=e;if(typeof r=="string"){let n=parseFloat(r);return isNaN(n)?(0,P.default)("td","Unknown"):n>=1?(0,P.default)("td",`${n} s`):(0,P.default)("td",`1/${Math.round(1/n)} s`)}return(0,P.default)("td","Unknown")}}}function Ta(){return{view(t){let{photo:e}=t.attrs;return e.fStop==="Unknown"?(0,P.default)("td","Unknown"):e.fStop==="0.0"?(0,P.default)("td","Manual aperture control"):e.fStop?(0,P.default)("td",`\u0192/${e.fStop}`):(0,P.default)("td","Unknown")}}}function Hs(){return{view(t){let{photo:e,services:r}=t.attrs,n=(0,P.default)("tr",[(0,P.default)(qe,{text:"Date-Time"}),(0,P.default)("td",(0,P.default)("time",_s(e.createdAt)))]),i=(0,P.default)("tr",[(0,P.default)(qe,{text:"Camera Model"}),(0,P.default)(ba,{photo:e,services:r})]),s=(0,P.default)("tr",[(0,P.default)(qe,{text:"Dimensions"}),(0,P.default)(xa,{photo:e,services:r})]),a=(0,P.default)("tr",[(0,P.default)(qe,{text:"Focal Length"}),(0,P.default)(Aa,{photo:e,services:r})]),p=(0,P.default)("tr",[(0,P.default)(qe,{text:"Shutter Speed"}),(0,P.default)(wa,{photo:e,services:r})]),f=(0,P.default)("tr",[(0,P.default)(qe,{text:"Aperture"}),(0,P.default)(Ta,{photo:e,services:r})]),y=(0,P.default)("tr",[(0,P.default)(qe,{text:"ISO"}),(0,P.default)("td",e.iso??"Unknown")]);return(0,P.default)("table.metadata-table",[n,i,s,a,p,f,y])}}}var B=O(L());function Ke(){return{view(t){let{text:e}=t.attrs;return(0,B.default)("th.exif-heading",e)}}}function ka(){return{view(t){let{photo:e}=t.attrs,r=bt(e.description??e.summary??"");return r?(0,B.default)("td",B.default.trust(r)):(0,B.default)("td","\u2014")}}}function Ia(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.location));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Ea(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.rating]);return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Sa(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks([e.style]);return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Da(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.subject));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Pa(){return{view(t){let{photo:e,services:r}=t.attrs,n=r.toThingLinks(We(e.country));return(0,B.default)("td",n.length>0?n:"\u2014")}}}function Gs(){return{view(t){let{photo:e,services:r}=t.attrs,n=[];return(e.description||e.summary)&&n.push((0,B.default)("tr",[(0,B.default)(Ke,{text:"Description"}),(0,B.default)(ka,{photo:e,services:r})])),n.push((0,B.default)("tr",[(0,B.default)(Ke,{text:"Country"}),(0,B.default)(Pa,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ke,{text:"Location"}),(0,B.default)(Ia,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ke,{text:"Rating"}),(0,B.default)(Ea,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ke,{text:"Style"}),(0,B.default)(Sa,{photo:e,services:r})]),(0,B.default)("tr",[(0,B.default)(Ke,{text:"Subject"}),(0,B.default)(Da,{photo:e,services:r})])),(0,B.default)("table.metadata-table",n)}}}function Ws(){return{view(t){let{photo:e,services:r}=t.attrs,n=(0,he.default)("li.link-list",[(0,he.default)("a",{href:e.fullImage,rel:"noreferrer"},"[webp]")," ",(0,he.default)("a",{href:e.pngUrl,rel:"noreferrer"},"[png]")," ",(0,he.default)(Fs,{id:e.albumId})]),i=(0,he.default)(Hs,{photo:e,services:r}),s=(0,he.default)(Gs,{photo:e,services:r});return(0,he.default)("section",[(0,he.default)("h1","Photo"),(0,he.default)(Ce,{photo:e,loading:"eager",interactive:!1}),n,(0,he.default)("div.page",(0,he.default)("h3","Photo Information"),s,(0,he.default)("h3","Exif Data"),i)])}}}var de=O(L());var jt=O(L());var Be=O(L());var Xs=O(L());function zr(){return{view(t){let{href:e,text:r}=t.attrs;return(0,Xs.default)("a",{href:e,target:"_blank",rel:"noopener"},r)}}}function Mt(){return{view(t){let{things:e}=t.attrs;if(e.length!==1)return(0,Be.default)("ul");let[r]=e,n=[],i=M(r.wikipedia);i&&n.push((0,Be.default)("li",(0,Be.default)(zr,{href:i,text:"[wikipedia]"})));let s=M(r.birdwatchUrl);return s&&n.push((0,Be.default)("li",(0,Be.default)(zr,{href:s,text:"[birdwatch]"}))),(0,Be.default)("ul.link-list",n)}}}function Js(){let t=new Set([D.AMPHIBIAN,D.REPTILE,D.INSECT,D.FISH,D.MAMMAL]);return{view(e){let{thing:r}=e.attrs,{type:n}=w(M(r.id)),i=(0,jt.default)(Mt,{things:[r]}),s=n===D.COUNTRY?`${$e(r)} ${M(r.name)}`:M(r.name);return(0,jt.default)("div.photo-album-metadata",[(0,jt.default)("p.photo-album-title",s),i])}}}function _a(t,e,r){let n=M(e.id);if(!n)return[];let i=t.readThingCover(n);if(!i)return[];let s=(0,de.default)(Js,{thing:e}),{id:a,type:p}=w(n);return[(0,de.default)(Qe,{imageUrl:i.fullImage,thumbnailUrl:i.thumbnailUrl,thumbnailDataUrl:_e(i?.mosaicColours),loading:Ae(r),trip:void 0,child:s,onclick:Y(`/thing/${p}:${a}`)})]}function La(){return{view(t){let{services:e,things:r}=t.attrs,n=r.flatMap((i,s)=>(console.log("Drawing album for thing:",i),_a(e,i,s)));return(0,de.default)("section.album-container",n)}}}function Oa(){return{view(t){let{type:e}=t.attrs;return(0,de.default)("h1.albums-header",`${Ue(vt(e))}`)}}}function Ca(){return{view(t){let{type:e}=t.attrs;return(0,de.default)("a",{href:`#/thing/${e}:*`,onclick:Y(`/thing/${e}:*`)},`See all ${e} photos`)}}}function Qs(){return{view(t){let{type:e,things:r,services:n}=t.attrs,i=[(0,de.default)(Oa,{type:e})];return li.has(e)||i.push((0,de.default)("section.album-metadata",[(0,de.default)(Ca,{type:e})])),(0,de.default)("div.page",[(0,de.default)("section.album-metadata",i),(0,de.default)(La,{services:n,things:r})])}}}var me=O(L());function ze(){return{view(t){return(0,me.default)("li",(0,me.default)("a",{class:"listing-item",onclick:Y(t.attrs.route)},t.attrs.name))}}}function Ys(){return{view(){return(0,me.default)("div.page",[(0,me.default)("h1","Listings"),(0,me.default)("section",(0,me.default)("ul",[(0,me.default)(ze,{route:"/listing/place",name:"Places"}),(0,me.default)(ze,{route:"/listing/country",name:"Countries"}),(0,me.default)(ze,{route:"/listing/bird",name:"Birds"}),(0,me.default)(ze,{route:"/listing/mammal",name:"Mammals"}),(0,me.default)(ze,{route:"/listing/reptile",name:"Reptiles"}),(0,me.default)(ze,{route:"/listing/amphibian",name:"Amphibians"}),(0,me.default)(ze,{route:"/listing/insect",name:"Insects"})]))])}}}var N=O(L());var Rt=O(L());function Ma(t,e){let r=rt(t);if(r.id==="*")return Ue(vt(r.type));if(e.length===0)return t;let[n]=e,i=M(n.name)??r.id;return r.type===D.COUNTRY?`${$e(n)} ${i}`:r.type===D.PLACE?`${At(n)} ${i}`:i}function Ks(){return{view(t){let{urn:e,things:r}=t.attrs,n=Ma(e,r);return Le(n),(0,Rt.default)("h1",n)}}}function Zs(){return{view(t){let e=w(t.attrs.urn);return di.has(e.type)&&e.id!=="*"?(0,Rt.default)("span",{class:`thing-binomial ${e.type}-binomial`},vi(e.id)):(0,Rt.default)("span")}}}var Ut=O(L());function Fr(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readLocations(e).sort((s,a)=>(M(s.name)??"").localeCompare(M(a.name)??"")).map(s=>{let a=(0,Ut.default)(Tt,{urn:M(s.id),thing:s});return(0,Ut.default)("li",{key:`place-${s.id}`},a)});return(0,Ut.default)("ul",i)}}}var eo=O(L());function ja(t,e){ce("navigate",{route:`/listing/${t}`}),Ee(e)}function to(){return{view(t){let e="";return"type"in t.attrs?e=t.attrs.type:e=w(t.attrs.urn).type,(0,eo.default)("a",{href:`#/listing/${e}`,onclick:ja.bind(null,e)},Ue(e))}}}var $t=O(L());var ro=O(L());function no(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=w(e),s=M(r.name)??i,p=`${wt(e,s,r)}	${s}`;return(0,ro.default)("p",{class:["thing-link",`${n}-link`].join(" ")},p)}}}function io(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readFeatures(e).map(s=>{let a=M(s.id);return(0,$t.default)("li",{key:`feature-${a}`},(0,$t.default)(no,{urn:a,thing:s}))});return(0,$t.default)("ul",i)}}}var Nt=O(L());var so=O(L());function oo(){return{view(t){let{urn:e,thing:r}=t.attrs,{type:n,id:i}=w(e),s=M(r.name)??i;return(0,so.default)("a",{href:`https://whc.unesco.org/en/list/${i}`,target:"_blank",rel:"noopener noreferrer",class:["thing-link",`${n}-link`].join(" ")},s)}}}function uo(){return{view(t){let{urns:e,services:r}=t.attrs,i=r.readUnescos(e).map(s=>{let a=M(s.id);return(0,Nt.default)("li",(0,Nt.default)(oo,{urn:a,thing:s}))});return(0,Nt.default)("ul",i)}}}function Ra(){return{view(t){let e={},{urn:r,things:n,services:i}=t.attrs;e.Classification=(0,N.default)(to,{urn:r});let s=at(S.IN,n);if(s.size>0&&(e["Located In"]=(0,N.default)(Fr,{services:i,urns:s})),n.length!==1)return;let[a]=n;a.features&&(e["Place Type"]=(0,N.default)(io,{urns:Ne(a.features),services:i})),a.contains&&(e.Contains=(0,N.default)(Fr,{services:i,urns:Ne(a.contains)})),a.unescoId&&(e.UNESCO=(0,N.default)(uo,{urns:new Set(We(a.unescoId)),services:i}));let p=Object.entries(e).map(([f,y])=>(0,N.default)("tr",[(0,N.default)("th.exif-heading",f),(0,N.default)("td",y)]));return(0,N.default)("div",[(0,N.default)("h3","Details"),(0,N.default)("table.metadata-table",p)])}}}function Ua(t,e,r){let n=w(t);ce("navigate",{route:`/album/${n.id}`,title:e}),Ee(r)}function $a(){return{view(t){let{things:e,services:r}=t.attrs,n=at("id",e),i=r.readAlbumsByThingIds(new Set(n)),s=r.readCountries(at("country",i)),a=i.map(p=>{let f=[...s].map(b=>(0,N.default)(Ye,{country:b,key:`album-country-${p.id}-${b.id}`,mode:"flag"})),y=(0,N.default)(Lt,{title:p.name,minDate:p.minDate,maxDate:p.maxDate,count:p.photosCount,countryLinks:f}),v=(0,N.default)(Qe,{imageUrl:p.thumbnailUrl,thumbnailUrl:p.thumbnailUrl,thumbnailDataUrl:_e(p.mosaic),loading:"lazy",minDate:p.minDate,onclick:Ua.bind(null,p.id,p.name),trip:void 0,child:(0,N.default)("p")});return(0,N.default)("div",v,y)});return(0,N.default)("section.album-container",a)}}}function Na(){return{view(t){let{things:e,services:r}=t.attrs,n=at("id",e),i=r.readPhotosByThingIds(n);return(0,N.default)("section.photo-container",i.map((s,a)=>{let p=Ae(a);return(0,N.default)(Ce,{key:`photo-${s.id}`,photo:s,loading:p,interactive:!0})}))}}}function ao(){return{view(t){let{urn:e,things:r,services:n}=t.attrs;return(0,N.default)("div.page",[(0,N.default)("section.thing-page",[(0,N.default)(Ks,{urn:e,things:r}),(0,N.default)(Zs,{urn:e}),(0,N.default)("br"),(0,N.default)(Mt,{things:r}),(0,N.default)(Ra,{urn:e,things:r,services:n}),(0,N.default)("h3","Photos"),(0,N.default)(Na,{urn:e,things:r,services:n}),(0,N.default)("h3","Albums"),(0,N.default)($a,{urn:e,things:r,services:n})])])}}}var d=await Ds();dt("navigate",t=>{let{route:e}=t.detail;console.info(`navigating to route: ${e}`),x.default.route.set(e)});dt("switch_theme",()=>{d.darkMode=!d.darkMode});dt("click_burger_menu",()=>{d.sidebarVisible=!d.sidebarVisible});function lo(){return{oninit(){},view(){return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Cs,{albums:xs(d.data),services:d.services})])])}}}function co(){return{oninit(){let t=x.default.route.param("id");d.currentAlbum=`urn:r\xF3:album:${t}`},view(){if(!d.currentAlbum)return(0,x.default)("p","No album selected");let t=It(d.data,d.currentAlbum),e=ws(d.data,d.currentAlbum),r=Ts(d.data,d.currentAlbum);if(!t)return(0,x.default)("p","Album not found");let{subjects:n,locations:i}=ks(d.data,d.currentAlbum);return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(qs,{album:t,subjects:n,country:t.country||[],locations:i,photos:e,videos:r,services:d.services})])])}}}function po(){return{view(){return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Ms)])])}}}function fo(){return{view(){return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(js,{videos:Rs(d.data)})])])}}}function mo(){return{view(){return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Bs,{photos:ds(d.data)})])])}}}function ho(){let t=[];return{view(){let e=x.default.route.param("pair");if(d.currentUrn=`urn:r\xF3:${e}`,w(d.currentUrn).id==="*")t=Sr(d.data,e.split(":")[0]);else{let n=Xe(d.data,d.currentUrn);n&&(t=[n])}return d.currentUrn?(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(ao,{urn:d.currentUrn,things:t,services:d.services})])]):(0,x.default)("p","No thing selected")}}}function yo(){return{oninit(){let t=x.default.route.param("id");d.currentPhoto=`urn:r\xF3:photo:${t}`},view(){if(!d.currentPhoto)return(0,x.default)("p","No photo selected");let t=Je(d.data,d.currentPhoto);return t?(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Ws,{photo:t,services:d.services})])]):(0,x.default)("p","Photo not found")}}}function go(){return{oninit(){let t=x.default.route.param("type");d.currentType=t},view(){if(!d.currentType)return(0,x.default)("p","No type selected");let t=Sr(d.data,d.currentType);return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Qs,{type:d.currentType,things:t,services:d.services})])])}}}function vo(){return{view(){return(0,x.default)("div.photos-app",{class:d.darkMode?"dark-mode":void 0},[(0,x.default)(xe,d),(0,x.default)("div.app-container",{class:d.sidebarVisible?"sidebar-visible":void 0},[(0,x.default)(Te,{visible:d.sidebarVisible}),(0,x.default)(Ys,{})])])}}}bo.default.route(document.body,"/albums",{"/albums":lo,"/about":po,"/videos":fo,"/photos":mo,"/album/:id":co,"/thing/:pair":ho,"/photo/:id":yo,"/listing/:type":go,"/listings":vo});
//# sourceMappingURL=app.8fe021a88a.js.map
